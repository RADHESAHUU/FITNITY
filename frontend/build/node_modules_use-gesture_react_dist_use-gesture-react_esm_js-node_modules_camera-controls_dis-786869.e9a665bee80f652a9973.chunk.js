(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["node_modules_use-gesture_react_dist_use-gesture-react_esm_js-node_modules_camera-controls_dis-786869"],{"+9dH":(t,e,i)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},n.apply(null,arguments)}i.d(e,{A:()=>n})},"+HXV":(t,e,i)=>{"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}i.d(e,{cz:()=>Mt,Lr:()=>E});var r=i("jBc9");function o(t,e){for(var i=[],n=t.toArray(),s=e.toArray(),o=0;o<n.length;o++)i[o]=n[o]+s[o];return(new r.Matrix3).fromArray(i)}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function h(t,e){if(t){if("string"===typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,r=[],o=!0,a=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(r.push(n.value),!e||r.length!==e);o=!0);}catch(h){a=!0,s=h}finally{try{o||null==i.return||i.return()}finally{if(a)throw s}}return r}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e,i){return l=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&s(r,i.prototype),r},l.apply(null,arguments)}var u=new r.Vector2,d=new r.Vector2;function p(t){var e=t.map((function(t){return Array.isArray(t)?l(r.Vector2,c(t)):t})),i=A(e,3),n=i[0],s=i[1],o=i[2];if(function(t){return 0===function(t){var e=A(t[0],2),i=e[0],n=e[1],s=A(t[1],2),r=s[0],o=s[1],a=A(t[2],2);return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],h=e[5],A=e[6],c=e[7],l=e[8];return n*a*l+s*h*A+r*o*c-r*a*A-s*o*l-n*h*c}(i,n,1,r,o,1,a[0],a[1],1)}(t)}(t))return!1;var a=u.subVectors(s,n);return d.subVectors(o,n).cross(a)>0}function f(t,e,i){return Math.max(e,Math.min(i,t))}function g(t,e){return f(t-Math.floor(t/e)*e,0,e)}function m(t,e){var i=g(e-t,2*Math.PI);return i>Math.PI&&(i-=2*Math.PI),i}function C(t,e){return t.x===e.x?"undefined"!==typeof t.z&&t.y===e.y?t.z-e.z:t.y-e.y:t.x-e.x}function v(t,e,i){return(i-t)/(e-t)}function B(t,e){var i=(new r.Vector3).crossVectors(t,e),n=t.dot(e),s=(new r.Matrix3).identity(),a=(new r.Matrix3).set(0,-i.z,i.y,i.z,0,-i.x,-i.y,i.x,0),h=(new r.Matrix3).multiplyMatrices(a,a).multiplyScalar(1/(1+n));return o(o(s,a),h)}var E=Object.freeze({__proto__:null,clamp:f,repeat:g,deltaAngle:m,degToRad:function(t){return t/180*Math.PI},radToDeg:function(t){return 180*t/Math.PI},fibonacciOnSphere:function(t,e){for(var i=e.radius,n=void 0===i?1:i,s=t.length/3,r=2/s,o=Math.PI*(3-2.2360679775),a=0;a<t.length;a+=3){var h=a*r-1+r/2,A=Math.sqrt(1-Math.pow(h,2)),c=a%s*o,l=Math.cos(c)*A,u=Math.sin(c)*A;t[a]=l*n,t[a+1]=h*n,t[a+2]=u*n}},vectorEquals:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return Math.abs(t.x-e.x)<i&&Math.abs(t.y-e.y)<i&&Math.abs(t.z-e.z)<i},lexicographic:C,convexHull:function(t){for(var e=t.sort(C),i=[e[0],e[1]],n=2;n<e.length;n++)for(i.push(e[n]);i.length>2&&p(c(i.slice(-3)));)i.splice(i.length-2,1);for(var s=[e[e.length-1],e[e.length-2]],r=e.length-3;r>=0;r--)for(s.push(e[r]);s.length>2&&p(c(s.slice(-3)));)s.splice(s.length-2,1);return s.splice(0,1),s.splice(s.length-1,1),[].concat(i,s)},remap:function(t,e,i){var n=A(e,2),s=n[0],r=n[1],o=A(i,2),a=o[0];return a+(t-s)*(o[1]-a)/(r-s)},fade:function(t){return t*t*t*(t*(6*t-15)+10)},lerp:function(t,e,i){return t*(1-i)+e*i},inverseLerp:v,normalize:function(t,e,i){var n=Math.sqrt(t*t+e*e+i*i);return[t/n,e/n,i/n]},pointOnCubeToPointOnSphere:function(t,e,i){var n=t*t,s=e*e,r=i*i;return[t*Math.sqrt(1-(s+r)/2+s*r/3),e*Math.sqrt(1-(r+n)/2+r*n/3),i*Math.sqrt(1-(n+s)/2+n*s/3)]},rotateVectorOnVector:B,pointToCoordinate:function(t,e,i){return[Math.asin(e),Math.atan2(t,-i)]},coordinateToPoint:function(t,e){var i=Math.sin(t),n=Math.cos(t);return[Math.sin(e)*n,i,-Math.cos(e)*n]},planeSegmentIntersection:function(t,e){var i=A(e,2),n=i[0],s=i[1],o=B(t.normal,new r.Vector3(0,1,0)),a=v(n.clone().applyMatrix3(o).y,s.clone().applyMatrix3(o).y,0);return(new r.Vector3).lerpVectors(n,s,a)},pointToPlaneDistance:function(t,e){return e.normal.dot(t)},getIndexFrom3D:function(t,e){var i=A(t,3),n=i[0],s=i[1],r=i[2],o=A(e,2),a=o[0];return r*a*o[1]+s*a+n},get3DFromIndex:function(t,e){var i=A(e,2),n=i[0],s=n*i[1],r=t/s,o=t-s*r;return[o%n,o/n,r]},getIndexFrom2D:function(t,e){return t[0]+e[0]*t[1]},get2DFromIndex:function(t,e){return[t%e,Math.floor(t/e)]}});function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var I=function t(e,i,s){var r=this;y(this,t),n(this,"dot2",(function(t,e){return r.x*t+r.y*e})),n(this,"dot3",(function(t,e,i){return r.x*t+r.y*e+r.z*i})),this.x=e,this.y=i,this.z=s},_=[new I(1,1,0),new I(-1,1,0),new I(1,-1,0),new I(-1,-1,0),new I(1,0,1),new I(-1,0,1),new I(1,0,-1),new I(-1,0,-1),new I(0,1,1),new I(0,-1,1),new I(0,1,-1),new I(0,-1,-1)],w=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],b=new Array(512),x=new Array(512);function S(t){var e=function(t){if("number"===typeof t)t=Math.abs(t);else if("string"===typeof t){var e=t;t=0;for(var i=0;i<e.length;i++)t=(t+(i+1)*(e.charCodeAt(i)%96))%2147483647}return 0===t&&(t=311),t}(t);return function(){var t=48271*e%2147483647;return e=t,t/2147483647}}!function(t){t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(var e=0;e<256;e++){var i;i=1&e?w[e]^255&t:w[e]^t>>8&255,b[e]=b[e+256]=i,x[e]=x[e+256]=_[i%12]}}(0),Math.sqrt(3),Math.sqrt(3),Math.PI,new function t(e){var i=this;y(this,t),n(this,"seed",0),n(this,"init",(function(t){i.seed=t,i.value=S(t)})),n(this,"value",S(this.seed)),this.init(e)}(Math.random());var M=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)},Q={in:function(t){return 1-Math.cos(t*Math.PI/2)},out:function(t){return Math.sin(t*Math.PI/2)},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},D={in:function(t){return t*t*t},out:function(t){return 1-Math.pow(1-t,3)},inOut:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}},T={in:function(t){return t*t*t*t*t},out:function(t){return 1-Math.pow(1-t,5)},inOut:function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}},F={in:function(t){return 1-Math.sqrt(1-Math.pow(t,2))},out:function(t){return Math.sqrt(1-Math.pow(t-1,2))},inOut:function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}},R={in:function(t){return 0===t?0:Math.pow(2,10*t-10)},out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},inOut:function(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}};function P(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001,h="velocity_"+e;if(void 0===t.__damp&&(t.__damp={}),void 0===t.__damp[h]&&(t.__damp[h]=0),Math.abs(t[e]-i)<=a)return t[e]=i,!1;var A=2/(n=Math.max(1e-4,n)),c=o(A*s),l=t[e]-i,u=i,d=r*n;l=Math.min(Math.max(l,-d),d),i=t[e]-l;var p=(t.__damp[h]+A*l)*s;t.__damp[h]=(t.__damp[h]-A*p)*c;var f=i+(l+p)*c;return u-t[e]>0===f>u&&(f=u,t.__damp[h]=(f-u)/s),t[e]=f,!0}var U=new r.Vector3,O=new r.Quaternion,G=new r.Quaternion,k=new r.Matrix4,L=new r.Vector3;function N(t,e,i,n,s,r,o,a){return P(t,e,t[e]+m(t[e],i),n,s,r,o,a)}var H,z,V,J,j,Y=new r.Vector2,K=new r.Vector3;function q(t,e,i,n,s,r,o){return"number"===typeof e?K.setScalar(e):Array.isArray(e)?K.set(e[0],e[1],e[2]):K.copy(e),V=P(t,"x",K.x,i,n,s,r,o),J=P(t,"y",K.y,i,n,s,r,o),j=P(t,"z",K.z,i,n,s,r,o),V||J||j}var X,W,Z,$,tt,et,it,nt,st,rt,ot,at,ht,At,ct=new r.Vector4,lt=new r.Euler,ut=new r.Color,dt=new r.Quaternion,pt=new r.Vector4,ft=new r.Vector4,gt=new r.Vector4;function mt(t,e,i,n,s,r,o){var a=t;Array.isArray(e)?dt.set(e[0],e[1],e[2],e[3]):dt.copy(e);var h=t.dot(dt)>0?1:-1;return dt.x*=h,dt.y*=h,dt.z*=h,dt.w*=h,ot=P(t,"x",dt.x,i,n,s,r,o),at=P(t,"y",dt.y,i,n,s,r,o),ht=P(t,"z",dt.z,i,n,s,r,o),At=P(t,"w",dt.w,i,n,s,r,o),pt.set(t.x,t.y,t.z,t.w).normalize(),ft.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),gt.copy(pt).multiplyScalar(ft.dot(pt)/pt.dot(pt)),a.__damp.velocity_x-=gt.x,a.__damp.velocity_y-=gt.y,a.__damp.velocity_z-=gt.z,a.__damp.velocity_w-=gt.w,t.set(pt.x,pt.y,pt.z,pt.w),ot||at||ht||At}var Ct,vt,Bt,Et,yt,It,_t=new r.Spherical,wt=new r.Matrix4,bt=new r.Vector3,xt=new r.Quaternion,St=new r.Vector3,Mt=Object.freeze({__proto__:null,rsqw:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/e)*Math.atan(Math.sin(2*Math.PI*t*n)/e)},exp:M,linear:function(t){return t},sine:Q,cubic:D,quint:T,circ:F,quart:{in:function(t){return t*t*t*t},out:function(t){return 1- --t*t*t*t},inOut:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}},expo:R,damp:P,dampLookAt:function(t,e,i,n,s,r,o){"number"===typeof e?U.setScalar(e):Array.isArray(e)?U.set(e[0],e[1],e[2]):U.copy(e);var a,h=t.parent;t.updateWorldMatrix(!0,!1),L.setFromMatrixPosition(t.matrixWorld),(a=t)&&a.isCamera||function(t){return t&&t.isLight}(t)?k.lookAt(L,U,t.up):k.lookAt(U,L,t.up),mt(t.quaternion,G.setFromRotationMatrix(k),i,n,s,r,o),h&&(k.extractRotation(h.matrixWorld),O.setFromRotationMatrix(k),mt(t.quaternion,G.copy(t.quaternion).premultiply(O.invert()),i,n,s,r,o))},dampAngle:N,damp2:function(t,e,i,n,s,r,o){return"number"===typeof e?Y.setScalar(e):Array.isArray(e)?Y.set(e[0],e[1]):Y.copy(e),H=P(t,"x",Y.x,i,n,s,r,o),z=P(t,"y",Y.y,i,n,s,r,o),H||z},damp3:q,damp4:function(t,e,i,n,s,r,o){return"number"===typeof e?ct.setScalar(e):Array.isArray(e)?ct.set(e[0],e[1],e[2],e[3]):ct.copy(e),X=P(t,"x",ct.x,i,n,s,r,o),W=P(t,"y",ct.y,i,n,s,r,o),Z=P(t,"z",ct.z,i,n,s,r,o),$=P(t,"w",ct.w,i,n,s,r,o),X||W||Z||$},dampE:function(t,e,i,n,s,r,o){return Array.isArray(e)?lt.set(e[0],e[1],e[2],e[3]):lt.copy(e),tt=N(t,"x",lt.x,i,n,s,r,o),et=N(t,"y",lt.y,i,n,s,r,o),it=N(t,"z",lt.z,i,n,s,r,o),tt||et||it},dampC:function(t,e,i,n,s,o,a){return e instanceof r.Color?ut.copy(e):Array.isArray(e)?ut.setRGB(e[0],e[1],e[2]):ut.set(e),nt=P(t,"r",ut.r,i,n,s,o,a),st=P(t,"g",ut.g,i,n,s,o,a),rt=P(t,"b",ut.b,i,n,s,o,a),nt||st||rt},dampQ:mt,dampS:function(t,e,i,n,s,r,o){return Array.isArray(e)?_t.set(e[0],e[1],e[2]):_t.copy(e),Ct=P(t,"radius",_t.radius,i,n,s,r,o),vt=N(t,"phi",_t.phi,i,n,s,r,o),Bt=N(t,"theta",_t.theta,i,n,s,r,o),Ct||vt||Bt},dampM:function(t,e,i,n,s,o,a){var h=t;return void 0===h.__damp&&(h.__damp={position:new r.Vector3,rotation:new r.Quaternion,scale:new r.Vector3},t.decompose(h.__damp.position,h.__damp.rotation,h.__damp.scale)),Array.isArray(e)?wt.set.apply(wt,c(e)):wt.copy(e),wt.decompose(bt,xt,St),Et=q(h.__damp.position,bt,i,n,s,o,a),yt=mt(h.__damp.rotation,xt,i,n,s,o,a),It=q(h.__damp.scale,St,i,n,s,o,a),t.compose(h.__damp.position,h.__damp.rotation,h.__damp.scale),Et||yt||It}});r.BufferGeometry},"+sZi":(t,e,i)=>{"use strict";i.d(e,{n:()=>o});var n=i("jBc9");const s=new n.Box3,r=new n.Vector3;class o extends n.InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry",this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new n.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new n.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(t){const e=this.attributes.instanceStart,i=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),i.applyMatrix4(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const i=new n.InstancedInterleavedBuffer(e,6,1);return this.setAttribute("instanceStart",new n.InterleavedBufferAttribute(i,3,0)),this.setAttribute("instanceEnd",new n.InterleavedBufferAttribute(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t,e=3){let i;t instanceof Float32Array?i=t:Array.isArray(t)&&(i=new Float32Array(t));const s=new n.InstancedInterleavedBuffer(i,2*e,1);return this.setAttribute("instanceColorStart",new n.InterleavedBufferAttribute(s,e,0)),this.setAttribute("instanceColorEnd",new n.InterleavedBufferAttribute(s,e,e)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new n.WireframeGeometry(t.geometry)),this}fromLineSegments(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new n.Box3);const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),s.setFromBufferAttribute(e),this.boundingBox.union(s))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new n.Sphere),null===this.boundingBox&&this.computeBoundingBox();const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let n=0;for(let s=0,o=t.count;s<o;s++)r.fromBufferAttribute(t,s),n=Math.max(n,i.distanceToSquared(r)),r.fromBufferAttribute(e,s),n=Math.max(n,i.distanceToSquared(r));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)}}toJSON(){}applyMatrix(t){return this.applyMatrix4(t)}}},"+uaP":(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i("jBc9"),s=i("cZpV"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class a extends s.o{constructor(t,e,i,s,r=0){super(),o(this,"scene"),o(this,"camera"),o(this,"overrideMaterial"),o(this,"clearColor"),o(this,"clearAlpha"),o(this,"clearDepth",!1),o(this,"_oldClearColor",new n.Color),this.scene=t,this.camera=e,this.overrideMaterial=i,this.clearColor=s,this.clearAlpha=r,this.clear=!0,this.needsSwap=!1}render(t,e,i){let n,s=t.autoClear;t.autoClear=!1;let r=null;void 0!==this.overrideMaterial&&(r=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),n=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:i),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,n),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=r),t.autoClear=s}}},"2FA9":(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={uniforms:{tDiffuse:{value:null}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvUv = uv;\n    \tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 tex = texture2D( tDiffuse, vUv );\n\n    \t#ifdef LinearTosRGB\n    \t\tgl_FragColor = LinearTosRGB( tex );\n    \t#else\n    \t\tgl_FragColor = sRGBTransferOETF( tex );\n    \t#endif\n\n    }\n  "}},"4xMl":(t,e,i)=>{"use strict";i.d(e,{t:()=>h});var n=i("jBc9");function s(t,e,i={}){const s=new n.Vector3,a=new n.Quaternion,h=new n.Vector3,A=new n.Matrix4,c=new n.Matrix4,l=new n.Matrix4;i.preserveMatrix=void 0===i.preserveMatrix||i.preserveMatrix,i.preservePosition=void 0===i.preservePosition||i.preservePosition,i.preserveHipPosition=void 0!==i.preserveHipPosition&&i.preserveHipPosition,i.useTargetMatrix=void 0!==i.useTargetMatrix&&i.useTargetMatrix,i.hip=void 0!==i.hip?i.hip:"hip",i.names=i.names||{};const u=e.isObject3D?e.skeleton.bones:o(e),d=t.isObject3D?t.skeleton.bones:o(t);let p,f,g,m,C;if(t.isObject3D?t.skeleton.pose():(i.useTargetMatrix=!0,i.preserveMatrix=!1),i.preservePosition){C=[];for(let t=0;t<d.length;t++)C.push(d[t].position.clone())}if(i.preserveMatrix){t.updateMatrixWorld(),t.matrixWorld.identity();for(let e=0;e<t.children.length;++e)t.children[e].updateMatrixWorld(!0)}if(i.offsets){p=[];for(let t=0;t<d.length;++t)f=d[t],g=i.names[f.name]||f.name,i.offsets[g]&&(f.matrix.multiply(i.offsets[g]),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()),p.push(f.matrixWorld.clone())}for(let n=0;n<d.length;++n){if(f=d[n],g=i.names[f.name]||f.name,m=r(g,u),l.copy(f.matrixWorld),m){if(m.updateMatrixWorld(),i.useTargetMatrix?c.copy(m.matrixWorld):(c.copy(t.matrixWorld).invert(),c.multiply(m.matrixWorld)),h.setFromMatrixScale(c),c.scale(h.set(1/h.x,1/h.y,1/h.z)),l.makeRotationFromQuaternion(a.setFromRotationMatrix(c)),t.isObject3D){const e=d.indexOf(f),i=p?p[e]:A.copy(t.skeleton.boneInverses[e]).invert();l.multiply(i)}l.copyPosition(c)}f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(l)):f.matrix.copy(l),i.preserveHipPosition&&g===i.hip&&f.matrix.setPosition(s.set(0,f.position.y,0)),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()}if(i.preservePosition)for(let n=0;n<d.length;++n)f=d[n],g=i.names[f.name]||f.name,g!==i.hip&&f.position.copy(C[n]);i.preserveMatrix&&t.updateMatrixWorld(!0)}function r(t,e){for(let i=0,n=o(e);i<n.length;i++)if(t===n[i].name)return n[i]}function o(t){return Array.isArray(t)?t:t.bones}function a(t,e,i){i(t,e);for(let n=0;n<t.children.length;n++)a(t.children[n],e.children[n],i)}const h={retarget:s,retargetClip:function(t,e,i,a={}){a.useFirstFramePosition=void 0!==a.useFirstFramePosition&&a.useFirstFramePosition,a.fps=void 0!==a.fps?a.fps:30,a.names=a.names||[],e.isObject3D||(e=function(t){const e=new n.SkeletonHelper(t.bones[0]);return e.skeleton=t,e}(e));const h=Math.round(i.duration*(a.fps/1e3)*1e3),A=1/a.fps,c=[],l=new n.AnimationMixer(e),u=o(t.skeleton),d=[];let p,f,g,m,C;l.clipAction(i).play(),l.update(0),e.updateMatrixWorld();for(let n=0;n<h;++n){const i=n*A;s(t,e,a);for(let t=0;t<u.length;++t)C=a.names[u[t].name]||u[t].name,g=r(C,e.skeleton),g&&(f=u[t],m=d[t]=d[t]||{bone:f},a.hip===C&&(m.pos||(m.pos={times:new Float32Array(h),values:new Float32Array(3*h)}),a.useFirstFramePosition&&(0===n&&(p=f.position.clone()),f.position.sub(p)),m.pos.times[n]=i,f.position.toArray(m.pos.values,3*n)),m.quat||(m.quat={times:new Float32Array(h),values:new Float32Array(4*h)}),m.quat.times[n]=i,f.quaternion.toArray(m.quat.values,4*n));l.update(A),e.updateMatrixWorld()}for(let s=0;s<d.length;++s)m=d[s],m&&(m.pos&&c.push(new n.VectorKeyframeTrack(".bones["+m.bone.name+"].position",m.pos.times,m.pos.values)),c.push(new n.QuaternionKeyframeTrack(".bones["+m.bone.name+"].quaternion",m.quat.times,m.quat.values)));return l.uncacheAction(i),new n.AnimationClip(i.name,-1,c)},clone:function(t){const e=new Map,i=new Map,n=t.clone();return a(t,n,(function(t,n){e.set(n,t),i.set(t,n)})),n.traverse((function(t){if(!t.isSkinnedMesh)return;const n=t,s=e.get(t),r=s.skeleton.bones;n.skeleton=s.skeleton.clone(),n.bindMatrix.copy(s.bindMatrix),n.skeleton.bones=r.map((function(t){return i.get(t)})),n.bind(n.skeleton,n.bindMatrix)})),n}}},"7Le1":(t,e,i)=>{"use strict";i.d(e,{G:()=>r});var n=i("jBc9"),s=i("Ua9r");class r extends n.ShaderMaterial{constructor(t){super({type:"LineMaterial",uniforms:n.UniformsUtils.clone(n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new n.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:"\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>\n\n\t\t\t\tuniform float linewidth;\n\t\t\t\tuniform vec2 resolution;\n\n\t\t\t\tattribute vec3 instanceStart;\n\t\t\t\tattribute vec3 instanceEnd;\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t\tattribute vec4 instanceColorStart;\n\t\t\t\t\t\tattribute vec4 instanceColorEnd;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t\tattribute vec3 instanceColorStart;\n\t\t\t\t\t\tattribute vec3 instanceColorEnd;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashScale;\n\t\t\t\t\tattribute float instanceDistanceStart;\n\t\t\t\t\tattribute float instanceDistanceEnd;\n\t\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#endif\n\n\t\t\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t\t\t// conservative estimate of the near plane\n\t\t\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#ifdef USE_COLOR\n\n\t\t\t\t\t\tvLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t\t\t// camera space\n\t\t\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\tworldStart = start.xyz;\n\t\t\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\t\t\tif ( perspective ) {\n\n\t\t\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// clip space\n\t\t\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t\t\t// ndc space\n\t\t\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t\t\t// direction\n\t\t\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t\t\t// account for clip-space aspect ratio\n\t\t\t\t\tdir.x *= aspect;\n\t\t\t\t\tdir = normalize( dir );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\t\t\tvec3 offset;\n\t\t\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t\t\t// set the world position\n\t\t\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t\t\t// project the worldpos\n\t\t\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t\t\t// segments overlap neatly\n\t\t\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\t\t\tdir.x /= aspect;\n\t\t\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset += - dir;\n\n\t\t\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\t\t\toffset += dir;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth;\n\n\t\t\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t\t\t// select end\n\t\t\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t\t\t// back to clip space\n\t\t\t\t\t\toffset *= clip.w;\n\n\t\t\t\t\t\tclip.xy += offset;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tgl_Position = clip;\n\n\t\t\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t\t#include <clipping_planes_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:`\n\t\t\t\tuniform vec3 diffuse;\n\t\t\t\tuniform float opacity;\n\t\t\t\tuniform float linewidth;\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashOffset;\n\t\t\t\t\tuniform float dashSize;\n\t\t\t\t\tuniform float gapSize;\n\n\t\t\t\t#endif\n\n\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <clipping_planes_pars_fragment>\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\t\t\tfloat mua;\n\t\t\t\t\tfloat mub;\n\n\t\t\t\t\tvec3 p13 = p1 - p3;\n\t\t\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\t\t\tmua = numer / denom;\n\t\t\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\t\t\treturn vec2( mua, mub );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat alpha = opacity;\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\t\t\tfloat len = length( delta );\n\t\t\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\t\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\t\tdiffuseColor *= vLineColor;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tdiffuseColor.rgb *= vLineColor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\t\t\tgl_FragColor = diffuseColor;\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <${s.r>=154?"colorspace_fragment":"encodings_fragment"}>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t\t\t}\n\t\t\t`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){!0===t?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===t?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===t?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}},"9lgH":(t,e,i)=>{"use strict";i.d(e,{p:()=>O});var n=i("jBc9");class s{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=e}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,e){const i=this.workersResolve[t];if(i&&i(e),this.queue.length){const{resolve:e,msg:i,transfer:n}=this.queue.shift();this.workersResolve[t]=e,this.workers[t].postMessage(i,n)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,e){return new Promise((i=>{const n=this._getIdleWorker();-1!==n?(this._initWorker(n),this.workerStatus|=1<<n,this.workersResolve[n]=i,this.workers[n].postMessage(t,e)):this.queue.push({resolve:i,msg:t,transfer:e})}))}dispose(){this.workers.forEach((t=>t.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const r=9,o=15,a=16,h=22,A=37,c=43,l=76,u=83,d=97,p=100,f=103,g=109,m=165,C=166;class v{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class B{constructor(t,e,i,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,i),this._littleEndian=n,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e){void 0===e&&(e=0);const i=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==e&&n<t;)n++,this._offset++;return n<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,n)}}const E=[171,75,84,88,32,50,48,187,13,10,26,10];function y(t){return"undefined"!==typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString("utf8")}let I,_,w;const b={env:{emscripten_notify_memory_growth:function(t){w=new Uint8Array(_.exports.memory.buffer)}}};class x{init(){return I||(I="undefined"!==typeof fetch?fetch("data:application/wasm;base64,"+S).then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,b))).then(this._init):WebAssembly.instantiate(Buffer.from(S,"base64"),b).then(this._init),I)}_init(t){_=t.instance,b.env.emscripten_notify_memory_growth(0)}decode(t,e=0){if(!_)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=t.byteLength,n=_.exports.malloc(i);w.set(t,n),e=e||Number(_.exports.ZSTD_findDecompressedSize(n,i));const s=_.exports.malloc(e),r=_.exports.ZSTD_decompress(s,e,n,i),o=w.slice(s,s+r);return _.exports.free(n),_.exports.free(s),o}}const S="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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";class M extends n.CompressedTexture{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,n.CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class Q extends n.CompressedTexture{constructor(t,e,i,s,r,o){super(t,e,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=n.ClampToEdgeWrapping}}class D extends n.Texture{constructor(t=null,e=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:s},this.magFilter=n.NearestFilter,this.minFilter=n.NearestFilter,this.wrapR=n.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var T=Object.defineProperty,F=(t,e,i)=>(((t,e,i)=>{e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);const R="srgb",P=new WeakMap;let U;const O=(()=>{const t=class extends n.Loader{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new s,this.workerSourceURL="",this.workerConfig=null}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const e=new n.FileLoader(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const i=e.loadAsync("basis_transcoder.js"),s=new n.FileLoader(this.manager);s.setPath(this.transcoderPath),s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials);const r=s.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([i,r]).then((([e,i])=>{const n=t.BasisWorker.toString(),s=["/* constants */","let _EngineFormat = "+JSON.stringify(t.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(t.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(t.BasisFormat),"/* basis_transcoder.js */",e,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s])),this.transcoderBinary=i,this.workerPool.setWorkerCreator((()=>{const t=new Worker(this.workerSourceURL),e=this.transcoderBinary.slice(0);return t.postMessage({type:"init",config:this.workerConfig,transcoderBinary:e},[e]),t}))}))}return this.transcoderPending}load(t,e,i,s){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new n.FileLoader(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(t,(t=>{if(P.has(t))return P.get(t).promise.then(e).catch(s);this._createTexture(t).then((t=>e?e(t):null)).catch(s)}),i,s)}_createTextureFrom(t,e){const{faces:i,width:s,height:r,format:o,type:a,error:h,dfdFlags:A}=t;if("error"===a)return Promise.reject(h);let c;if(6===e.faceCount)c=new M(i,o,n.UnsignedByteType);else{const t=i[0].mipmaps;c=e.layerCount>1?new Q(t,s,r,e.layerCount,o,n.UnsignedByteType):new n.CompressedTexture(t,s,r,o,n.UnsignedByteType)}c.minFilter=1===i[0].mipmaps.length?n.LinearFilter:n.LinearMipmapLinearFilter,c.magFilter=n.LinearFilter,c.generateMipmaps=!1,c.needsUpdate=!0;const l=N(e);return"colorSpace"in c?c.colorSpace=l:c.encoding=l===R?3001:3e3,c.premultiplyAlpha=!!(1&A),c}async _createTexture(t,e={}){const i=function(t){const e=new Uint8Array(t.buffer,t.byteOffset,E.length);if(e[0]!==E[0]||e[1]!==E[1]||e[2]!==E[2]||e[3]!==E[3]||e[4]!==E[4]||e[5]!==E[5]||e[6]!==E[6]||e[7]!==E[7]||e[8]!==E[8]||e[9]!==E[9]||e[10]!==E[10]||e[11]!==E[11])throw new Error("Missing KTX 2.0 identifier.");const i=new v,n=17*Uint32Array.BYTES_PER_ELEMENT,s=new B(t,E.length,n,!0);i.vkFormat=s._nextUint32(),i.typeSize=s._nextUint32(),i.pixelWidth=s._nextUint32(),i.pixelHeight=s._nextUint32(),i.pixelDepth=s._nextUint32(),i.layerCount=s._nextUint32(),i.faceCount=s._nextUint32();const r=s._nextUint32();i.supercompressionScheme=s._nextUint32();const o=s._nextUint32(),a=s._nextUint32(),h=s._nextUint32(),A=s._nextUint32(),c=s._nextUint64(),l=s._nextUint64(),u=new B(t,E.length+n,3*r*8,!0);for(let v=0;v<r;v++)i.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+u._nextUint64(),u._nextUint64()),uncompressedByteLength:u._nextUint64()});const d=new B(t,o,a,!0),p={vendorId:d._skip(4)._nextUint16(),descriptorType:d._nextUint16(),versionNumber:d._nextUint16(),descriptorBlockSize:d._nextUint16(),colorModel:d._nextUint8(),colorPrimaries:d._nextUint8(),transferFunction:d._nextUint8(),flags:d._nextUint8(),texelBlockDimension:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],bytesPlane:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],samples:[]},f=(p.descriptorBlockSize/4-6)/4;for(let v=0;v<f;v++){const t={bitOffset:d._nextUint16(),bitLength:d._nextUint8(),channelType:d._nextUint8(),samplePosition:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&t.channelType?(t.sampleLower=d._nextInt32(),t.sampleUpper=d._nextInt32()):(t.sampleLower=d._nextUint32(),t.sampleUpper=d._nextUint32()),p.samples[v]=t}i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(p);const g=new B(t,h,A,!0);for(;g._offset<A;){const t=g._nextUint32(),e=g._scan(t),n=y(e);if(i.keyValue[n]=g._nextUint8Array(t-e.byteLength-1),n.match(/^ktx/i)){const t=y(i.keyValue[n]);i.keyValue[n]=t.substring(0,t.lastIndexOf("\0"))}const s=t%4?4-t%4:0;g._skip(s)}if(l<=0)return i;const m=new B(t,c,l,!0),C=m._nextUint16(),I=m._nextUint16(),_=m._nextUint32(),w=m._nextUint32(),b=m._nextUint32(),x=m._nextUint32(),S=[];for(let v=0;v<r;v++)S.push({imageFlags:m._nextUint32(),rgbSliceByteOffset:m._nextUint32(),rgbSliceByteLength:m._nextUint32(),alphaSliceByteOffset:m._nextUint32(),alphaSliceByteLength:m._nextUint32()});const M=c+m._offset,Q=M+_,D=Q+w,T=D+b,F=new Uint8Array(t.buffer,t.byteOffset+M,_),R=new Uint8Array(t.buffer,t.byteOffset+Q,w),P=new Uint8Array(t.buffer,t.byteOffset+D,b),U=new Uint8Array(t.buffer,t.byteOffset+T,x);return i.globalData={endpointCount:C,selectorCount:I,imageDescs:S,endpointsData:F,selectorsData:R,tablesData:P,extendedData:U},i}(new Uint8Array(t));if(0!==i.vkFormat)return async function(t){const{vkFormat:e}=t;if(void 0===k[e])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let i;2===t.supercompressionScheme&&(U||(U=new Promise((async t=>{const e=new x;await e.init(),t(e)}))),i=await U);const s=[];for(let a=0;a<t.levels.length;a++){const r=Math.max(1,t.pixelWidth>>a),o=Math.max(1,t.pixelHeight>>a),h=t.pixelDepth?Math.max(1,t.pixelDepth>>a):0,A=t.levels[a];let c,l;if(0===t.supercompressionScheme)c=A.levelData;else{if(2!==t.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");c=i.decode(A.levelData,A.uncompressedByteLength)}l=L[e]===n.FloatType?new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):L[e]===n.HalfFloatType?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):c,s.push({data:l,width:r,height:o,depth:h})}let r;if(G.has(k[e]))r=0===t.pixelDepth?new n.DataTexture(s[0].data,t.pixelWidth,t.pixelHeight):new D(s[0].data,t.pixelWidth,t.pixelHeight,t.pixelDepth);else{if(t.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new n.CompressedTexture(s,t.pixelWidth,t.pixelHeight)}r.mipmaps=s,r.type=L[e],r.format=k[e],r.needsUpdate=!0;const o=N(t);return"colorSpace"in r?r.colorSpace=o:r.encoding=o===R?3001:3e3,Promise.resolve(r)}(i);const s=e,r=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:s},[t]))).then((t=>this._createTextureFrom(t.data,i)));return P.set(t,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};let e=t;return F(e,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),F(e,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),F(e,"EngineFormat",{RGBAFormat:n.RGBAFormat,RGBA_ASTC_4x4_Format:n.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:n.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:n.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:n.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:n.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:n.RGB_ETC1_Format,RGB_ETC2_Format:n.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:n.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:n.RGB_S3TC_DXT1_Format}),F(e,"BasisWorker",(function(){let t,e,i;const n=_EngineFormat,s=_TranscoderFormat,r=_BasisFormat;self.addEventListener("message",(function(o){const l=o.data;switch(l.type){case"init":t=l.config,u=l.transcoderBinary,e=new Promise((t=>{i={wasmBinary:u,onRuntimeInitialized:t},BASIS(i)})).then((()=>{i.initializeBasis(),i.KTX2File}));break;case"transcode":e.then((()=>{try{const{faces:e,buffers:o,width:u,height:d,hasAlpha:p,format:f,dfdFlags:g}=function(e){const o=new i.KTX2File(new Uint8Array(e));function l(){o.close(),o.delete()}if(!o.isValid())throw l(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const u=o.isUASTC()?r.UASTC_4x4:r.ETC1S,d=o.getWidth(),p=o.getHeight(),f=o.getLayers()||1,g=o.getLevels(),m=o.getFaces(),C=o.getHasAlpha(),v=o.getDFDFlags(),{transcoderFormat:B,engineFormat:E}=function(e,i,o,c){let l,u;const d=e===r.ETC1S?a:h;for(let n=0;n<d.length;n++){const s=d[n];if(t[s.if]&&s.basisFormat.includes(e)&&!(c&&s.transcoderFormat.length<2)&&(!s.needsPowerOfTwo||A(i)&&A(o)))return l=s.transcoderFormat[c?1:0],u=s.engineFormat[c?1:0],{transcoderFormat:l,engineFormat:u}}return l=s.RGBA32,u=n.RGBAFormat,{transcoderFormat:l,engineFormat:u}}(u,d,p,C);if(!d||!p||!g)throw l(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!o.startTranscoding())throw l(),new Error("THREE.KTX2Loader: .startTranscoding failed");const y=[],I=[];for(let t=0;t<m;t++){const e=[];for(let i=0;i<g;i++){const n=[];let s,r;for(let e=0;e<f;e++){const a=o.getImageLevelInfo(i,e,t);0===t&&0===i&&0===e&&(a.origWidth%4!==0||a.origHeight),g>1?(s=a.origWidth,r=a.origHeight):(s=a.width,r=a.height);const h=new Uint8Array(o.getImageTranscodedSizeInBytes(i,e,0,B));if(!o.transcodeImage(h,i,e,t,B,0,-1,-1))throw l(),new Error("THREE.KTX2Loader: .transcodeImage failed.");n.push(h)}const a=c(n);e.push({data:a,width:s,height:r}),I.push(a.buffer)}y.push({mipmaps:e,width:d,height:p,format:E})}return l(),{faces:y,buffers:I,width:d,height:p,hasAlpha:C,format:E,dfdFlags:v}}(l.buffer);self.postMessage({type:"transcode",id:l.id,faces:e,width:u,height:d,hasAlpha:p,format:f,dfdFlags:g},o)}catch(e){self.postMessage({type:"error",id:l.id,error:e.message})}}))}var u}));const o=[{if:"astcSupported",basisFormat:[r.UASTC_4x4],transcoderFormat:[s.ASTC_4x4,s.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[s.BC7_M5,s.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[s.BC1,s.BC3],engineFormat:[n.RGB_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[s.ETC1,s.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[s.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[s.PVRTC1_4_RGB,s.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],a=o.sort((function(t,e){return t.priorityETC1S-e.priorityETC1S})),h=o.sort((function(t,e){return t.priorityUASTC-e.priorityUASTC}));function A(t){return t<=2||0===(t&t-1)&&0!==t}function c(t){if(1===t.length)return t[0];let e=0;for(let s=0;s<t.length;s++)e+=t[s].byteLength;const i=new Uint8Array(e);let n=0;for(let s=0;s<t.length;s++){const e=t[s];i.set(e,n),n+=e.byteLength}return i}})),e})(),G=new Set([n.RGBAFormat,n.RGFormat,n.RedFormat]),k={[g]:n.RGBAFormat,[d]:n.RGBAFormat,[A]:n.RGBAFormat,[c]:n.RGBAFormat,[f]:n.RGFormat,[u]:n.RGFormat,[a]:n.RGFormat,[h]:n.RGFormat,[p]:n.RedFormat,[l]:n.RedFormat,[o]:n.RedFormat,[r]:n.RedFormat,[C]:n.RGBA_ASTC_6x6_Format,[m]:n.RGBA_ASTC_6x6_Format},L={[g]:n.FloatType,[d]:n.HalfFloatType,[A]:n.UnsignedByteType,[c]:n.UnsignedByteType,[f]:n.FloatType,[u]:n.HalfFloatType,[a]:n.UnsignedByteType,[h]:n.UnsignedByteType,[p]:n.FloatType,[l]:n.HalfFloatType,[o]:n.UnsignedByteType,[r]:n.UnsignedByteType,[C]:n.UnsignedByteType,[m]:n.UnsignedByteType};function N(t){const e=t.dataFormatDescriptor[0];return 1===e.colorPrimaries?2===e.transferFunction?R:"srgb-linear":10===e.colorPrimaries?2===e.transferFunction?"display-p3":"display-p3-linear":(e.colorPrimaries,"")}},Ab5z:(t,e,i)=>{"use strict";i.d(e,{J:()=>o});var n=i("jBc9"),s=Object.defineProperty,r=(t,e,i)=>(((t,e,i)=>{e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class o extends n.Loader{constructor(t){super(t)}load(t,e,i,s){const r=new n.FileLoader(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,(t=>{if("string"!==typeof t)throw new Error("unsupported data type");const i=JSON.parse(t),n=this.parse(i);e&&e(n)}),i,s)}loadAsync(t,e){return super.loadAsync(t,e)}parse(t){return new a(t)}}class a{constructor(t){r(this,"data"),r(this,"isFont",!0),r(this,"type","Font"),this.data=t}generateShapes(t,e=100,i){const n=[],s={letterSpacing:0,lineHeight:1,...i},r=function(t,e,i,n){const s=Array.from(t),r=e/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,a=[];let A=0,c=0;for(let l=0;l<s.length;l++){const t=s[l];if("\n"===t)A=0,c-=o*n.lineHeight;else{const e=h(t,r,A,c,i);e&&(A+=e.offsetX+n.letterSpacing,a.push(e.path))}}return a}(t,e,this.data,s);for(let o=0,a=r.length;o<a;o++)Array.prototype.push.apply(n,r[o].toShapes(!1));return n}}function h(t,e,i,s,r){const o=r.glyphs[t]||r.glyphs["?"];if(!o)return;const a=new n.ShapePath;let h,A,c,l,u,d,p,f;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let n=0,r=t.length;n<r;)switch(t[n++]){case"m":h=parseInt(t[n++])*e+i,A=parseInt(t[n++])*e+s,a.moveTo(h,A);break;case"l":h=parseInt(t[n++])*e+i,A=parseInt(t[n++])*e+s,a.lineTo(h,A);break;case"q":c=parseInt(t[n++])*e+i,l=parseInt(t[n++])*e+s,u=parseInt(t[n++])*e+i,d=parseInt(t[n++])*e+s,a.quadraticCurveTo(u,d,c,l);break;case"b":c=parseInt(t[n++])*e+i,l=parseInt(t[n++])*e+s,u=parseInt(t[n++])*e+i,d=parseInt(t[n++])*e+s,p=parseInt(t[n++])*e+i,f=parseInt(t[n++])*e+s,a.bezierCurveTo(u,d,p,f,c,l)}}return{offsetX:o.ha*e,path:a}}},"D+O2":(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i("jBc9");const s=new WeakMap;class r extends n.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,i,s){const r=new n.FileLoader(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,(t=>{const i={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(t,i).then(e).catch(s)}),i,s)}decodeDracoFile(t,e,i,n){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(t,s).then(e)}decodeGeometry(t,e){for(const s in e.attributeTypes){const t=e.attributeTypes[s];void 0!==t.BYTES_PER_ELEMENT&&(e.attributeTypes[s]=t.name)}const i=JSON.stringify(e);if(s.has(t)){const e=s.get(t);if(e.key===i)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const r=this.workerNextTaskID++,o=t.byteLength,a=this._getWorker(r,o).then((i=>(n=i,new Promise(((i,s)=>{n._callbacks[r]={resolve:i,reject:s},n.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return a.catch((()=>!0)).then((()=>{n&&r&&this._releaseTask(n,r)})),s.set(t,{key:i,promise:a}),a}_createGeometry(t){const e=new n.BufferGeometry;t.index&&e.setIndex(new n.BufferAttribute(t.index.array,1));for(let i=0;i<t.attributes.length;i++){const s=t.attributes[i],r=s.name,o=s.array,a=s.itemSize;e.setAttribute(r,new n.BufferAttribute(o,a))}return e}_loadLibrary(t,e){const i=new n.FileLoader(this.manager);return i.setPath(this.decoderPath),i.setResponseType(e),i.setWithCredentials(this.withCredentials),new Promise(((e,n)=>{i.load(t,e,void 0,n)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const i=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const n=o.toString(),s=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const i=e.data;switch(i.type){case"decode":t._callbacks[i.id].resolve(i);break;case"error":t._callbacks[i.id].reject(i)}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[t]=e,i._taskLoad+=e,i}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function o(){let t,e;function i(t,e,i,n,s,r){const o=r.num_components(),a=i.num_points()*o,h=a*s.BYTES_PER_ELEMENT,A=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,s),c=t._malloc(h);e.GetAttributeDataArrayForAllPoints(i,r,A,h,c);const l=new s(t.HEAPF32.buffer,c,a).slice();return t._free(c),{name:n,array:l,itemSize:o}}onmessage=function(n){const s=n.data;switch(s.type){case"init":t=s.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const n=s.buffer,r=s.taskConfig;e.then((t=>{const e=t.draco,o=new e.Decoder,a=new e.DecoderBuffer;a.Init(new Int8Array(n),n.byteLength);try{const t=function(t,e,n,s){const r=s.attributeIDs,o=s.attributeTypes;let a,h;const A=e.GetEncodedGeometryType(n);if(A===t.TRIANGULAR_MESH)a=new t.Mesh,h=e.DecodeBufferToMesh(n,a);else{if(A!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new t.PointCloud,h=e.DecodeBufferToPointCloud(n,a)}if(!h.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const c={index:null,attributes:[]};for(const l in r){const n=self[o[l]];let h,A;if(s.useUniqueIDs)A=r[l],h=e.GetAttributeByUniqueId(a,A);else{if(A=e.GetAttributeId(a,t[r[l]]),-1===A)continue;h=e.GetAttribute(a,A)}c.attributes.push(i(t,e,a,l,n,h))}return A===t.TRIANGULAR_MESH&&(c.index=function(t,e,i){const n=3*i.num_faces(),s=4*n,r=t._malloc(s);e.GetTrianglesUInt32Array(i,s,r);const o=new Uint32Array(t.HEAPF32.buffer,r,n).slice();return t._free(r),{array:o,itemSize:1}}(t,e,a)),t.destroy(a),c}(e,o,a,r),n=t.attributes.map((t=>t.array.buffer));t.index&&n.push(t.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:t},n)}catch(h){self.postMessage({type:"error",id:s.id,error:h.message})}finally{e.destroy(a),e.destroy(o)}}))}}}},FbkE:(t,e,i)=>{"use strict";i.d(e,{F:()=>n});const n={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "}},Fz9d:(t,e,i)=>{"use strict";i.d(e,{N:()=>o});var n=i("jBc9");const s=new n.Triangle,r=new n.Vector3;class o{constructor(t){let e=t.geometry;e.index&&(e=e.toNonIndexed()),this.geometry=e,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this}build(){const t=this.positionAttribute,e=this.weightAttribute,i=new Float32Array(t.count/3);for(let r=0;r<t.count;r+=3){let n=1;e&&(n=e.getX(r)+e.getX(r+1)+e.getX(r+2)),s.a.fromBufferAttribute(t,r),s.b.fromBufferAttribute(t,r+1),s.c.fromBufferAttribute(t,r+2),n*=s.getArea(),i[r/3]=n}this.distribution=new Float32Array(t.count/3);let n=0;for(let s=0;s<i.length;s++)n+=i[s],this.distribution[s]=n;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,e,i){const n=this.sampleFaceIndex();return this.sampleFace(n,t,e,i)}sampleFaceIndex(){const t=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*t)}binarySearch(t){const e=this.distribution;let i=0,n=e.length-1,s=-1;for(;i<=n;){const r=Math.ceil((i+n)/2);if(0===r||e[r-1]<=t&&e[r]>t){s=r;break}t<e[r]?n=r-1:i=r+1}return s}sampleFace(t,e,i,n){let o=this.randomFunction(),a=this.randomFunction();return o+a>1&&(o=1-o,a=1-a),s.a.fromBufferAttribute(this.positionAttribute,3*t),s.b.fromBufferAttribute(this.positionAttribute,3*t+1),s.c.fromBufferAttribute(this.positionAttribute,3*t+2),e.set(0,0,0).addScaledVector(s.a,o).addScaledVector(s.b,a).addScaledVector(s.c,1-(o+a)),void 0!==i&&s.getNormal(i),void 0!==n&&void 0!==this.colorAttribute&&(s.a.fromBufferAttribute(this.colorAttribute,3*t),s.b.fromBufferAttribute(this.colorAttribute,3*t+1),s.c.fromBufferAttribute(this.colorAttribute,3*t+2),r.set(0,0,0).addScaledVector(s.a,o).addScaledVector(s.b,a).addScaledVector(s.c,1-(o+a)),n.r=r.x,n.g=r.y,n.b=r.z),this}}},H80w:(t,e,i)=>{"use strict";i.d(e,{ZU:()=>o});var n=i("jBc9"),s=Object.defineProperty,r=(t,e,i)=>(((t,e,i)=>{e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class o extends n.Object3D{constructor(t,e){super(),r(this,"isTransformControls",!0),r(this,"visible",!1),r(this,"domElement"),r(this,"raycaster",new n.Raycaster),r(this,"gizmo"),r(this,"plane"),r(this,"tempVector",new n.Vector3),r(this,"tempVector2",new n.Vector3),r(this,"tempQuaternion",new n.Quaternion),r(this,"unit",{X:new n.Vector3(1,0,0),Y:new n.Vector3(0,1,0),Z:new n.Vector3(0,0,1)}),r(this,"pointStart",new n.Vector3),r(this,"pointEnd",new n.Vector3),r(this,"offset",new n.Vector3),r(this,"rotationAxis",new n.Vector3),r(this,"startNorm",new n.Vector3),r(this,"endNorm",new n.Vector3),r(this,"rotationAngle",0),r(this,"cameraPosition",new n.Vector3),r(this,"cameraQuaternion",new n.Quaternion),r(this,"cameraScale",new n.Vector3),r(this,"parentPosition",new n.Vector3),r(this,"parentQuaternion",new n.Quaternion),r(this,"parentQuaternionInv",new n.Quaternion),r(this,"parentScale",new n.Vector3),r(this,"worldPositionStart",new n.Vector3),r(this,"worldQuaternionStart",new n.Quaternion),r(this,"worldScaleStart",new n.Vector3),r(this,"worldPosition",new n.Vector3),r(this,"worldQuaternion",new n.Quaternion),r(this,"worldQuaternionInv",new n.Quaternion),r(this,"worldScale",new n.Vector3),r(this,"eye",new n.Vector3),r(this,"positionStart",new n.Vector3),r(this,"quaternionStart",new n.Quaternion),r(this,"scaleStart",new n.Vector3),r(this,"camera"),r(this,"object"),r(this,"enabled",!0),r(this,"axis",null),r(this,"mode","translate"),r(this,"translationSnap",null),r(this,"rotationSnap",null),r(this,"scaleSnap",null),r(this,"space","world"),r(this,"size",1),r(this,"dragging",!1),r(this,"showX",!0),r(this,"showY",!0),r(this,"showZ",!0),r(this,"changeEvent",{type:"change"}),r(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),r(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),r(this,"objectChangeEvent",{type:"objectChange"}),r(this,"intersectObjectWithRay",((t,e,i)=>{const n=e.intersectObject(t,!0);for(let s=0;s<n.length;s++)if(n[s].object.visible||i)return n[s];return!1})),r(this,"attach",(t=>(this.object=t,this.visible=!0,this))),r(this,"detach",(()=>(this.object=void 0,this.visible=!1,this.axis=null,this))),r(this,"reset",(()=>this.enabled?(this.dragging&&void 0!==this.object&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this)),r(this,"updateMatrixWorld",(()=>{void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent||this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()})),r(this,"pointerHover",(t=>{if(void 0===this.object||!0===this.dragging)return;this.raycaster.setFromCamera(t,this.camera);const e=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);this.axis=e?e.object.name:null})),r(this,"pointerDown",(t=>{if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){this.raycaster.setFromCamera(t,this.camera);const e=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(e){let t=this.space;if("scale"===this.mode?t="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(t="world"),"local"===t&&"rotate"===this.mode){const t=this.rotationSnap;"X"===this.axis&&t&&(this.object.rotation.x=Math.round(this.object.rotation.x/t)*t),"Y"===this.axis&&t&&(this.object.rotation.y=Math.round(this.object.rotation.y/t)*t),"Z"===this.axis&&t&&(this.object.rotation.z=Math.round(this.object.rotation.z/t)*t)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}})),r(this,"pointerMove",(t=>{const e=this.axis,i=this.mode,n=this.object;let s=this.space;if("scale"===i?s="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(s="world"),void 0===n||null===e||!1===this.dragging||-1!==t.button)return;this.raycaster.setFromCamera(t,this.camera);const r=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(r){if(this.pointEnd.copy(r.point).sub(this.worldPositionStart),"translate"===i)this.offset.copy(this.pointEnd).sub(this.pointStart),"local"===s&&"XYZ"!==e&&this.offset.applyQuaternion(this.worldQuaternionInv),-1===e.indexOf("X")&&(this.offset.x=0),-1===e.indexOf("Y")&&(this.offset.y=0),-1===e.indexOf("Z")&&(this.offset.z=0),"local"===s&&"XYZ"!==e?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),n.position.copy(this.offset).add(this.positionStart),this.translationSnap&&("local"===s&&(n.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),-1!==e.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(this.quaternionStart)),"world"===s&&(n.parent&&n.position.add(this.tempVector.setFromMatrixPosition(n.parent.matrixWorld)),-1!==e.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(this.tempVector.setFromMatrixPosition(n.parent.matrixWorld))));else if("scale"===i){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(t*=-1),this.tempVector2.set(t,t,t)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),-1===e.search("X")&&(this.tempVector2.x=1),-1===e.search("Y")&&(this.tempVector2.y=1),-1===e.search("Z")&&(this.tempVector2.z=1);n.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(-1!==e.search("X")&&(this.object.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===i){this.offset.copy(this.pointEnd).sub(this.pointStart);const t=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*t):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(this.unit[e]),this.tempVector.copy(this.unit[e]),"local"===s&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*t),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===s&&"E"!==e&&"XYZE"!==e?(n.quaternion.copy(this.quaternionStart),n.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),n.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),n.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}})),r(this,"pointerUp",(t=>{0===t.button&&(this.dragging&&null!==this.axis&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)})),r(this,"getPointer",(t=>{var e;if(this.domElement&&(null==(e=this.domElement.ownerDocument)?void 0:e.pointerLockElement))return{x:0,y:0,button:t.button};{const e=t.changedTouches?t.changedTouches[0]:t,i=this.domElement.getBoundingClientRect();return{x:(e.clientX-i.left)/i.width*2-1,y:-(e.clientY-i.top)/i.height*2+1,button:t.button}}})),r(this,"onPointerHover",(t=>{if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(t))}})),r(this,"onPointerDown",(t=>{this.enabled&&this.domElement&&(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(t)),this.pointerDown(this.getPointer(t)))})),r(this,"onPointerMove",(t=>{this.enabled&&this.pointerMove(this.getPointer(t))})),r(this,"onPointerUp",(t=>{this.enabled&&this.domElement&&(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(t)))})),r(this,"getMode",(()=>this.mode)),r(this,"setMode",(t=>{this.mode=t})),r(this,"setTranslationSnap",(t=>{this.translationSnap=t})),r(this,"setRotationSnap",(t=>{this.rotationSnap=t})),r(this,"setScaleSnap",(t=>{this.scaleSnap=t})),r(this,"setSize",(t=>{this.size=t})),r(this,"setSpace",(t=>{this.space=t})),r(this,"update",(()=>{})),r(this,"connect",(t=>{document,this.domElement=t,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)})),r(this,"dispose",(()=>{var t,e,i,n,s,r;null==(t=this.domElement)||t.removeEventListener("pointerdown",this.onPointerDown),null==(e=this.domElement)||e.removeEventListener("pointermove",this.onPointerHover),null==(n=null==(i=this.domElement)?void 0:i.ownerDocument)||n.removeEventListener("pointermove",this.onPointerMove),null==(r=null==(s=this.domElement)?void 0:s.ownerDocument)||r.removeEventListener("pointerup",this.onPointerUp),this.traverse((t=>{const e=t;e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))})),this.domElement=e,this.camera=t,this.gizmo=new a,this.add(this.gizmo),this.plane=new h,this.add(this.plane);const i=(t,e)=>{let i=e;Object.defineProperty(this,t,{get:function(){return void 0!==i?i:e},set:function(e){i!==e&&(i=e,this.plane[t]=e,this.gizmo[t]=e,this.dispatchEvent({type:t+"-changed",value:e}),this.dispatchEvent(this.changeEvent))}}),this[t]=e,this.plane[t]=e,this.gizmo[t]=e};i("camera",this.camera),i("object",this.object),i("enabled",this.enabled),i("axis",this.axis),i("mode",this.mode),i("translationSnap",this.translationSnap),i("rotationSnap",this.rotationSnap),i("scaleSnap",this.scaleSnap),i("space",this.space),i("size",this.size),i("dragging",this.dragging),i("showX",this.showX),i("showY",this.showY),i("showZ",this.showZ),i("worldPosition",this.worldPosition),i("worldPositionStart",this.worldPositionStart),i("worldQuaternion",this.worldQuaternion),i("worldQuaternionStart",this.worldQuaternionStart),i("cameraPosition",this.cameraPosition),i("cameraQuaternion",this.cameraQuaternion),i("pointStart",this.pointStart),i("pointEnd",this.pointEnd),i("rotationAxis",this.rotationAxis),i("rotationAngle",this.rotationAngle),i("eye",this.eye),void 0!==e&&this.connect(e)}}class a extends n.Object3D{constructor(){super(),r(this,"isTransformControlsGizmo",!0),r(this,"type","TransformControlsGizmo"),r(this,"tempVector",new n.Vector3(0,0,0)),r(this,"tempEuler",new n.Euler),r(this,"alignVector",new n.Vector3(0,1,0)),r(this,"zeroVector",new n.Vector3(0,0,0)),r(this,"lookAtMatrix",new n.Matrix4),r(this,"tempQuaternion",new n.Quaternion),r(this,"tempQuaternion2",new n.Quaternion),r(this,"identityQuaternion",new n.Quaternion),r(this,"unitX",new n.Vector3(1,0,0)),r(this,"unitY",new n.Vector3(0,1,0)),r(this,"unitZ",new n.Vector3(0,0,1)),r(this,"gizmo"),r(this,"picker"),r(this,"helper"),r(this,"rotationAxis",new n.Vector3),r(this,"cameraPosition",new n.Vector3),r(this,"worldPositionStart",new n.Vector3),r(this,"worldQuaternionStart",new n.Quaternion),r(this,"worldPosition",new n.Vector3),r(this,"worldQuaternion",new n.Quaternion),r(this,"eye",new n.Vector3),r(this,"camera",null),r(this,"enabled",!0),r(this,"axis",null),r(this,"mode","translate"),r(this,"space","world"),r(this,"size",1),r(this,"dragging",!1),r(this,"showX",!0),r(this,"showY",!0),r(this,"showZ",!0),r(this,"updateMatrixWorld",(()=>{let t=this.space;"scale"===this.mode&&(t="local");const e="local"===t?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let s=0;s<i.length;s++){const t=i[s];let r;if(t.visible=!0,t.rotation.set(0,0,0),t.position.copy(this.worldPosition),r=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),t.scale.set(1,1,1).multiplyScalar(r*this.size/7),"helper"!==t.tag){if(t.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode){const i=.99,n=.2,s=0;"X"!==t.name&&"XYZX"!==t.name||Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(e).dot(this.eye))>i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Y"!==t.name&&"XYZY"!==t.name||Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(e).dot(this.eye))>i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Z"!==t.name&&"XYZZ"!==t.name||Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(e).dot(this.eye))>i&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XY"===t.name&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(e).dot(this.eye))<n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"YZ"===t.name&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(e).dot(this.eye))<n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XZ"===t.name&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(e).dot(this.eye))<n&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),-1!==t.name.search("X")&&(this.alignVector.copy(this.unitX).applyQuaternion(e).dot(this.eye)<s?"fwd"===t.tag?t.visible=!1:t.scale.x*=-1:"bwd"===t.tag&&(t.visible=!1)),-1!==t.name.search("Y")&&(this.alignVector.copy(this.unitY).applyQuaternion(e).dot(this.eye)<s?"fwd"===t.tag?t.visible=!1:t.scale.y*=-1:"bwd"===t.tag&&(t.visible=!1)),-1!==t.name.search("Z")&&(this.alignVector.copy(this.unitZ).applyQuaternion(e).dot(this.eye)<s?"fwd"===t.tag?t.visible=!1:t.scale.z*=-1:"bwd"===t.tag&&(t.visible=!1))}else"rotate"===this.mode&&(this.tempQuaternion2.copy(e),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(e).invert()),-1!==t.name.search("E")&&t.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),"X"===t.name&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),t.quaternion.copy(this.tempQuaternion)),"Y"===t.name&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),t.quaternion.copy(this.tempQuaternion)),"Z"===t.name&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),t.quaternion.copy(this.tempQuaternion)));t.visible=t.visible&&(-1===t.name.indexOf("X")||this.showX),t.visible=t.visible&&(-1===t.name.indexOf("Y")||this.showY),t.visible=t.visible&&(-1===t.name.indexOf("Z")||this.showZ),t.visible=t.visible&&(-1===t.name.indexOf("E")||this.showX&&this.showY&&this.showZ),t.material.tempOpacity=t.material.tempOpacity||t.material.opacity,t.material.tempColor=t.material.tempColor||t.material.color.clone(),t.material.color.copy(t.material.tempColor),t.material.opacity=t.material.tempOpacity,this.enabled?this.axis&&(t.name===this.axis||this.axis.split("").some((function(e){return t.name===e}))?(t.material.opacity=1,t.material.color.lerp(new n.Color(1,1,1),.5)):(t.material.opacity*=.25,t.material.color.lerp(new n.Color(1,1,1),.5))):(t.material.opacity*=.5,t.material.color.lerp(new n.Color(1,1,1),.5))}else t.visible=!1,"AXIS"===t.name?(t.position.copy(this.worldPositionStart),t.visible=!!this.axis,"X"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),t.quaternion.copy(e).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Y"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),t.quaternion.copy(e).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"Z"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),t.quaternion.copy(e).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(e).dot(this.eye))>.9&&(t.visible=!1)),"XYZE"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),t.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),t.quaternion.multiply(this.tempQuaternion),t.visible=this.dragging),"E"===this.axis&&(t.visible=!1)):"START"===t.name?(t.position.copy(this.worldPositionStart),t.visible=this.dragging):"END"===t.name?(t.position.copy(this.worldPosition),t.visible=this.dragging):"DELTA"===t.name?(t.position.copy(this.worldPositionStart),t.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),t.scale.copy(this.tempVector),t.visible=this.dragging):(t.quaternion.copy(e),this.dragging?t.position.copy(this.worldPositionStart):t.position.copy(this.worldPosition),this.axis&&(t.visible=-1!==this.axis.search(t.name)))}super.updateMatrixWorld()}));const t=new n.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:n.DoubleSide,fog:!1,toneMapped:!1}),e=new n.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),i=t.clone();i.opacity=.15;const s=t.clone();s.opacity=.33;const o=t.clone();o.color.set(16711680);const a=t.clone();a.color.set(65280);const h=t.clone();h.color.set(255);const A=t.clone();A.opacity=.25;const c=A.clone();c.color.set(16776960);const l=A.clone();l.color.set(65535);const u=A.clone();u.color.set(16711935),t.clone().color.set(16776960);const d=e.clone();d.color.set(16711680);const p=e.clone();p.color.set(65280);const f=e.clone();f.color.set(255);const g=e.clone();g.color.set(65535);const m=e.clone();m.color.set(16711935);const C=e.clone();C.color.set(16776960);const v=e.clone();v.color.set(7895160);const B=C.clone();B.opacity=.25;const E=new n.CylinderGeometry(0,.05,.2,12,1,!1),y=new n.BoxGeometry(.125,.125,.125),I=new n.BufferGeometry;I.setAttribute("position",new n.Float32BufferAttribute([0,0,0,1,0,0],3));const _=(t,e)=>{const i=new n.BufferGeometry,s=[];for(let n=0;n<=64*e;++n)s.push(0,Math.cos(n/32*Math.PI)*t,Math.sin(n/32*Math.PI)*t);return i.setAttribute("position",new n.Float32BufferAttribute(s,3)),i},w={X:[[new n.Mesh(E,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new n.Mesh(E,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new n.Line(I,d)]],Y:[[new n.Mesh(E,a),[0,1,0],null,null,"fwd"],[new n.Mesh(E,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new n.Line(I,p),null,[0,0,Math.PI/2]]],Z:[[new n.Mesh(E,h),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new n.Mesh(E,h),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new n.Line(I,f),null,[0,-Math.PI/2,0]]],XYZ:[[new n.Mesh(new n.OctahedronGeometry(.1,0),A.clone()),[0,0,0],[0,0,0]]],XY:[[new n.Mesh(new n.PlaneGeometry(.295,.295),c.clone()),[.15,.15,0]],[new n.Line(I,C),[.18,.3,0],null,[.125,1,1]],[new n.Line(I,C),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n.Mesh(new n.PlaneGeometry(.295,.295),l.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new n.Line(I,g),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new n.Line(I,g),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n.Mesh(new n.PlaneGeometry(.295,.295),u.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new n.Line(I,m),[.18,0,.3],null,[.125,1,1]],[new n.Line(I,m),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},b={X:[[new n.Mesh(new n.CylinderGeometry(.2,0,1,4,1,!1),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Mesh(new n.CylinderGeometry(.2,0,1,4,1,!1),i),[0,.6,0]]],Z:[[new n.Mesh(new n.CylinderGeometry(.2,0,1,4,1,!1),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new n.Mesh(new n.OctahedronGeometry(.2,0),i)]],XY:[[new n.Mesh(new n.PlaneGeometry(.4,.4),i),[.2,.2,0]]],YZ:[[new n.Mesh(new n.PlaneGeometry(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new n.Mesh(new n.PlaneGeometry(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},x={START:[[new n.Mesh(new n.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],END:[[new n.Mesh(new n.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],DELTA:[[new n.Line((()=>{const t=new n.BufferGeometry;return t.setAttribute("position",new n.Float32BufferAttribute([0,0,0,1,1,1],3)),t})(),s),null,null,null,"helper"]],X:[[new n.Line(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.Line(I,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.Line(I,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={X:[[new n.Line(_(1,.5),d)],[new n.Mesh(new n.OctahedronGeometry(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new n.Line(_(1,.5),p),null,[0,0,-Math.PI/2]],[new n.Mesh(new n.OctahedronGeometry(.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new n.Line(_(1,.5),f),null,[0,Math.PI/2,0]],[new n.Mesh(new n.OctahedronGeometry(.04,0),h),[.99,0,0],null,[1,3,1]]],E:[[new n.Line(_(1.25,1),B),null,[0,Math.PI/2,0]],[new n.Mesh(new n.CylinderGeometry(.03,0,.15,4,1,!1),B),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new n.Mesh(new n.CylinderGeometry(.03,0,.15,4,1,!1),B),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new n.Mesh(new n.CylinderGeometry(.03,0,.15,4,1,!1),B),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new n.Mesh(new n.CylinderGeometry(.03,0,.15,4,1,!1),B),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new n.Line(_(1,1),v),null,[0,Math.PI/2,0]]]},M={AXIS:[[new n.Line(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Q={X:[[new n.Mesh(new n.TorusGeometry(1,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new n.Mesh(new n.TorusGeometry(1,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new n.Mesh(new n.TorusGeometry(1,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new n.Mesh(new n.TorusGeometry(1.25,.1,2,24),i)]],XYZE:[[new n.Mesh(new n.SphereGeometry(.7,10,8),i)]]},D={X:[[new n.Mesh(y,o),[.8,0,0],[0,0,-Math.PI/2]],[new n.Line(I,d),null,null,[.8,1,1]]],Y:[[new n.Mesh(y,a),[0,.8,0]],[new n.Line(I,p),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new n.Mesh(y,h),[0,0,.8],[Math.PI/2,0,0]],[new n.Line(I,f),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new n.Mesh(y,c),[.85,.85,0],null,[2,2,.2]],[new n.Line(I,C),[.855,.98,0],null,[.125,1,1]],[new n.Line(I,C),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n.Mesh(y,l),[0,.85,.85],null,[.2,2,2]],[new n.Line(I,g),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new n.Line(I,g),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n.Mesh(y,u),[.85,0,.85],null,[2,.2,2]],[new n.Line(I,m),[.855,0,.98],null,[.125,1,1]],[new n.Line(I,m),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new n.Mesh(new n.BoxGeometry(.125,.125,.125),A.clone()),[1.1,0,0]]],XYZY:[[new n.Mesh(new n.BoxGeometry(.125,.125,.125),A.clone()),[0,1.1,0]]],XYZZ:[[new n.Mesh(new n.BoxGeometry(.125,.125,.125),A.clone()),[0,0,1.1]]]},T={X:[[new n.Mesh(new n.CylinderGeometry(.2,0,.8,4,1,!1),i),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Mesh(new n.CylinderGeometry(.2,0,.8,4,1,!1),i),[0,.5,0]]],Z:[[new n.Mesh(new n.CylinderGeometry(.2,0,.8,4,1,!1),i),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new n.Mesh(y,i),[.85,.85,0],null,[3,3,.2]]],YZ:[[new n.Mesh(y,i),[0,.85,.85],null,[.2,3,3]]],XZ:[[new n.Mesh(y,i),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new n.Mesh(new n.BoxGeometry(.2,.2,.2),i),[1.1,0,0]]],XYZY:[[new n.Mesh(new n.BoxGeometry(.2,.2,.2),i),[0,1.1,0]]],XYZZ:[[new n.Mesh(new n.BoxGeometry(.2,.2,.2),i),[0,0,1.1]]]},F={X:[[new n.Line(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.Line(I,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.Line(I,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},R=t=>{const e=new n.Object3D;for(let i in t)for(let n=t[i].length;n--;){const s=t[i][n][0].clone(),r=t[i][n][1],o=t[i][n][2],a=t[i][n][3],h=t[i][n][4];s.name=i,s.tag=h,r&&s.position.set(r[0],r[1],r[2]),o&&s.rotation.set(o[0],o[1],o[2]),a&&s.scale.set(a[0],a[1],a[2]),s.updateMatrix();const A=s.geometry.clone();A.applyMatrix4(s.matrix),s.geometry=A,s.renderOrder=1/0,s.position.set(0,0,0),s.rotation.set(0,0,0),s.scale.set(1,1,1),e.add(s)}return e};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=R(w)),this.add(this.gizmo.rotate=R(S)),this.add(this.gizmo.scale=R(D)),this.add(this.picker.translate=R(b)),this.add(this.picker.rotate=R(Q)),this.add(this.picker.scale=R(T)),this.add(this.helper.translate=R(x)),this.add(this.helper.rotate=R(M)),this.add(this.helper.scale=R(F)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class h extends n.Mesh{constructor(){super(new n.PlaneGeometry(1e5,1e5,2,2),new n.MeshBasicMaterial({visible:!1,wireframe:!0,side:n.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),r(this,"isTransformControlsPlane",!0),r(this,"type","TransformControlsPlane"),r(this,"unitX",new n.Vector3(1,0,0)),r(this,"unitY",new n.Vector3(0,1,0)),r(this,"unitZ",new n.Vector3(0,0,1)),r(this,"tempVector",new n.Vector3),r(this,"dirVector",new n.Vector3),r(this,"alignVector",new n.Vector3),r(this,"tempMatrix",new n.Matrix4),r(this,"identityQuaternion",new n.Quaternion),r(this,"cameraQuaternion",new n.Quaternion),r(this,"worldPosition",new n.Vector3),r(this,"worldQuaternion",new n.Quaternion),r(this,"eye",new n.Vector3),r(this,"axis",null),r(this,"mode","translate"),r(this,"space","world"),r(this,"updateMatrixWorld",(()=>{let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),this.unitX.set(1,0,0).applyQuaternion("local"===t?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion("local"===t?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion("local"===t?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0)}break;default:this.dirVector.set(0,0,0)}0===this.dirVector.length()?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()}))}}},J0Jp:(t,e,i)=>{"use strict";i.d(e,{w:()=>s});var n=i("jBc9");class s extends n.BufferGeometry{constructor(t,e,i,s){super();const o=[],a=[],h=[],A=new n.Vector3,c=new n.Matrix4;c.makeRotationFromEuler(i),c.setPosition(e);const l=new n.Matrix4;function u(e,i,n){i.applyMatrix4(t.matrixWorld),i.applyMatrix4(l),n.transformDirection(t.matrixWorld),e.push(new r(i.clone(),n.clone()))}function d(t,e){const i=[],n=.5*Math.abs(s.dot(e));for(let s=0;s<t.length;s+=3){let r,o,a,h,A,c,l,u=0;switch(r=t[s+0].position.dot(e)-n>0,o=t[s+1].position.dot(e)-n>0,a=t[s+2].position.dot(e)-n>0,u=(r?1:0)+(o?1:0)+(a?1:0),u){case 0:i.push(t[s]),i.push(t[s+1]),i.push(t[s+2]);break;case 1:if(r&&(h=t[s+1],A=t[s+2],c=p(t[s],h,e,n),l=p(t[s],A,e,n)),o){h=t[s],A=t[s+2],c=p(t[s+1],h,e,n),l=p(t[s+1],A,e,n),i.push(c),i.push(A.clone()),i.push(h.clone()),i.push(A.clone()),i.push(c.clone()),i.push(l);break}a&&(h=t[s],A=t[s+1],c=p(t[s+2],h,e,n),l=p(t[s+2],A,e,n)),i.push(h.clone()),i.push(A.clone()),i.push(c),i.push(l),i.push(c.clone()),i.push(A.clone());break;case 2:r||(h=t[s].clone(),A=p(h,t[s+1],e,n),c=p(h,t[s+2],e,n),i.push(h),i.push(A),i.push(c)),o||(h=t[s+1].clone(),A=p(h,t[s+2],e,n),c=p(h,t[s],e,n),i.push(h),i.push(A),i.push(c)),a||(h=t[s+2].clone(),A=p(h,t[s],e,n),c=p(h,t[s+1],e,n),i.push(h),i.push(A),i.push(c))}}return i}function p(t,e,i,s){const o=t.position.dot(i)-s,a=o/(o-(e.position.dot(i)-s));return new r(new n.Vector3(t.position.x+a*(e.position.x-t.position.x),t.position.y+a*(e.position.y-t.position.y),t.position.z+a*(e.position.z-t.position.z)),new n.Vector3(t.normal.x+a*(e.normal.x-t.normal.x),t.normal.y+a*(e.normal.y-t.normal.y),t.normal.z+a*(e.normal.z-t.normal.z)))}l.copy(c).invert(),function(){let e,i=[];const r=new n.Vector3,l=new n.Vector3;if(!0===t.geometry.isGeometry)return;const p=t.geometry,f=p.attributes.position,g=p.attributes.normal;if(null!==p.index){const t=p.index;for(e=0;e<t.count;e++)r.fromBufferAttribute(f,t.getX(e)),l.fromBufferAttribute(g,t.getX(e)),u(i,r,l)}else for(e=0;e<f.count;e++)r.fromBufferAttribute(f,e),l.fromBufferAttribute(g,e),u(i,r,l);for(i=d(i,A.set(1,0,0)),i=d(i,A.set(-1,0,0)),i=d(i,A.set(0,1,0)),i=d(i,A.set(0,-1,0)),i=d(i,A.set(0,0,1)),i=d(i,A.set(0,0,-1)),e=0;e<i.length;e++){const t=i[e];h.push(.5+t.position.x/s.x,.5+t.position.y/s.y),t.position.applyMatrix4(c),o.push(t.position.x,t.position.y,t.position.z),a.push(t.normal.x,t.normal.y,t.normal.z)}}(),this.setAttribute("position",new n.Float32BufferAttribute(o,3)),this.setAttribute("normal",new n.Float32BufferAttribute(a,3)),this.setAttribute("uv",new n.Float32BufferAttribute(h,2))}}class r{constructor(t,e){this.position=t,this.normal=e}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}},KEjY:(t,e,i)=>{"use strict";i.d(e,{Xu:()=>A,mx:()=>a});var n=i("jBc9"),s=Object.defineProperty,r=(t,e,i)=>(((t,e,i)=>{e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);function o(t,e,i,n,s){let r;if(t=t.subarray||t.slice?t:t.buffer,i=i.subarray||i.slice?i:i.buffer,t=e?t.subarray?t.subarray(e,s&&e+s):t.slice(e,s&&e+s):t,i.set)i.set(t,n);else for(r=0;r<t.length;r++)i[r+n]=t[r];return i}class a extends n.BufferGeometry{constructor(){super(),r(this,"type","MeshLine"),r(this,"isMeshLine",!0),r(this,"positions",[]),r(this,"previous",[]),r(this,"next",[]),r(this,"side",[]),r(this,"width",[]),r(this,"indices_array",[]),r(this,"uvs",[]),r(this,"counters",[]),r(this,"widthCallback",null),r(this,"_attributes"),r(this,"_points",[]),r(this,"points"),r(this,"matrixWorld",new n.Matrix4),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(t){this.setPoints(t,this.widthCallback)}}})}setMatrixWorld(t){this.matrixWorld=t}setPoints(t,e){if(t=function(t){return t instanceof Float32Array?t:t instanceof n.BufferGeometry?t.getAttribute("position").array:t.map((t=>{const e=Array.isArray(t);return t instanceof n.Vector3?[t.x,t.y,t.z]:t instanceof n.Vector2?[t.x,t.y,0]:e&&3===t.length?[t[0],t[1],t[2]]:e&&2===t.length?[t[0],t[1],0]:t})).flat()}(t),this._points=t,this.widthCallback=null!=e?e:null,this.positions=[],this.counters=[],t.length&&t[0]instanceof n.Vector3)for(let i=0;i<t.length;i++){const e=t[i],n=i/(t.length-1);this.positions.push(e.x,e.y,e.z),this.positions.push(e.x,e.y,e.z),this.counters.push(n),this.counters.push(n)}else for(let i=0;i<t.length;i+=3){const e=i/(t.length-1);this.positions.push(t[i],t[i+1],t[i+2]),this.positions.push(t[i],t[i+1],t[i+2]),this.counters.push(e),this.counters.push(e)}this.process()}compareV3(t,e){const i=6*t,n=6*e;return this.positions[i]===this.positions[n]&&this.positions[i+1]===this.positions[n+1]&&this.positions[i+2]===this.positions[n+2]}copyV3(t){const e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]}process(){const t=this.positions.length/6;let e,i;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],i=this.compareV3(0,t-1)?this.copyV3(t-2):this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let n=0;n<t;n++){if(this.side.push(1),this.side.push(-1),e=this.widthCallback?this.widthCallback(n/(t-1)):1,this.width.push(e),this.width.push(e),this.uvs.push(n/(t-1),0),this.uvs.push(n/(t-1),1),n<t-1){i=this.copyV3(n),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const t=2*n;this.indices_array.push(t,t+1,t+2),this.indices_array.push(t+2,t+1,t+3)}n>0&&(i=this.copyV3(n),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}i=this.compareV3(t-1,0)?this.copyV3(1):this.copyV3(t-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),this._attributes&&this._attributes.position.count===this.counters.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new n.BufferAttribute(new Float32Array(this.positions),3),previous:new n.BufferAttribute(new Float32Array(this.previous),3),next:new n.BufferAttribute(new Float32Array(this.next),3),side:new n.BufferAttribute(new Float32Array(this.side),1),width:new n.BufferAttribute(new Float32Array(this.width),1),uv:new n.BufferAttribute(new Float32Array(this.uvs),2),index:new n.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new n.BufferAttribute(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:t,y:e,z:i}){const n=this._attributes.position.array,s=this._attributes.previous.array,r=this._attributes.next.array,a=n.length;o(n,0,s,0,a),o(n,6,n,0,a-6),n[a-6]=t,n[a-5]=e,n[a-4]=i,n[a-3]=t,n[a-2]=e,n[a-1]=i,o(n,6,r,0,a-6),r[a-6]=t,r[a-5]=e,r[a-4]=i,r[a-3]=t,r[a-2]=e,r[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const h=`\n  #include <fog_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  \n  uniform sampler2D map;\n  uniform sampler2D alphaMap;\n  uniform float useGradient;\n  uniform float useMap;\n  uniform float useAlphaMap;\n  uniform float useDash;\n  uniform float dashArray;\n  uniform float dashOffset;\n  uniform float dashRatio;\n  uniform float visibility;\n  uniform float alphaTest;\n  uniform vec2 repeat;\n  uniform vec3 gradient[2];\n  \n  varying vec2 vUV;\n  varying vec4 vColor;\n  varying float vCounters;\n  \n  void main() {\n    #include <logdepthbuf_fragment>\n    vec4 diffuseColor = vColor;\n    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);\n    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);\n    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;\n    if (diffuseColor.a < alphaTest) discard;\n    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));\n    diffuseColor.a *= step(vCounters, visibility);\n    #include <clipping_planes_fragment>\n    gl_FragColor = diffuseColor;     \n    #include <fog_fragment>\n    #include <tonemapping_fragment>\n    #include <${(()=>parseInt(n.REVISION.replace(/\D+/g,"")))()>=154?"colorspace_fragment":"encodings_fragment"}>\n  }\n`;class A extends n.ShaderMaterial{constructor(t){super({uniforms:{...n.UniformsLib.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new n.Color(16777215)},gradient:{value:[new n.Color(16711680),new n.Color(65280)]},opacity:{value:1},resolution:{value:new n.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new n.Vector2(1,1)}},vertexShader:"\n  #include <common>\n  #include <logdepthbuf_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n\n  attribute vec3 previous;\n  attribute vec3 next;\n  attribute float side;\n  attribute float width;\n  attribute float counters;\n  \n  uniform vec2 resolution;\n  uniform float lineWidth;\n  uniform vec3 color;\n  uniform float opacity;\n  uniform float sizeAttenuation;\n  \n  varying vec2 vUV;\n  varying vec4 vColor;\n  varying float vCounters;\n  \n  vec2 fix(vec4 i, float aspect) {\n    vec2 res = i.xy / i.w;\n    res.x *= aspect;\n    return res;\n  }\n  \n  void main() {\n    float aspect = resolution.x / resolution.y;\n    vColor = vec4(color, opacity);\n    vUV = uv;\n    vCounters = counters;\n  \n    mat4 m = projectionMatrix * modelViewMatrix;\n    vec4 finalPosition = m * vec4(position, 1.0) * aspect;\n    vec4 prevPos = m * vec4(previous, 1.0);\n    vec4 nextPos = m * vec4(next, 1.0);\n  \n    vec2 currentP = fix(finalPosition, aspect);\n    vec2 prevP = fix(prevPos, aspect);\n    vec2 nextP = fix(nextPos, aspect);\n  \n    float w = lineWidth * width;\n  \n    vec2 dir;\n    if (nextP == currentP) dir = normalize(currentP - prevP);\n    else if (prevP == currentP) dir = normalize(nextP - currentP);\n    else {\n      vec2 dir1 = normalize(currentP - prevP);\n      vec2 dir2 = normalize(nextP - currentP);\n      dir = normalize(dir1 + dir2);\n  \n      vec2 perp = vec2(-dir1.y, dir1.x);\n      vec2 miter = vec2(-dir.y, dir.x);\n      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);\n    }\n  \n    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;\n    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);\n    normal.xy *= .5 * w;\n    //normal *= projectionMatrix;\n    if (sizeAttenuation == 0.) {\n      normal.xy *= finalPosition.w;\n      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;\n    }\n  \n    finalPosition.xy += normal.xy * side;\n    gl_Position = finalPosition;\n    #include <logdepthbuf_vertex>\n    #include <fog_vertex>\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    #include <clipping_planes_vertex>\n    #include <fog_vertex>\n  }\n",fragmentShader:h}),r(this,"lineWidth"),r(this,"map"),r(this,"useMap"),r(this,"alphaMap"),r(this,"useAlphaMap"),r(this,"color"),r(this,"gradient"),r(this,"resolution"),r(this,"sizeAttenuation"),r(this,"dashArray"),r(this,"dashOffset"),r(this,"dashRatio"),r(this,"useDash"),r(this,"useGradient"),r(this,"visibility"),r(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(t){this.uniforms.color.value=t}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(t){this.uniforms.gradient.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(t){this.uniforms.useDash.value=t}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(t){this.uniforms.useGradient.value=t}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(t)}copy(t){return super.copy(t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.gradient=t.gradient,this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray=t.dashArray,this.dashOffset=t.dashOffset,this.dashRatio=t.dashRatio,this.useDash=t.useDash,this.useGradient=t.useGradient,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this}}},LS7f:(t,e,i)=>{"use strict";i.d(e,{nl:()=>h});var n=i("jBc9"),s=Object.defineProperty,r=(t,e,i)=>(((t,e,i)=>{e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);const o=1024,a=(t,e,i,n,s,r)=>{const o=t.image,{data:a}=o,h=4096*r;a[4*e+h+0]=i,a[4*e+h+1]=n,a[4*e+h+2]=s,a[4*e+h+3]=1};class h{constructor(t,e=1){r(this,"curveArray"),r(this,"curveLengthArray"),r(this,"object3D"),r(this,"splineTexure"),r(this,"uniforms");const i=t.clone(),s=((t=1)=>{const e=new Float32Array(4096*t*4),i=new n.DataTexture(e,o,4*t,n.RGBAFormat,n.FloatType);return i.wrapS=n.RepeatWrapping,i.wrapT=n.RepeatWrapping,i.magFilter=n.NearestFilter,i.needsUpdate=!0,i})(e),a={spineTexture:{value:s},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}};i.traverse((t=>{(t instanceof n.Mesh||t instanceof n.InstancedMesh)&&(t.material=t.material.clone(),function(t,e,i=1){t.__ok||(t.__ok=!0,t.onBeforeCompile=t=>{if(t.__modified)return;t.__modified=!0,Object.assign(t.uniforms,e);const n=`\n\t\tuniform sampler2D spineTexture;\n\t\tuniform float pathOffset;\n\t\tuniform float pathSegment;\n\t\tuniform float spineOffset;\n\t\tuniform float spineLength;\n\t\tuniform int flow;\n\n\t\tfloat textureLayers = ${4*i}.;\n\t\tfloat textureStacks = 1.;\n\n\t\t${t.vertexShader}\n\t\t`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,"\n        void main() {\n        #include <beginnormal_vertex>\n\n        vec4 worldPos = modelMatrix * vec4(position, 1.);\n\n        bool bend = flow > 0;\n        float xWeight = bend ? 0. : 1.;\n\n        #ifdef USE_INSTANCING\n        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\n        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\n        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\n        #else\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\n        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\n        #endif\n\n        mt = mod(mt, textureStacks);\n        float rowOffset = floor(mt);\n\n        #ifdef USE_INSTANCING\n        rowOffset += instanceMatrix[3][1] * 4.;\n        #endif\n\n        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\n        mat3 basis = mat3(a, b, c);\n\n        vec3 transformed = basis\n          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\n          + spinePos;\n\n        vec3 transformedNormal = normalMatrix * (basis * objectNormal);\n\t\t\t").replace("#include <project_vertex>","vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;");t.vertexShader=n})}(t.material,a,e))})),this.curveArray=new Array(e),this.curveLengthArray=new Array(e),this.object3D=i,this.splineTexure=s,this.uniforms=a}updateCurve(t,e){if(t>=this.curveArray.length)throw Error("Index out of range for Flow");const i=e.getLength();this.uniforms.spineLength.value=i,this.curveLengthArray[t]=i,this.curveArray[t]=e,((t,e,i=0)=>{const n=Math.floor(1024);e.arcLengthDivisions=n/2,e.updateArcLengths();const s=e.getSpacedPoints(n),r=e.computeFrenetFrames(n,!0);for(let h=0;h<n;h++){const e=Math.floor(h/o),n=h%o;let A=s[h];a(t,n,A.x,A.y,A.z,0+e+4*i),A=r.tangents[h],a(t,n,A.x,A.y,A.z,1+e+4*i),A=r.normals[h],a(t,n,A.x,A.y,A.z,2+e+4*i),A=r.binormals[h],a(t,n,A.x,A.y,A.z,3+e+4*i)}t.needsUpdate=!0})(this.splineTexure,e,t)}moveAlongCurve(t){this.uniforms.pathOffset.value+=t}}},MZFn:function(t){t.exports=function(){var t=function(){function e(t){return s.appendChild(t.dom),t}function i(t){for(var e=0;e<s.children.length;e++)s.children[e].style.display=e===t?"block":"none";n=t}var n=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",(function(t){t.preventDefault(),i(++n%s.children.length)}),!1);var r=(performance||Date).now(),o=r,a=0,h=e(new t.Panel("FPS","#0ff","#002")),A=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:s,addPanel:e,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(A.update(t-r,200),t>o+1e3&&(h.update(1e3*a/(t-o),100),o=t,a=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:s,setMode:i}};return t.Panel=function(t,e,i){var n=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),a=80*o,h=48*o,A=3*o,c=2*o,l=3*o,u=15*o,d=74*o,p=30*o,f=document.createElement("canvas");f.width=a,f.height=h,f.style.cssText="width:80px;height:48px";var g=f.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,a,h),g.fillStyle=e,g.fillText(t,A,c),g.fillRect(l,u,d,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(l,u,d,p),{dom:f,update:function(h,m){n=Math.min(n,h),s=Math.max(s,h),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,a,u),g.fillStyle=e,g.fillText(r(h)+" "+t+" ("+r(n)+"-"+r(s)+")",A,c),g.drawImage(f,l+o,u,d-o,p,l,u,d-o,p),g.fillRect(l+d-o,u,o,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(l+d-o,u,o,r((1-h/m)*p))}}},t}()},N7Pa:(t,e,i)=>{"use strict";i.d(e,{c:()=>s});var n=i("jBc9");const s=(()=>{class t extends n.Loader{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,e,i,s){const r=this,o=new n.FileLoader(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(i){try{e(r.parse(i))}catch(n){s&&s(n),r.manager.itemError(t)}}),i,s)}parse(t){const e=this;function i(t,e,i,n,r,o,a,h){if(0==e||0==i)return void t.lineTo(h.x,h.y);n=n*Math.PI/180,e=Math.abs(e),i=Math.abs(i);const A=(a.x-h.x)/2,c=(a.y-h.y)/2,l=Math.cos(n)*A+Math.sin(n)*c,u=-Math.sin(n)*A+Math.cos(n)*c;let d=e*e,p=i*i;const f=l*l,g=u*u,m=f/d+g/p;if(m>1){const t=Math.sqrt(m);d=(e*=t)*e,p=(i*=t)*i}const C=d*g+p*f,v=(d*p-C)/C;let B=Math.sqrt(Math.max(0,v));r===o&&(B=-B);const E=B*e*u/i,y=-B*i*l/e,I=Math.cos(n)*E-Math.sin(n)*y+(a.x+h.x)/2,_=Math.sin(n)*E+Math.cos(n)*y+(a.y+h.y)/2,w=s(1,0,(l-E)/e,(u-y)/i),b=s((l-E)/e,(u-y)/i,(-l-E)/e,(-u-y)/i)%(2*Math.PI);t.currentPath.absellipse(I,_,e,i,w,w+b,0===o,n)}function s(t,e,i,n){const s=t*i+e*n,r=Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n);let o=Math.acos(Math.max(-1,Math.min(1,s/r)));return t*n-e*i<0&&(o=-o),o}function r(t,e){e=Object.assign({},e);let i={};if(t.hasAttribute("class")){const e=t.getAttribute("class").split(/\s/).filter(Boolean).map((t=>t.trim()));for(let t=0;t<e.length;t++)i=Object.assign(i,g["."+e[t]])}function n(n,s,r){void 0===r&&(r=function(t){return t.startsWith("url"),t}),t.hasAttribute(n)&&(e[s]=r(t.getAttribute(n))),i[n]&&(e[s]=r(i[n])),t.style&&""!==t.style[n]&&(e[s]=r(t.style[n]))}function s(t){return Math.max(0,Math.min(1,c(t)))}function r(t){return Math.max(0,c(t))}return t.hasAttribute("id")&&(i=Object.assign(i,g["#"+t.getAttribute("id")])),n("fill","fill"),n("fill-opacity","fillOpacity",s),n("fill-rule","fillRule"),n("opacity","opacity",s),n("stroke","stroke"),n("stroke-opacity","strokeOpacity",s),n("stroke-width","strokeWidth",r),n("stroke-linejoin","strokeLineJoin"),n("stroke-linecap","strokeLineCap"),n("stroke-miterlimit","strokeMiterLimit",r),n("visibility","visibility"),e}function o(t,e){return t-(e-t)}function a(t,e,i){if("string"!==typeof t)throw new TypeError("Invalid input: "+typeof t);const n={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let s=0,r=!0,o="",a="";const h=[];function A(t,e,i){const n=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw n.partial=i,n}function c(){""!==o&&(""===a?h.push(Number(o)):h.push(Number(o)*Math.pow(10,Number(a)))),o="",a=""}let l;const u=t.length;for(let d=0;d<u;d++)if(l=t[d],Array.isArray(e)&&e.includes(h.length%i)&&n.FLAGS.test(l))s=1,o=l,c();else{if(0===s){if(n.WHITESPACE.test(l))continue;if(n.DIGIT.test(l)||n.SIGN.test(l)){s=1,o=l;continue}if(n.POINT.test(l)){s=2,o=l;continue}n.COMMA.test(l)&&(r&&A(l,d,h),r=!0)}if(1===s){if(n.DIGIT.test(l)){o+=l;continue}if(n.POINT.test(l)){o+=l,s=2;continue}if(n.EXP.test(l)){s=3;continue}n.SIGN.test(l)&&1===o.length&&n.SIGN.test(o[0])&&A(l,d,h)}if(2===s){if(n.DIGIT.test(l)){o+=l;continue}if(n.EXP.test(l)){s=3;continue}n.POINT.test(l)&&"."===o[o.length-1]&&A(l,d,h)}if(3===s){if(n.DIGIT.test(l)){a+=l;continue}if(n.SIGN.test(l)){if(""===a){a+=l;continue}1===a.length&&n.SIGN.test(a)&&A(l,d,h)}}n.WHITESPACE.test(l)?(c(),s=0,r=!1):n.COMMA.test(l)?(c(),s=0,r=!0):n.SIGN.test(l)?(c(),s=1,o=l):n.POINT.test(l)?(c(),s=2,o=l):A(l,d,h)}return c(),h}const h=["mm","cm","in","pt","pc","px"],A={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(t){let i,n="px";if("string"===typeof t||t instanceof String)for(let e=0,s=h.length;e<s;e++){const i=h[e];if(t.endsWith(i)){n=i,t=t.substring(0,t.length-i.length);break}}return"px"===n&&"px"!==e.defaultUnit?i=A.in[e.defaultUnit]/e.defaultDPI:(i=A[n][e.defaultUnit],i<0&&(i=A[n].in*e.defaultDPI)),i*parseFloat(t)}function l(t){const e=t.elements;return e[0]*e[4]-e[1]*e[3]<0}function u(t){const e=t.elements,i=e[0]*e[3]+e[1]*e[4];if(0===i)return!1;const n=d(t),s=p(t);return Math.abs(i/(n*s))>Number.EPSILON}function d(t){const e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function p(t){const e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}const f=[],g={},m=[],C=new n.Matrix3,v=new n.Matrix3,B=new n.Matrix3,E=new n.Matrix3,y=new n.Vector2,I=new n.Vector3,_=new n.Matrix3,w=(new DOMParser).parseFromString(t,"image/svg+xml");return function t(e,s){if(1!==e.nodeType)return;const h=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;const e=function(t){const e=new n.Matrix3,i=C;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){const i=c(t.getAttribute("x")),n=c(t.getAttribute("y"));e.translate(i,n)}if(t.hasAttribute("transform")){const n=t.getAttribute("transform").split(")");for(let t=n.length-1;t>=0;t--){const s=n[t].trim();if(""===s)continue;const r=s.indexOf("("),o=s.length;if(r>0&&r<o){const t=s.slice(0,r),e=a(s.slice(r+1));switch(i.identity(),t){case"translate":if(e.length>=1){const t=e[0];let n=0;e.length>=2&&(n=e[1]),i.translate(t,n)}break;case"rotate":if(e.length>=1){let t=0,n=0,s=0;t=e[0]*Math.PI/180,e.length>=3&&(n=e[1],s=e[2]),v.makeTranslation(-n,-s),B.makeRotation(t),E.multiplyMatrices(B,v),v.makeTranslation(n,s),i.multiplyMatrices(v,E)}break;case"scale":if(e.length>=1){const t=e[0];let n=t;e.length>=2&&(n=e[1]),i.scale(t,n)}break;case"skewX":1===e.length&&i.set(1,Math.tan(e[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===e.length&&i.set(1,0,0,Math.tan(e[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===e.length&&i.set(e[0],e[2],e[4],e[1],e[3],e[5],0,0,1)}}e.premultiply(i)}}return e}(t);return m.length>0&&e.premultiply(m[m.length-1]),_.copy(e),m.push(e),e}(e);let A=!1,w=null;switch(e.nodeName){case"svg":case"g":s=r(e,s);break;case"style":!function(t){if(t.sheet&&t.sheet.cssRules&&t.sheet.cssRules.length)for(let e=0;e<t.sheet.cssRules.length;e++){const i=t.sheet.cssRules[e];if(1!==i.type)continue;const n=i.selectorText.split(/,/gm).filter(Boolean).map((t=>t.trim()));for(let t=0;t<n.length;t++){const e=Object.fromEntries(Object.entries(i.style).filter((([,t])=>""!==t)));g[n[t]]=Object.assign(g[n[t]]||{},e)}}}(e);break;case"path":s=r(e,s),e.hasAttribute("d")&&(w=function(t){const e=new n.ShapePath,s=new n.Vector2,r=new n.Vector2,h=new n.Vector2;let A=!0,c=!1;const l=t.getAttribute("d");if(""===l||"none"===l)return null;const u=l.match(/[a-df-z][^a-df-z]*/gi);for(let n=0,d=u.length;n<d;n++){const t=u[n],l=t.charAt(0),d=t.slice(1).trim();let p;switch(!0===A&&(c=!0,A=!1),l){case"M":p=a(d);for(let t=0,i=p.length;t<i;t+=2)s.x=p[t+0],s.y=p[t+1],r.x=s.x,r.y=s.y,0===t?e.moveTo(s.x,s.y):e.lineTo(s.x,s.y),0===t&&h.copy(s);break;case"H":p=a(d);for(let t=0,i=p.length;t<i;t++)s.x=p[t],r.x=s.x,r.y=s.y,e.lineTo(s.x,s.y),0===t&&!0===c&&h.copy(s);break;case"V":p=a(d);for(let t=0,i=p.length;t<i;t++)s.y=p[t],r.x=s.x,r.y=s.y,e.lineTo(s.x,s.y),0===t&&!0===c&&h.copy(s);break;case"L":p=a(d);for(let t=0,i=p.length;t<i;t+=2)s.x=p[t+0],s.y=p[t+1],r.x=s.x,r.y=s.y,e.lineTo(s.x,s.y),0===t&&!0===c&&h.copy(s);break;case"C":p=a(d);for(let t=0,i=p.length;t<i;t+=6)e.bezierCurveTo(p[t+0],p[t+1],p[t+2],p[t+3],p[t+4],p[t+5]),r.x=p[t+2],r.y=p[t+3],s.x=p[t+4],s.y=p[t+5],0===t&&!0===c&&h.copy(s);break;case"S":p=a(d);for(let t=0,i=p.length;t<i;t+=4)e.bezierCurveTo(o(s.x,r.x),o(s.y,r.y),p[t+0],p[t+1],p[t+2],p[t+3]),r.x=p[t+0],r.y=p[t+1],s.x=p[t+2],s.y=p[t+3],0===t&&!0===c&&h.copy(s);break;case"Q":p=a(d);for(let t=0,i=p.length;t<i;t+=4)e.quadraticCurveTo(p[t+0],p[t+1],p[t+2],p[t+3]),r.x=p[t+0],r.y=p[t+1],s.x=p[t+2],s.y=p[t+3],0===t&&!0===c&&h.copy(s);break;case"T":p=a(d);for(let t=0,i=p.length;t<i;t+=2){const i=o(s.x,r.x),n=o(s.y,r.y);e.quadraticCurveTo(i,n,p[t+0],p[t+1]),r.x=i,r.y=n,s.x=p[t+0],s.y=p[t+1],0===t&&!0===c&&h.copy(s)}break;case"A":p=a(d,[3,4],7);for(let t=0,n=p.length;t<n;t+=7){if(p[t+5]==s.x&&p[t+6]==s.y)continue;const n=s.clone();s.x=p[t+5],s.y=p[t+6],r.x=s.x,r.y=s.y,i(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],n,s),0===t&&!0===c&&h.copy(s)}break;case"m":p=a(d);for(let t=0,i=p.length;t<i;t+=2)s.x+=p[t+0],s.y+=p[t+1],r.x=s.x,r.y=s.y,0===t?e.moveTo(s.x,s.y):e.lineTo(s.x,s.y),0===t&&h.copy(s);break;case"h":p=a(d);for(let t=0,i=p.length;t<i;t++)s.x+=p[t],r.x=s.x,r.y=s.y,e.lineTo(s.x,s.y),0===t&&!0===c&&h.copy(s);break;case"v":p=a(d);for(let t=0,i=p.length;t<i;t++)s.y+=p[t],r.x=s.x,r.y=s.y,e.lineTo(s.x,s.y),0===t&&!0===c&&h.copy(s);break;case"l":p=a(d);for(let t=0,i=p.length;t<i;t+=2)s.x+=p[t+0],s.y+=p[t+1],r.x=s.x,r.y=s.y,e.lineTo(s.x,s.y),0===t&&!0===c&&h.copy(s);break;case"c":p=a(d);for(let t=0,i=p.length;t<i;t+=6)e.bezierCurveTo(s.x+p[t+0],s.y+p[t+1],s.x+p[t+2],s.y+p[t+3],s.x+p[t+4],s.y+p[t+5]),r.x=s.x+p[t+2],r.y=s.y+p[t+3],s.x+=p[t+4],s.y+=p[t+5],0===t&&!0===c&&h.copy(s);break;case"s":p=a(d);for(let t=0,i=p.length;t<i;t+=4)e.bezierCurveTo(o(s.x,r.x),o(s.y,r.y),s.x+p[t+0],s.y+p[t+1],s.x+p[t+2],s.y+p[t+3]),r.x=s.x+p[t+0],r.y=s.y+p[t+1],s.x+=p[t+2],s.y+=p[t+3],0===t&&!0===c&&h.copy(s);break;case"q":p=a(d);for(let t=0,i=p.length;t<i;t+=4)e.quadraticCurveTo(s.x+p[t+0],s.y+p[t+1],s.x+p[t+2],s.y+p[t+3]),r.x=s.x+p[t+0],r.y=s.y+p[t+1],s.x+=p[t+2],s.y+=p[t+3],0===t&&!0===c&&h.copy(s);break;case"t":p=a(d);for(let t=0,i=p.length;t<i;t+=2){const i=o(s.x,r.x),n=o(s.y,r.y);e.quadraticCurveTo(i,n,s.x+p[t+0],s.y+p[t+1]),r.x=i,r.y=n,s.x=s.x+p[t+0],s.y=s.y+p[t+1],0===t&&!0===c&&h.copy(s)}break;case"a":p=a(d,[3,4],7);for(let t=0,n=p.length;t<n;t+=7){if(0==p[t+5]&&0==p[t+6])continue;const n=s.clone();s.x+=p[t+5],s.y+=p[t+6],r.x=s.x,r.y=s.y,i(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],n,s),0===t&&!0===c&&h.copy(s)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(s.copy(h),e.currentPath.currentPoint.copy(s),A=!0)}c=!1}return e}(e));break;case"rect":s=r(e,s),w=function(t){const e=c(t.getAttribute("x")||0),i=c(t.getAttribute("y")||0),s=c(t.getAttribute("rx")||t.getAttribute("ry")||0),r=c(t.getAttribute("ry")||t.getAttribute("rx")||0),o=c(t.getAttribute("width")),a=c(t.getAttribute("height")),h=.448084975506,A=new n.ShapePath;return A.moveTo(e+s,i),A.lineTo(e+o-s,i),(0!==s||0!==r)&&A.bezierCurveTo(e+o-s*h,i,e+o,i+r*h,e+o,i+r),A.lineTo(e+o,i+a-r),(0!==s||0!==r)&&A.bezierCurveTo(e+o,i+a-r*h,e+o-s*h,i+a,e+o-s,i+a),A.lineTo(e+s,i+a),(0!==s||0!==r)&&A.bezierCurveTo(e+s*h,i+a,e,i+a-r*h,e,i+a-r),A.lineTo(e,i+r),(0!==s||0!==r)&&A.bezierCurveTo(e,i+r*h,e+s*h,i,e+s,i),A}(e);break;case"polygon":s=r(e,s),w=function(t){const e=new n.ShapePath;let i=0;return t.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(t,n,s){const r=c(n),o=c(s);0===i?e.moveTo(r,o):e.lineTo(r,o),i++})),e.currentPath.autoClose=!0,e}(e);break;case"polyline":s=r(e,s),w=function(t){const e=new n.ShapePath;let i=0;return t.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(t,n,s){const r=c(n),o=c(s);0===i?e.moveTo(r,o):e.lineTo(r,o),i++})),e.currentPath.autoClose=!1,e}(e);break;case"circle":s=r(e,s),w=function(t){const e=c(t.getAttribute("cx")||0),i=c(t.getAttribute("cy")||0),s=c(t.getAttribute("r")||0),r=new n.Path;r.absarc(e,i,s,0,2*Math.PI);const o=new n.ShapePath;return o.subPaths.push(r),o}(e);break;case"ellipse":s=r(e,s),w=function(t){const e=c(t.getAttribute("cx")||0),i=c(t.getAttribute("cy")||0),s=c(t.getAttribute("rx")||0),r=c(t.getAttribute("ry")||0),o=new n.Path;o.absellipse(e,i,s,r,0,2*Math.PI);const a=new n.ShapePath;return a.subPaths.push(o),a}(e);break;case"line":s=r(e,s),w=function(t){const e=c(t.getAttribute("x1")||0),i=c(t.getAttribute("y1")||0),s=c(t.getAttribute("x2")||0),r=c(t.getAttribute("y2")||0),o=new n.ShapePath;return o.moveTo(e,i),o.lineTo(s,r),o.currentPath.autoClose=!1,o}(e);break;case"defs":A=!0;break;case"use":s=r(e,s);const h=(e.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),l=e.viewportElement.getElementById(h);l&&t(l,s)}w&&(void 0!==s.fill&&"none"!==s.fill&&w.color.setStyle(s.fill,"srgb"),function(t,e){function i(t){I.set(t.x,t.y,1).applyMatrix3(e),t.set(I.x,I.y)}function s(t){const i=t.xRadius,s=t.yRadius,r=Math.cos(t.aRotation),o=Math.sin(t.aRotation),a=new n.Vector3(i*r,i*o,0),h=new n.Vector3(-s*o,s*r,0),A=a.applyMatrix3(e),c=h.applyMatrix3(e),u=C.set(A.x,c.x,0,A.y,c.y,0,0,0,1),d=v.copy(u).invert(),p=B.copy(d).transpose().multiply(d).elements,f=function(t,e,i){let n,s,r,o,a;const h=t+i,A=t-i,c=Math.sqrt(A*A+4*e*e);return h>0?(n=.5*(h+c),a=1/n,s=t*a*i-e*a*e):h<0?s=.5*(h-c):(n=.5*c,s=-.5*c),r=A>0?A+c:A-c,Math.abs(r)>2*Math.abs(e)?(a=-2*e/r,o=1/Math.sqrt(1+a*a),r=a*o):0===Math.abs(e)?(r=1,o=0):(a=-.5*r/e,r=1/Math.sqrt(1+a*a),o=a*r),A>0&&(a=r,r=-o,o=a),{rt1:n,rt2:s,cs:r,sn:o}}(p[0],p[1],p[4]),g=Math.sqrt(f.rt1),m=Math.sqrt(f.rt2);if(t.xRadius=1/g,t.yRadius=1/m,t.aRotation=Math.atan2(f.sn,f.cs),!((t.aEndAngle-t.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const i=v.set(g,0,0,0,m,0,0,0,1),s=B.set(f.cs,f.sn,0,-f.sn,f.cs,0,0,0,1),r=i.multiply(s).multiply(u),o=t=>{const{x:e,y:i}=new n.Vector3(Math.cos(t),Math.sin(t),0).applyMatrix3(r);return Math.atan2(i,e)};t.aStartAngle=o(t.aStartAngle),t.aEndAngle=o(t.aEndAngle),l(e)&&(t.aClockwise=!t.aClockwise)}}function r(t){const i=d(e),n=p(e);t.xRadius*=i,t.yRadius*=n;const s=i>Number.EPSILON?Math.atan2(e.elements[1],e.elements[0]):Math.atan2(-e.elements[3],e.elements[4]);t.aRotation+=s,l(e)&&(t.aStartAngle*=-1,t.aEndAngle*=-1,t.aClockwise=!t.aClockwise)}const o=t.subPaths;for(let n=0,a=o.length;n<a;n++){const t=o[n].curves;for(let n=0;n<t.length;n++){const o=t[n];o.isLineCurve?(i(o.v1),i(o.v2)):o.isCubicBezierCurve?(i(o.v0),i(o.v1),i(o.v2),i(o.v3)):o.isQuadraticBezierCurve?(i(o.v0),i(o.v1),i(o.v2)):o.isEllipseCurve&&(y.set(o.aX,o.aY),i(y),o.aX=y.x,o.aY=y.y,u(e)?s(o):r(o))}}}(w,_),f.push(w),w.userData={node:e,style:s});const b=e.childNodes;for(let i=0;i<b.length;i++){const e=b[i];A&&"style"!==e.nodeName&&"defs"!==e.nodeName||t(e,s)}h&&(m.pop(),m.length>0?_.copy(m[m.length-1]):_.identity())}(w.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:f,xml:w.documentElement}}static createShapes(t){const e=999999999,i={loc:0,t:0};function s(t,e,n,s){const o=t.x,a=e.x,h=n.x,A=s.x,c=t.y,l=e.y,u=n.y,d=s.y,p=(A-h)*(c-u)-(d-u)*(o-h),f=(d-u)*(a-o)-(A-h)*(l-c),g=p/f,m=((a-o)*(c-u)-(l-c)*(o-h))/f;if(0===f&&0!==p||g<=0||g>=1||m<0||m>1)return null;if(0===p&&0===f){for(let h=0;h<2;h++){if(r(0===h?n:s,t,e),0==i.loc){const t=0===h?n:s;return{x:t.x,y:t.y,t:i.t}}if(2==i.loc)return{x:+(o+i.t*(a-o)).toPrecision(10),y:+(c+i.t*(l-c)).toPrecision(10),t:i.t}}return null}for(let C=0;C<2;C++)if(r(0===C?n:s,t,e),0==i.loc){const t=0===C?n:s;return{x:t.x,y:t.y,t:i.t}}return{x:+(o+g*(a-o)).toPrecision(10),y:+(c+g*(l-c)).toPrecision(10),t:g}}function r(t,e,n){const s=n.x-e.x,r=n.y-e.y,o=t.x-e.x,a=t.y-e.y,h=s*a-o*r;if(t.x===e.x&&t.y===e.y)return i.loc=0,void(i.t=0);if(t.x===n.x&&t.y===n.y)return i.loc=1,void(i.t=1);if(h<-Number.EPSILON)return void(i.loc=3);if(h>Number.EPSILON)return void(i.loc=4);if(s*o<0||r*a<0)return void(i.loc=5);if(Math.sqrt(s*s+r*r)<Math.sqrt(o*o+a*a))return void(i.loc=6);let A;A=0!==s?o/s:a/r,i.loc=2,i.t=A}let o=e,a=-999999999,h=t.subPaths.map((t=>{const i=t.getPoints();let s=-999999999,r=e,h=-999999999,A=e;for(let e=0;e<i.length;e++){const t=i[e];t.y>s&&(s=t.y),t.y<r&&(r=t.y),t.x>h&&(h=t.x),t.x<A&&(A=t.x)}return a<=h&&(a=h+1),o>=A&&(o=A-1),{curves:t.curves,points:i,isCW:n.ShapeUtils.isClockWise(i),identifier:-1,boundingBox:new n.Box2(new n.Vector2(A,r),new n.Vector2(h,s))}}));h=h.filter((t=>t.points.length>1));for(let n=0;n<h.length;n++)h[n].identifier=n;const A=h.map((e=>function(t,e,i,r,o){null!==o&&void 0!==o&&""!==o||(o="nonzero");const a=new n.Vector2;t.boundingBox.getCenter(a);const h=function(t,e,i){const r=new n.Vector2;e.getCenter(r);const o=[];return i.forEach((e=>{e.boundingBox.containsPoint(r)&&function(t,e){const i=[],r=[];for(let o=1;o<t.length;o++){const a=t[o-1],h=t[o];for(let t=1;t<e.length;t++){const o=s(a,h,e[t-1],e[t]);null!==o&&void 0===i.find((t=>t.t<=o.t+Number.EPSILON&&t.t>=o.t-Number.EPSILON))&&(i.push(o),r.push(new n.Vector2(o.x,o.y)))}}return r}(t,e.points).forEach((t=>{o.push({identifier:e.identifier,isCW:e.isCW,point:t})}))})),o.sort(((t,e)=>t.point.x-e.point.x)),o}([new n.Vector2(i,a.y),new n.Vector2(r,a.y)],t.boundingBox,e);h.sort(((t,e)=>t.point.x-e.point.x));const A=[],c=[];h.forEach((e=>{e.identifier===t.identifier?A.push(e):c.push(e)}));const l=A[0].point.x,u=[];let d=0;for(;d<c.length&&c[d].point.x<l;)u.length>0&&u[u.length-1]===c[d].identifier?u.pop():u.push(c[d].identifier),d++;if(u.push(t.identifier),"evenodd"===o){const e=u.length%2===0,i=u[u.length-2];return{identifier:t.identifier,isHole:e,for:i}}if("nonzero"===o){let i=!0,n=null,s=null;for(let t=0;t<u.length;t++){const r=u[t];i?(s=e[r].isCW,i=!1,n=r):s!==e[r].isCW&&(s=e[r].isCW,i=!0)}return{identifier:t.identifier,isHole:i,for:n}}}(e,h,o,a,t.userData?t.userData.style.fillRule:void 0))),c=[];return h.forEach((t=>{if(!A[t.identifier].isHole){const e=new n.Shape;e.curves=t.curves,A.filter((e=>e.isHole&&e.for===t.identifier)).forEach((t=>{const i=h[t.identifier],s=new n.Path;s.curves=i.curves,e.holes.push(s)})),c.push(e)}})),c}static getStrokeStyle(t,e,i,n,s){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:i=void 0!==i?i:"miter",strokeLineCap:n=void 0!==n?n:"butt",strokeMiterLimit:s=void 0!==s?s:4}}static pointsToStroke(e,i,s,r){const o=[],a=[],h=[];if(0===t.pointsToStrokeWithBuffers(e,i,s,r,o,a,h))return null;const A=new n.BufferGeometry;return A.setAttribute("position",new n.Float32BufferAttribute(o,3)),A.setAttribute("normal",new n.Float32BufferAttribute(a,3)),A.setAttribute("uv",new n.Float32BufferAttribute(h,2)),A}static pointsToStrokeWithBuffers(t,e,i,s,r,o,a,h){const A=new n.Vector2,c=new n.Vector2,l=new n.Vector2,u=new n.Vector2,d=new n.Vector2,p=new n.Vector2,f=new n.Vector2,g=new n.Vector2,m=new n.Vector2,C=new n.Vector2,v=new n.Vector2,B=new n.Vector2,E=new n.Vector2,y=new n.Vector2,I=new n.Vector2,_=new n.Vector2,w=new n.Vector2;i=void 0!==i?i:12,s=void 0!==s?s:.001,h=void 0!==h?h:0;const b=(t=function(t){let e=!1;for(let n=1,r=t.length-1;n<r;n++)if(t[n].distanceTo(t[n+1])<s){e=!0;break}if(!e)return t;const i=[];i.push(t[0]);for(let n=1,r=t.length-1;n<r;n++)t[n].distanceTo(t[n+1])>=s&&i.push(t[n]);return i.push(t[t.length-1]),i}(t)).length;if(b<2)return 0;const x=t[0].equals(t[b-1]);let S,M,Q=t[0];const D=e.strokeWidth/2,T=1/(b-1);let F,R,P,U,O=0,G=!1,k=0,L=3*h,N=2*h;H(t[0],t[1],A).multiplyScalar(D),g.copy(t[0]).sub(A),m.copy(t[0]).add(A),C.copy(g),v.copy(m);for(let n=1;n<b;n++){S=t[n],M=n===b-1?x?t[1]:void 0:t[n+1];const i=A;if(H(Q,S,i),l.copy(i).multiplyScalar(D),B.copy(S).sub(l),E.copy(S).add(l),F=O+T,R=!1,void 0!==M){H(S,M,c),l.copy(c).multiplyScalar(D),y.copy(S).sub(l),I.copy(S).add(l),P=!0,l.subVectors(M,Q),i.dot(l)<0&&(P=!1),1===n&&(G=P),l.subVectors(M,S),l.normalize();const t=Math.abs(i.dot(l));if(t>Number.EPSILON){const i=D/t;l.multiplyScalar(-i),u.subVectors(S,Q),d.copy(u).setLength(i).add(l),_.copy(d).negate();const n=d.length(),s=u.length();u.divideScalar(s),p.subVectors(M,S);const r=p.length();switch(p.divideScalar(r),u.dot(_)<s&&p.dot(_)<r&&(R=!0),w.copy(d).add(S),_.add(S),U=!1,R?P?(I.copy(_),E.copy(_)):(y.copy(_),B.copy(_)):J(),e.strokeLineJoin){case"bevel":j(P,R,F);break;case"round":Y(P,R),P?V(S,B,y,F,0):V(S,I,E,F,1);break;default:const t=D*e.strokeMiterLimit/n;if(t<1){if("miter-clip"!==e.strokeLineJoin){j(P,R,F);break}Y(P,R),P?(p.subVectors(w,B).multiplyScalar(t).add(B),f.subVectors(w,y).multiplyScalar(t).add(y),z(B,F,0),z(p,F,0),z(S,F,.5),z(S,F,.5),z(p,F,0),z(f,F,0),z(S,F,.5),z(f,F,0),z(y,F,0)):(p.subVectors(w,E).multiplyScalar(t).add(E),f.subVectors(w,I).multiplyScalar(t).add(I),z(E,F,1),z(p,F,1),z(S,F,.5),z(S,F,.5),z(p,F,1),z(f,F,1),z(S,F,.5),z(f,F,1),z(I,F,1))}else R?(P?(z(m,O,1),z(g,O,0),z(w,F,0),z(m,O,1),z(w,F,0),z(_,F,1)):(z(m,O,1),z(g,O,0),z(w,F,1),z(g,O,0),z(_,F,0),z(w,F,1)),P?y.copy(w):I.copy(w)):P?(z(B,F,0),z(w,F,0),z(S,F,.5),z(S,F,.5),z(w,F,0),z(y,F,0)):(z(E,F,1),z(w,F,1),z(S,F,.5),z(S,F,.5),z(w,F,1),z(I,F,1)),U=!0}}else J()}else J();x||n!==b-1||K(t[0],C,v,P,!0,O),O=F,Q=S,g.copy(y),m.copy(I)}if(x){if(R&&r){let t=w,e=_;G!==P&&(t=_,e=w),P?(U||G)&&(e.toArray(r,0),e.toArray(r,9),U&&t.toArray(r,3)):!U&&G||(e.toArray(r,3),e.toArray(r,9),U&&t.toArray(r,0))}}else K(S,B,E,P,!1,F);return k;function H(t,e,i){return i.subVectors(e,t),i.set(-i.y,i.x).normalize()}function z(t,e,i){r&&(r[L]=t.x,r[L+1]=t.y,r[L+2]=0,o&&(o[L]=0,o[L+1]=0,o[L+2]=1),L+=3,a&&(a[N]=e,a[N+1]=i,N+=2)),k+=3}function V(t,e,n,s,r){A.copy(e).sub(t).normalize(),c.copy(n).sub(t).normalize();let o=Math.PI;const a=A.dot(c);Math.abs(a)<1&&(o=Math.abs(Math.acos(a))),o/=i,l.copy(e);for(let h=0,A=i-1;h<A;h++)u.copy(l).rotateAround(t,o),z(l,s,r),z(u,s,r),z(t,s,.5),l.copy(u);z(u,s,r),z(n,s,r),z(t,s,.5)}function J(){z(m,O,1),z(g,O,0),z(B,F,0),z(m,O,1),z(B,F,0),z(E,F,1)}function j(t,e,i){e?t?(z(m,O,1),z(g,O,0),z(B,F,0),z(m,O,1),z(B,F,0),z(_,F,1),z(B,i,0),z(y,i,0),z(_,i,.5)):(z(m,O,1),z(g,O,0),z(E,F,1),z(g,O,0),z(_,F,0),z(E,F,1),z(E,i,1),z(_,i,0),z(I,i,1)):t?(z(B,i,0),z(y,i,0),z(S,i,.5)):(z(E,i,1),z(I,i,0),z(S,i,.5))}function Y(t,e){e&&(t?(z(m,O,1),z(g,O,0),z(B,F,0),z(m,O,1),z(B,F,0),z(_,F,1),z(B,O,0),z(S,F,.5),z(_,F,1),z(S,F,.5),z(y,O,0),z(_,F,1)):(z(m,O,1),z(g,O,0),z(E,F,1),z(g,O,0),z(_,F,0),z(E,F,1),z(E,O,1),z(_,F,0),z(S,F,.5),z(S,F,.5),z(_,F,0),z(I,O,1)))}function K(t,i,n,s,o,h){switch(e.strokeLineCap){case"round":o?V(t,n,i,h,.5):V(t,i,n,h,.5);break;case"square":if(o)A.subVectors(i,t),c.set(A.y,-A.x),l.addVectors(A,c).add(t),u.subVectors(c,A).add(t),s?(l.toArray(r,3),u.toArray(r,0),u.toArray(r,9)):(l.toArray(r,3),1===a[7]?u.toArray(r,9):l.toArray(r,9),u.toArray(r,0));else{A.subVectors(n,t),c.set(A.y,-A.x),l.addVectors(A,c).add(t),u.subVectors(c,A).add(t);const e=r.length;s?(l.toArray(r,e-3),u.toArray(r,e-6),u.toArray(r,e-12)):(u.toArray(r,e-6),l.toArray(r,e-3),u.toArray(r,e-12))}}}}}return t})()},NNJQ:(t,e,i)=>{"use strict";i.d(e,{X:()=>o});var n=i("iilC"),s=i("WYqX"),r=i("7Le1");class o extends n.b{constructor(t=new s.v,e=new r.G({color:16777215*Math.random()})){super(t,e),this.isLine2=!0,this.type="Line2"}}},Qwas:(t,e,i)=>{"use strict";i.d(e,{v:()=>a});var n=i("q1tI");const s=t=>{let e;const i=new Set,n=(t,n)=>{const s="function"===typeof t?t(e):t;if(!Object.is(s,e)){const t=e;e=(null!=n?n:"object"!==typeof s||null===s)?s:Object.assign({},e,s),i.forEach((i=>i(e,t)))}},s=()=>e,r={setState:n,getState:s,getInitialState:()=>o,subscribe:t=>(i.add(t),()=>i.delete(t))},o=e=t(n,s,r);return r},r=t=>t,o=t=>{const e=(t=>t?s(t):s)(t),i=t=>function(t,e=r){const i=n.useSyncExternalStore(t.subscribe,(()=>e(t.getState())),(()=>e(t.getInitialState())));return n.useDebugValue(i),i}(e,t);return Object.assign(i,e),i},a=t=>t?o(t):o},RugN:(t,e,i)=>{"use strict";i.d(e,{B:()=>A});var n=i("jBc9"),s=i("xIrr"),r=i("Ua9r");function o(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,s=t.length;n<s;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(i){return e}}const a="srgb",h="srgb-linear";class A extends n.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new f(t)})),this.register((function(t){return new g(t)})),this.register((function(t){return new w(t)})),this.register((function(t){return new b(t)})),this.register((function(t){return new x(t)})),this.register((function(t){return new C(t)})),this.register((function(t){return new v(t)})),this.register((function(t){return new B(t)})),this.register((function(t){return new E(t)})),this.register((function(t){return new p(t)})),this.register((function(t){return new y(t)})),this.register((function(t){return new m(t)})),this.register((function(t){return new _(t)})),this.register((function(t){return new I(t)})),this.register((function(t){return new u(t)})),this.register((function(t){return new S(t)})),this.register((function(t){return new M(t)}))}load(t,e,i,s){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const e=n.LoaderUtils.extractUrlBase(t);o=n.LoaderUtils.resolveURL(e,this.path)}else o=n.LoaderUtils.extractUrlBase(t);this.manager.itemStart(t);const a=function(e){s&&s(e),r.manager.itemError(t),r.manager.itemEnd(t)},h=new n.FileLoader(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,(function(i){try{r.parse(i,o,(function(i){e(i),r.manager.itemEnd(t)}),a)}catch(n){a(n)}}),i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,n){let s;const r={},a={};if("string"===typeof t)s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(o(new Uint8Array(t.slice(0,4)))===Q){try{r[l.KHR_BINARY_GLTF]=new D(t)}catch(A){return void(n&&n(A))}s=JSON.parse(r[l.KHR_BINARY_GLTF].content)}else s=JSON.parse(o(new Uint8Array(t)));else s=t;if(void 0===s.asset||s.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new $(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let o=0;o<this.pluginCallbacks.length;o++){const t=this.pluginCallbacks[o](h);t.name,a[t.name]=t,r[t.name]=!0}if(s.extensionsUsed)for(let o=0;o<s.extensionsUsed.length;++o){const t=s.extensionsUsed[o],e=s.extensionsRequired||[];switch(t){case l.KHR_MATERIALS_UNLIT:r[t]=new d;break;case l.KHR_DRACO_MESH_COMPRESSION:r[t]=new T(s,this.dracoLoader);break;case l.KHR_TEXTURE_TRANSFORM:r[t]=new F;break;case l.KHR_MESH_QUANTIZATION:r[t]=new R;break;default:e.indexOf(t)>=0&&a[t]}}h.setExtensions(r),h.setPlugins(a),h.parse(i,n)}parseAsync(t,e){const i=this;return new Promise((function(n,s){i.parse(t,e,n,s)}))}}function c(){let t={};return{get:function(e){return t[e]},add:function(e,i){t[e]=i},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const l={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class u{constructor(t){this.parser=t,this.name=l.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let i=0,n=e.length;i<n;i++){const n=e[i];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&t._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let s=e.cache.get(i);if(s)return s;const r=e.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let a;const A=new n.Color(16777215);void 0!==o.color&&A.setRGB(o.color[0],o.color[1],o.color[2],h);const c=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new n.DirectionalLight(A),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new n.PointLight(A),a.distance=c;break;case"spot":a=new n.SpotLight(A),a.distance=c,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,Y(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=e.createUniqueName(o.name||"light_"+t),s=Promise.resolve(a),e.cache.add(i,s),s}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,i=this.parser,n=i.json.nodes[t],s=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===s?null:this._loadLight(s).then((function(t){return i._getNodeRef(e.cache,s,t)}))}}class d{constructor(){this.name=l.KHR_MATERIALS_UNLIT}getMaterialType(){return n.MeshBasicMaterial}extendParams(t,e,i){const s=[];t.color=new n.Color(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.setRGB(e[0],e[1],e[2],h),t.opacity=e[3]}void 0!==r.baseColorTexture&&s.push(i.assignTexture(t,"map",r.baseColorTexture,a))}return Promise.all(s)}}class p{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return void 0!==n&&(e.emissiveIntensity=n),Promise.resolve()}}class f{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(i.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(i.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(i.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const t=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new n.Vector2(t,t)}return Promise.all(r)}}class g{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_DISPERSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return e.dispersion=void 0!==n.dispersion?n.dispersion:0,Promise.resolve()}}class m{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];return void 0!==r.iridescenceFactor&&(e.iridescence=r.iridescenceFactor),void 0!==r.iridescenceTexture&&s.push(i.assignTexture(e,"iridescenceMap",r.iridescenceTexture)),void 0!==r.iridescenceIor&&(e.iridescenceIOR=r.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==r.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),void 0!==r.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),void 0!==r.iridescenceThicknessTexture&&s.push(i.assignTexture(e,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(s)}}class C{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new n.Color(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=s.extensions[this.name];if(void 0!==o.sheenColorFactor){const t=o.sheenColorFactor;e.sheenColor.setRGB(t[0],t[1],t[2],h)}return void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(i.assignTexture(e,"sheenColorMap",o.sheenColorTexture,a)),void 0!==o.sheenRoughnessTexture&&r.push(i.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class v{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];return void 0!==r.transmissionFactor&&(e.transmission=r.transmissionFactor),void 0!==r.transmissionTexture&&s.push(i.assignTexture(e,"transmissionMap",r.transmissionTexture)),Promise.all(s)}}class B{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(i.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=(new n.Color).setRGB(a[0],a[1],a[2],h),Promise.all(r)}}class E{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return e.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class y{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(i.assignTexture(e,"specularIntensityMap",o.specularTexture));const A=o.specularColorFactor||[1,1,1];return e.specularColor=(new n.Color).setRGB(A[0],A[1],A[2],h),void 0!==o.specularColorTexture&&r.push(i.assignTexture(e,"specularColorMap",o.specularColorTexture,a)),Promise.all(r)}}class I{constructor(t){this.parser=t,this.name=l.EXT_MATERIALS_BUMP}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];return e.bumpScale=void 0!==r.bumpFactor?r.bumpFactor:1,void 0!==r.bumpTexture&&s.push(i.assignTexture(e,"bumpMap",r.bumpTexture)),Promise.all(s)}}class _{constructor(t){this.parser=t,this.name=l.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];return void 0!==r.anisotropyStrength&&(e.anisotropy=r.anisotropyStrength),void 0!==r.anisotropyRotation&&(e.anisotropyRotation=r.anisotropyRotation),void 0!==r.anisotropyTexture&&s.push(i.assignTexture(e,"anisotropyMap",r.anisotropyTexture)),Promise.all(s)}}class w{constructor(t){this.parser=t,this.name=l.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,n=i.textures[t];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],r=e.options.ktx2Loader;if(!r){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,r)}}class b{constructor(t){this.parser=t,this.name=l.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,n=i.json,s=n.textures[t];if(!s.extensions||!s.extensions[e])return null;const r=s.extensions[e],o=n.images[r.source];let a=i.textureLoader;if(o.uri){const t=i.options.manager.getHandler(o.uri);null!==t&&(a=t)}return this.detectSupport().then((function(s){if(s)return i.loadTextureImage(t,r.source,a);if(n.extensionsRequired&&n.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class x{constructor(t){this.parser=t,this.name=l.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,n=i.json,s=n.textures[t];if(!s.extensions||!s.extensions[e])return null;const r=s.extensions[e],o=n.images[r.source];let a=i.textureLoader;if(o.uri){const t=i.options.manager.getHandler(o.uri);null!==t&&(a=t)}return this.detectSupport().then((function(s){if(s)return i.loadTextureImage(t,r.source,a);if(n.extensionsRequired&&n.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class S{constructor(t){this.name=l.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const t=i.extensions[this.name],n=this.parser.getDependency("buffer",t.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then((function(e){const i=t.byteOffset||0,n=t.byteLength||0,r=t.count,o=t.byteStride,a=new Uint8Array(e,i,n);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(r,o,a,t.mode,t.filter).then((function(t){return t.buffer})):s.ready.then((function(){const e=new ArrayBuffer(r*o);return s.decodeGltfBuffer(new Uint8Array(e),r,o,a,t.mode,t.filter),e}))}))}return null}}class M{constructor(t){this.name=l.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const s=e.meshes[i.mesh];for(const n of s.primitives)if(n.mode!==G.TRIANGLES&&n.mode!==G.TRIANGLE_STRIP&&n.mode!==G.TRIANGLE_FAN&&void 0!==n.mode)return null;const r=i.extensions[this.name].attributes,o=[],a={};for(const n in r)o.push(this.parser.getDependency("accessor",r[n]).then((t=>(a[n]=t,a[n]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(t)),Promise.all(o).then((t=>{const e=t.pop(),i=e.isGroup?e.children:[e],s=t[0].count,r=[];for(const o of i){const t=new n.Matrix4,e=new n.Vector3,i=new n.Quaternion,h=new n.Vector3(1,1,1),A=new n.InstancedMesh(o.geometry,o.material,s);for(let n=0;n<s;n++)a.TRANSLATION&&e.fromBufferAttribute(a.TRANSLATION,n),a.ROTATION&&i.fromBufferAttribute(a.ROTATION,n),a.SCALE&&h.fromBufferAttribute(a.SCALE,n),A.setMatrixAt(n,t.compose(e,i,h));for(const s in a)if("_COLOR_0"===s){const t=a[s];A.instanceColor=new n.InstancedBufferAttribute(t.array,t.itemSize,t.normalized)}else"TRANSLATION"!==s&&"ROTATION"!==s&&"SCALE"!==s&&o.geometry.setAttribute(s,a[s]);n.Object3D.prototype.copy.call(A,o),this.parser.assignFinalMaterial(A),r.push(A)}return e.isGroup?(e.clear(),e.add(...r),e):r[0]})))}}const Q="glTF";class D{constructor(t){this.name=l.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:o(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Q)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,n=new DataView(t,12);let s=0;for(;s<i;){const e=n.getUint32(s,!0);s+=4;const i=n.getUint32(s,!0);if(s+=4,1313821514===i){const i=new Uint8Array(t,12+s,e);this.content=o(i)}else if(5130562===i){const i=12+s;this.body=t.slice(i,i+e)}s+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class T{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=l.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,n=this.dracoLoader,s=t.extensions[this.name].bufferView,r=t.extensions[this.name].attributes,o={},a={},A={};for(const h in r){const t=z[h]||h.toLowerCase();o[t]=r[h]}for(const h in t.attributes){const e=z[h]||h.toLowerCase();if(void 0!==r[h]){const n=i.accessors[t.attributes[h]],s=k[n.componentType];A[e]=s.name,a[e]=!0===n.normalized}}return e.getDependency("bufferView",s).then((function(t){return new Promise((function(e,i){n.decodeDracoFile(t,(function(t){for(const e in t.attributes){const i=t.attributes[e],n=a[e];void 0!==n&&(i.normalized=n)}e(t)}),o,A,h,i)}))}))}}class F{constructor(){this.name=l.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&e.texCoord!==t.channel||void 0!==e.offset||void 0!==e.rotation||void 0!==e.scale?(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0,t):t}}class R{constructor(){this.name=l.KHR_MESH_QUANTIZATION}}class P extends n.Interpolant{constructor(t,e,i,n){super(t,e,i,n)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=t*n*3+n;for(let r=0;r!==n;r++)e[r]=i[s+r];return e}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=2*o,h=3*o,A=n-e,c=(i-e)/A,l=c*c,u=l*c,d=t*h,p=d-h,f=-2*u+3*l,g=u-l,m=1-f,C=g-l+c;for(let v=0;v!==o;v++){const t=r[p+v+o],e=r[p+v+a]*A,i=r[d+v+o],n=r[d+v]*A;s[v]=m*t+C*e+f*i+g*n}return s}}const U=new n.Quaternion;class O extends P{interpolate_(t,e,i,n){const s=super.interpolate_(t,e,i,n);return U.fromArray(s).normalize().toArray(s),s}}const G={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},k={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},L={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},N={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},H={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},z={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...r.r>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},V={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},J={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete};function j(t,e,i){for(const n in i.extensions)void 0===t[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=i.extensions[n])}function Y(t,e){void 0!==e.extras&&"object"===typeof e.extras&&Object.assign(t.userData,e.extras)}function K(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let i=0,n=e.weights.length;i<n;i++)t.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){const i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length){t.morphTargetDictionary={};for(let e=0,n=i.length;e<n;e++)t.morphTargetDictionary[i[e]]=e}}}function q(t){let e;const i=t.extensions&&t.extensions[l.KHR_DRACO_MESH_COMPRESSION];if(e=i?"draco:"+i.bufferView+":"+i.indices+":"+X(i.attributes):t.indices+":"+X(t.attributes)+":"+t.mode,void 0!==t.targets)for(let n=0,s=t.targets.length;n<s;n++)e+=":"+X(t.targets[n]);return e}function X(t){let e="";const i=Object.keys(t).sort();for(let n=0,s=i.length;n<s;n++)e+=i[n]+":"+t[i[n]]+";";return e}function W(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Z=new n.Matrix4;class ${constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new c,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||i||s&&r<98?this.textureLoader=new n.TextureLoader(this.options.manager):this.textureLoader=new n.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const i=this,n=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])})).then((function(e){const r={scene:e[0][n.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:n.asset,parser:i,userData:{}};return j(s,r,n),Y(r,n),Promise.all(i._invokeAll((function(t){return t.afterRoot&&t.afterRoot(r)}))).then((function(){for(const t of r.scenes)t.updateMatrixWorld();t(r)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let n=0,s=e.length;n<s;n++){const i=e[n].joints;for(let e=0,n=i.length;e<n;e++)t[i[e]].isBone=!0}for(let n=0,s=t.length;n<s;n++){const e=t[n];void 0!==e.mesh&&(this._addNodeRef(this.meshCache,e.mesh),void 0!==e.skin&&(i[e.mesh].isSkinnedMesh=!0)),void 0!==e.camera&&this._addNodeRef(this.cameraCache,e.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const n=i.clone(),s=(t,e)=>{const i=this.associations.get(t);null!=i&&this.associations.set(e,i);for(const[n,r]of t.children.entries())s(r,e.children[n])};return s(i,n),n.name+="_instance_"+t.uses[e]++,n}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const n=t(e[i]);if(n)return n}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const i=[];for(let n=0;n<e.length;n++){const s=t(e[n]);s&&i.push(s)}return i}getDependency(t,e){const i=t+":"+e;let n=this.cache.get(i);if(!n){switch(t){case"scene":n=this.loadScene(e);break;case"node":n=this._invokeOne((function(t){return t.loadNode&&t.loadNode(e)}));break;case"mesh":n=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":n=this.loadAccessor(e);break;case"bufferView":n=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":n=this.loadBuffer(e);break;case"material":n=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":n=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":n=this.loadSkin(e);break;case"animation":n=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":n=this.loadCamera(e);break;default:if(n=this._invokeOne((function(i){return i!=this&&i.getDependency&&i.getDependency(t,e)})),!n)throw new Error("Unknown type: "+t)}this.cache.add(i,n)}return n}getDependencies(t){let e=this.cache.get(t);if(!e){const i=this,n=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(n.map((function(e,n){return i.getDependency(t,n)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],i=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[l.KHR_BINARY_GLTF].body);const s=this.options;return new Promise((function(t,r){i.load(n.LoaderUtils.resolveURL(e.uri,s.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const i=e.byteLength||0,n=e.byteOffset||0;return t.slice(n,n+i)}))}loadAccessor(t){const e=this,i=this.json,s=this.json.accessors[t];if(void 0===s.bufferView&&void 0===s.sparse){const t=H[s.type],e=k[s.componentType],i=!0===s.normalized,r=new e(s.count*t);return Promise.resolve(new n.BufferAttribute(r,t,i))}const r=[];return void 0!==s.bufferView?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],o=H[s.type],a=k[s.componentType],h=a.BYTES_PER_ELEMENT,A=h*o,c=s.byteOffset||0,l=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,u=!0===s.normalized;let d,p;if(l&&l!==A){const t=Math.floor(c/l),i="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+t+":"+s.count;let A=e.cache.get(i);A||(d=new a(r,t*l,s.count*l/h),A=new n.InterleavedBuffer(d,l/h),e.cache.add(i,A)),p=new n.InterleavedBufferAttribute(A,o,c%l/h,u)}else d=null===r?new a(s.count*o):new a(r,c,s.count*o),p=new n.BufferAttribute(d,o,u);if(void 0!==s.sparse){const e=H.SCALAR,i=k[s.sparse.indices.componentType],h=s.sparse.indices.byteOffset||0,A=s.sparse.values.byteOffset||0,c=new i(t[1],h,s.sparse.count*e),l=new a(t[2],A,s.sparse.count*o);null!==r&&(p=new n.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let t=0,n=c.length;t<n;t++){const e=c[t];if(p.setX(e,l[t*o]),o>=2&&p.setY(e,l[t*o+1]),o>=3&&p.setZ(e,l[t*o+2]),o>=4&&p.setW(e,l[t*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(t){const e=this.json,i=this.options,n=e.textures[t].source,s=e.images[n];let r=this.textureLoader;if(s.uri){const t=i.manager.getHandler(s.uri);null!==t&&(r=t)}return this.loadTextureImage(t,n,r)}loadTextureImage(t,e,i){const s=this,r=this.json,o=r.textures[t],a=r.images[e],h=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[h])return this.textureCache[h];const A=this.loadImageSource(e,i).then((function(e){e.flipY=!1,e.name=o.name||a.name||"",""===e.name&&"string"===typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(e.name=a.uri);const i=(r.samplers||{})[o.sampler]||{};return e.magFilter=L[i.magFilter]||n.LinearFilter,e.minFilter=L[i.minFilter]||n.LinearMipmapLinearFilter,e.wrapS=N[i.wrapS]||n.RepeatWrapping,e.wrapT=N[i.wrapT]||n.RepeatWrapping,s.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[h]=A,A}loadImageSource(t,e){const i=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const r=i.images[t],o=self.URL||self.webkitURL;let a=r.uri||"",h=!1;if(void 0!==r.bufferView)a=this.getDependency("bufferView",r.bufferView).then((function(t){h=!0;const e=new Blob([t],{type:r.mimeType});return a=o.createObjectURL(e),a}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const A=Promise.resolve(a).then((function(t){return new Promise((function(i,r){let o=i;!0===e.isImageBitmapLoader&&(o=function(t){const e=new n.Texture(t);e.needsUpdate=!0,i(e)}),e.load(n.LoaderUtils.resolveURL(t,s.path),o,void 0,r)}))})).then((function(t){var e;return!0===h&&o.revokeObjectURL(a),Y(t,r),t.userData.mimeType=r.mimeType||((e=r.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t})).catch((function(t){throw t}));return this.sourceCache[t]=A,A}assignTexture(t,e,i,n){const s=this;return this.getDependency("texture",i.index).then((function(r){if(!r)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((r=r.clone()).channel=i.texCoord),s.extensions[l.KHR_TEXTURE_TRANSFORM]){const t=void 0!==i.extensions?i.extensions[l.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=s.associations.get(r);r=s.extensions[l.KHR_TEXTURE_TRANSFORM].extendTexture(r,t),s.associations.set(r,e)}}return void 0!==n&&("number"===typeof n&&(n=3001===n?a:h),"colorSpace"in r?r.colorSpace=n:r.encoding=n===a?3001:3e3),t[e]=r,r}))}assignFinalMaterial(t){const e=t.geometry;let i=t.material;const s=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+i.uuid;let e=this.cache.get(t);e||(e=new n.PointsMaterial,n.Material.prototype.copy.call(e,i),e.color.copy(i.color),e.map=i.map,e.sizeAttenuation=!1,this.cache.add(t,e)),i=e}else if(t.isLine){const t="LineBasicMaterial:"+i.uuid;let e=this.cache.get(t);e||(e=new n.LineBasicMaterial,n.Material.prototype.copy.call(e,i),e.color.copy(i.color),e.map=i.map,this.cache.add(t,e)),i=e}if(s||r||o){let t="ClonedMaterial:"+i.uuid+":";s&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),o&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=i.clone(),r&&(e.vertexColors=!0),o&&(e.flatShading=!0),s&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(i))),i=e}t.material=i}getMaterialType(){return n.MeshStandardMaterial}loadMaterial(t){const e=this,i=this.json,s=this.extensions,r=i.materials[t];let o;const A={},c=[];if((r.extensions||{})[l.KHR_MATERIALS_UNLIT]){const t=s[l.KHR_MATERIALS_UNLIT];o=t.getMaterialType(),c.push(t.extendParams(A,r,e))}else{const i=r.pbrMetallicRoughness||{};if(A.color=new n.Color(1,1,1),A.opacity=1,Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;A.color.setRGB(t[0],t[1],t[2],h),A.opacity=t[3]}void 0!==i.baseColorTexture&&c.push(e.assignTexture(A,"map",i.baseColorTexture,a)),A.metalness=void 0!==i.metallicFactor?i.metallicFactor:1,A.roughness=void 0!==i.roughnessFactor?i.roughnessFactor:1,void 0!==i.metallicRoughnessTexture&&(c.push(e.assignTexture(A,"metalnessMap",i.metallicRoughnessTexture)),c.push(e.assignTexture(A,"roughnessMap",i.metallicRoughnessTexture))),o=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),c.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,A)}))))}!0===r.doubleSided&&(A.side=n.DoubleSide);const u=r.alphaMode||"OPAQUE";if("BLEND"===u?(A.transparent=!0,A.depthWrite=!1):(A.transparent=!1,"MASK"===u&&(A.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==n.MeshBasicMaterial&&(c.push(e.assignTexture(A,"normalMap",r.normalTexture)),A.normalScale=new n.Vector2(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;A.normalScale.set(t,t)}if(void 0!==r.occlusionTexture&&o!==n.MeshBasicMaterial&&(c.push(e.assignTexture(A,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(A.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==n.MeshBasicMaterial){const t=r.emissiveFactor;A.emissive=(new n.Color).setRGB(t[0],t[1],t[2],h)}return void 0!==r.emissiveTexture&&o!==n.MeshBasicMaterial&&c.push(e.assignTexture(A,"emissiveMap",r.emissiveTexture,a)),Promise.all(c).then((function(){const i=new o(A);return r.name&&(i.name=r.name),Y(i,r),e.associations.set(i,{materials:t}),r.extensions&&j(s,i,r),i}))}createUniqueName(t){const e=n.PropertyBinding.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,i=this.extensions,s=this.primitiveCache;function r(t){return i[l.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(i){return tt(i,t,e)}))}const o=[];for(let a=0,h=t.length;a<h;a++){const i=t[a],h=q(i),A=s[h];if(A)o.push(A.promise);else{let t;t=i.extensions&&i.extensions[l.KHR_DRACO_MESH_COMPRESSION]?r(i):tt(new n.BufferGeometry,i,e),s[h]={primitive:i,promise:t},o.push(t)}}return Promise.all(o)}loadMesh(t){const e=this,i=this.json,r=this.extensions,o=i.meshes[t],a=o.primitives,h=[];for(let s=0,c=a.length;s<c;s++){const t=void 0===a[s].material?(void 0===(A=this.cache).DefaultMaterial&&(A.DefaultMaterial=new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide})),A.DefaultMaterial):this.getDependency("material",a[s].material);h.push(t)}var A;return h.push(e.loadGeometries(a)),Promise.all(h).then((function(i){const h=i.slice(0,i.length-1),A=i[i.length-1],c=[];for(let u=0,d=A.length;u<d;u++){const i=A[u],l=a[u];let d;const p=h[u];if(l.mode===G.TRIANGLES||l.mode===G.TRIANGLE_STRIP||l.mode===G.TRIANGLE_FAN||void 0===l.mode)d=!0===o.isSkinnedMesh?new n.SkinnedMesh(i,p):new n.Mesh(i,p),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),l.mode===G.TRIANGLE_STRIP?d.geometry=(0,s._c)(d.geometry,n.TriangleStripDrawMode):l.mode===G.TRIANGLE_FAN&&(d.geometry=(0,s._c)(d.geometry,n.TriangleFanDrawMode));else if(l.mode===G.LINES)d=new n.LineSegments(i,p);else if(l.mode===G.LINE_STRIP)d=new n.Line(i,p);else if(l.mode===G.LINE_LOOP)d=new n.LineLoop(i,p);else{if(l.mode!==G.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+l.mode);d=new n.Points(i,p)}Object.keys(d.geometry.morphAttributes).length>0&&K(d,o),d.name=e.createUniqueName(o.name||"mesh_"+t),Y(d,o),l.extensions&&j(r,d,l),e.assignFinalMaterial(d),c.push(d)}for(let n=0,s=c.length;n<s;n++)e.associations.set(c[n],{meshes:t,primitives:n});if(1===c.length)return o.extensions&&j(r,c[0],o),c[0];const l=new n.Group;o.extensions&&j(r,l,o),e.associations.set(l,{meshes:t});for(let t=0,e=c.length;t<e;t++)l.add(c[t]);return l}))}loadCamera(t){let e;const i=this.json.cameras[t],s=i[i.type];if(s)return"perspective"===i.type?e=new n.PerspectiveCamera(n.MathUtils.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(e=new n.OrthographicCamera(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Y(e,i),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],i=[];for(let n=0,s=e.joints.length;n<s;n++)i.push(this._loadNodeShallow(e.joints[n]));return void 0!==e.inverseBindMatrices?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then((function(t){const e=t.pop(),i=t,s=[],r=[];for(let o=0,a=i.length;o<a;o++){const t=i[o];if(t){s.push(t);const i=new n.Matrix4;null!==e&&i.fromArray(e.array,16*o),r.push(i)}}return new n.Skeleton(s,r)}))}loadAnimation(t){const e=this.json,i=this,s=e.animations[t],r=s.name?s.name:"animation_"+t,o=[],a=[],h=[],A=[],c=[];for(let n=0,l=s.channels.length;n<l;n++){const t=s.channels[n],e=s.samplers[t.sampler],i=t.target,r=i.node,l=void 0!==s.parameters?s.parameters[e.input]:e.input,u=void 0!==s.parameters?s.parameters[e.output]:e.output;void 0!==i.node&&(o.push(this.getDependency("node",r)),a.push(this.getDependency("accessor",l)),h.push(this.getDependency("accessor",u)),A.push(e),c.push(i))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(h),Promise.all(A),Promise.all(c)]).then((function(t){const e=t[0],s=t[1],o=t[2],a=t[3],h=t[4],A=[];for(let n=0,r=e.length;n<r;n++){const t=e[n],r=s[n],c=o[n],l=a[n],u=h[n];if(void 0===t)continue;t.updateMatrix&&t.updateMatrix();const d=i._createAnimationTracks(t,r,c,l,u);if(d)for(let e=0;e<d.length;e++)A.push(d[e])}return new n.AnimationClip(r,void 0,A)}))}createNodeMesh(t){const e=this.json,i=this,n=e.nodes[t];return void 0===n.mesh?null:i.getDependency("mesh",n.mesh).then((function(t){const e=i._getNodeRef(i.meshCache,n.mesh,t);return void 0!==n.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,i=n.weights.length;e<i;e++)t.morphTargetInfluences[e]=n.weights[e]})),e}))}loadNode(t){const e=this,i=this.json.nodes[t],n=e._loadNodeShallow(t),s=[],r=i.children||[];for(let a=0,h=r.length;a<h;a++)s.push(e.getDependency("node",r[a]));const o=void 0===i.skin?Promise.resolve(null):e.getDependency("skin",i.skin);return Promise.all([n,Promise.all(s),o]).then((function(t){const e=t[0],i=t[1],n=t[2];null!==n&&e.traverse((function(t){t.isSkinnedMesh&&t.bind(n,Z)}));for(let s=0,r=i.length;s<r;s++)e.add(i[s]);return e}))}_loadNodeShallow(t){const e=this.json,i=this.extensions,s=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const r=e.nodes[t],o=r.name?s.createUniqueName(r.name):"",a=[],h=s._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return h&&a.push(h),void 0!==r.camera&&a.push(s.getDependency("camera",r.camera).then((function(t){return s._getNodeRef(s.cameraCache,r.camera,t)}))),s._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){a.push(t)})),this.nodeCache[t]=Promise.all(a).then((function(e){let a;if(a=!0===r.isBone?new n.Bone:e.length>1?new n.Group:1===e.length?e[0]:new n.Object3D,a!==e[0])for(let t=0,i=e.length;t<i;t++)a.add(e[t]);if(r.name&&(a.userData.name=r.name,a.name=o),Y(a,r),r.extensions&&j(i,a,r),void 0!==r.matrix){const t=new n.Matrix4;t.fromArray(r.matrix),a.applyMatrix4(t)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=t,a})),this.nodeCache[t]}loadScene(t){const e=this.extensions,i=this.json.scenes[t],s=this,r=new n.Group;i.name&&(r.name=s.createUniqueName(i.name)),Y(r,i),i.extensions&&j(e,r,i);const o=i.nodes||[],a=[];for(let n=0,h=o.length;n<h;n++)a.push(s.getDependency("node",o[n]));return Promise.all(a).then((function(t){for(let e=0,i=t.length;e<i;e++)r.add(t[e]);return s.associations=(t=>{const e=new Map;for(const[i,r]of s.associations)(i instanceof n.Material||i instanceof n.Texture)&&e.set(i,r);return t.traverse((t=>{const i=s.associations.get(t);null!=i&&e.set(t,i)})),e})(r),r}))}_createAnimationTracks(t,e,i,s,r){const o=[],a=t.name?t.name:t.uuid,h=[];let A;switch(V[r.path]===V.weights?t.traverse((function(t){t.morphTargetInfluences&&h.push(t.name?t.name:t.uuid)})):h.push(a),V[r.path]){case V.weights:A=n.NumberKeyframeTrack;break;case V.rotation:A=n.QuaternionKeyframeTrack;break;case V.position:case V.scale:A=n.VectorKeyframeTrack;break;default:A=1===i.itemSize?n.NumberKeyframeTrack:n.VectorKeyframeTrack}const c=void 0!==s.interpolation?J[s.interpolation]:n.InterpolateLinear,l=this._getArrayFromAccessor(i);for(let n=0,u=h.length;n<u;n++){const t=new A(h[n]+"."+V[r.path],e.array,l,c);"CUBICSPLINE"===s.interpolation&&this._createCubicSplineTrackInterpolant(t),o.push(t)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const t=W(e.constructor),i=new Float32Array(e.length);for(let n=0,s=e.length;n<s;n++)i[n]=e[n]*t;e=i}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(t){return new(this instanceof n.QuaternionKeyframeTrack?O:P)(this.times,this.values,this.getValueSize()/3,t)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function tt(t,e,i){const s=e.attributes,r=[];function o(e,n){return i.getDependency("accessor",e).then((function(e){t.setAttribute(n,e)}))}for(const n in s){const e=z[n]||n.toLowerCase();e in t.attributes||r.push(o(s[n],e))}if(void 0!==e.indices&&!t.index){const n=i.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(n)}return Y(t,e),function(t,e,i){const s=e.attributes,r=new n.Box3;if(void 0===s.POSITION)return;{const t=i.json.accessors[s.POSITION],e=t.min,o=t.max;if(void 0===e||void 0===o)return;if(r.set(new n.Vector3(e[0],e[1],e[2]),new n.Vector3(o[0],o[1],o[2])),t.normalized){const e=W(k[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const o=e.targets;if(void 0!==o){const t=new n.Vector3,e=new n.Vector3;for(let n=0,s=o.length;n<s;n++){const s=o[n];if(void 0!==s.POSITION){const n=i.json.accessors[s.POSITION],r=n.min,o=n.max;if(void 0!==r&&void 0!==o){if(e.setX(Math.max(Math.abs(r[0]),Math.abs(o[0]))),e.setY(Math.max(Math.abs(r[1]),Math.abs(o[1]))),e.setZ(Math.max(Math.abs(r[2]),Math.abs(o[2]))),n.normalized){const t=W(k[n.componentType]);e.multiplyScalar(t)}t.max(e)}}}r.expandByVector(t)}t.boundingBox=r;const a=new n.Sphere;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=a}(t,e,i),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,i){let n=!1,s=!1,r=!1;for(let A=0,c=e.length;A<c;A++){const t=e[A];if(void 0!==t.POSITION&&(n=!0),void 0!==t.NORMAL&&(s=!0),void 0!==t.COLOR_0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(t);const o=[],a=[],h=[];for(let A=0,c=e.length;A<c;A++){const c=e[A];if(n){const e=void 0!==c.POSITION?i.getDependency("accessor",c.POSITION):t.attributes.position;o.push(e)}if(s){const e=void 0!==c.NORMAL?i.getDependency("accessor",c.NORMAL):t.attributes.normal;a.push(e)}if(r){const e=void 0!==c.COLOR_0?i.getDependency("accessor",c.COLOR_0):t.attributes.color;h.push(e)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(h)]).then((function(e){const i=e[0],o=e[1],a=e[2];return n&&(t.morphAttributes.position=i),s&&(t.morphAttributes.normal=o),r&&(t.morphAttributes.color=a),t.morphTargetsRelative=!0,t}))}(t,e.targets,i):t}))}},S05N:(t,e,i)=>{"use strict";i.d(e,{x:()=>a});const n=t=>Symbol.iterator in t,s=t=>"entries"in t,r=(t,e)=>{const i=t instanceof Map?t:new Map(t.entries()),n=e instanceof Map?e:new Map(e.entries());if(i.size!==n.size)return!1;for(const[s,r]of i)if(!Object.is(r,n.get(s)))return!1;return!0},o=(t,e)=>{const i=t[Symbol.iterator](),n=e[Symbol.iterator]();let s=i.next(),r=n.next();for(;!s.done&&!r.done;){if(!Object.is(s.value,r.value))return!1;s=i.next(),r=n.next()}return!!s.done&&!!r.done};function a(t,e){return!!Object.is(t,e)||"object"===typeof t&&null!==t&&"object"===typeof e&&null!==e&&(n(t)&&n(e)?s(t)&&s(e)?r(t,e):o(t,e):r({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)}))}},SKFb:(t,e,i)=>{"use strict";i.d(e,{n:()=>a});var n=i("jBc9"),s=i("XM0D"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class a extends s.Q{constructor(t){super(),o(this,"object"),o(this,"changeEvent",{type:"change"}),o(this,"EPS",1e-6),o(this,"enabled",!0),o(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),o(this,"screenOrientation",0),o(this,"alphaOffset",0),o(this,"onDeviceOrientationChangeEvent",(t=>{this.deviceOrientation=t})),o(this,"onScreenOrientationChangeEvent",(()=>{this.screenOrientation=window.orientation||0})),o(this,"zee",new n.Vector3(0,0,1)),o(this,"euler",new n.Euler),o(this,"q0",new n.Quaternion),o(this,"q1",new n.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5))),o(this,"setObjectQuaternion",((t,e,i,n,s)=>{this.euler.set(i,e,-n,"YXZ"),t.setFromEuler(this.euler),t.multiply(this.q1),t.multiply(this.q0.setFromAxisAngle(this.zee,-s))})),o(this,"connect",(()=>{this.onScreenOrientationChangeEvent(),void 0!==window.DeviceOrientationEvent&&"function"===typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((t=>{"granted"==t&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))})).catch((t=>{})):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0})),o(this,"disconnect",(()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1})),o(this,"lastQuaternion",new n.Quaternion),o(this,"update",(()=>{if(!1===this.enabled)return;const t=this.deviceOrientation;if(t){const e=t.alpha?n.MathUtils.degToRad(t.alpha)+this.alphaOffset:0,i=t.beta?n.MathUtils.degToRad(t.beta):0,s=t.gamma?n.MathUtils.degToRad(t.gamma):0,r=this.screenOrientation?n.MathUtils.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,e,i,s,r),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}})),o(this,"dispose",(()=>this.disconnect())),this.object=t,this.object.rotation.reorder("YXZ"),this.connect()}}},STsu:(t,e,i)=>{"use strict";i.d(e,{A:()=>f});var n=i("q1tI");const s=t=>{let e;const i=new Set,n=(t,n)=>{const s="function"===typeof t?t(e):t;if(!Object.is(s,e)){const t=e;e=(null!=n?n:"object"!==typeof s||null===s)?s:Object.assign({},e,s),i.forEach((i=>i(e,t)))}},s=()=>e,r={setState:n,getState:s,getInitialState:()=>o,subscribe:t=>(i.add(t),()=>i.delete(t)),destroy:()=>{i.clear()}},o=e=t(n,s,r);return r};var r=i("ejks");const{useDebugValue:o}=n,{useSyncExternalStoreWithSelector:a}=r;let h=!1;const A=t=>t,c=t=>{const e="function"===typeof t?(t=>t?s(t):s)(t):t,i=(t,i)=>function(t,e=A,i){i&&!h&&(h=!0);const n=a(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,i);return o(n),n}(e,t,i);return Object.assign(i,e),i},l=t=>t?c(t):c;var u,d;const p="undefined"!==typeof window&&(null!=(u=window.document)&&u.createElement||"ReactNative"===(null==(d=window.navigator)?void 0:d.product))?n.useLayoutEffect:n.useEffect;function f(){const t=l((t=>({current:new Array,version:0,set:t})));return{In:({children:e})=>{const i=t((t=>t.set)),n=t((t=>t.version));return p((()=>{i((t=>({version:t.version+1})))}),[]),p((()=>(i((({current:t})=>({current:[...t,e]}))),()=>i((({current:t})=>({current:t.filter((t=>t!==e))}))))),[e,n]),null},Out:()=>{const e=t((t=>t.current));return n.createElement(n.Fragment,null,e)}}}},UQVQ:(t,e,i)=>{"use strict";i.d(e,{q:()=>p});var n=i("jBc9"),s=i("XM0D"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);const a={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},h={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},A={x:0,y:0},c={camera:new n.Matrix4,gizmos:new n.Matrix4},l={type:"change"},u={type:"start"},d={type:"end"};class p extends s.Q{constructor(t,e=null,i=null){super(),o(this,"camera"),o(this,"domElement"),o(this,"scene"),o(this,"mouseActions"),o(this,"_mouseOp"),o(this,"_v2_1"),o(this,"_v3_1"),o(this,"_v3_2"),o(this,"_m4_1"),o(this,"_m4_2"),o(this,"_quat"),o(this,"_translationMatrix"),o(this,"_rotationMatrix"),o(this,"_scaleMatrix"),o(this,"_rotationAxis"),o(this,"_cameraMatrixState"),o(this,"_cameraProjectionState"),o(this,"_fovState"),o(this,"_upState"),o(this,"_zoomState"),o(this,"_nearPos"),o(this,"_farPos"),o(this,"_gizmoMatrixState"),o(this,"_up0"),o(this,"_zoom0"),o(this,"_fov0"),o(this,"_initialNear"),o(this,"_nearPos0"),o(this,"_initialFar"),o(this,"_farPos0"),o(this,"_cameraMatrixState0"),o(this,"_gizmoMatrixState0"),o(this,"_button"),o(this,"_touchStart"),o(this,"_touchCurrent"),o(this,"_input"),o(this,"_switchSensibility"),o(this,"_startFingerDistance"),o(this,"_currentFingerDistance"),o(this,"_startFingerRotation"),o(this,"_currentFingerRotation"),o(this,"_devPxRatio"),o(this,"_downValid"),o(this,"_nclicks"),o(this,"_downEvents"),o(this,"_clickStart"),o(this,"_maxDownTime"),o(this,"_maxInterval"),o(this,"_posThreshold"),o(this,"_movementThreshold"),o(this,"_currentCursorPosition"),o(this,"_startCursorPosition"),o(this,"_grid"),o(this,"_gridPosition"),o(this,"_gizmos"),o(this,"_curvePts"),o(this,"_timeStart"),o(this,"_animationId"),o(this,"focusAnimationTime"),o(this,"_timePrev"),o(this,"_timeCurrent"),o(this,"_anglePrev"),o(this,"_angleCurrent"),o(this,"_cursorPosPrev"),o(this,"_cursorPosCurr"),o(this,"_wPrev"),o(this,"_wCurr"),o(this,"adjustNearFar"),o(this,"scaleFactor"),o(this,"dampingFactor"),o(this,"wMax"),o(this,"enableAnimations"),o(this,"enableGrid"),o(this,"cursorZoom"),o(this,"minFov"),o(this,"maxFov"),o(this,"enabled"),o(this,"enablePan"),o(this,"enableRotate"),o(this,"enableZoom"),o(this,"minDistance"),o(this,"maxDistance"),o(this,"minZoom"),o(this,"maxZoom"),o(this,"target"),o(this,"_currentTarget"),o(this,"_tbRadius"),o(this,"_state"),o(this,"onWindowResize",(()=>{const t=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const t=this.calculateTbRadius(this.camera);void 0!==t&&(this._tbRadius=t)}const e=this._tbRadius/t,i=new n.EllipseCurve(0,0,e,e).getPoints(this._curvePts),s=(new n.BufferGeometry).setFromPoints(i);for(const n in this._gizmos.children)this._gizmos.children[n].geometry=s;this.dispatchEvent(l)})),o(this,"onContextMenu",(t=>{if(this.enabled)for(let e=0;e<this.mouseActions.length;e++)if(2==this.mouseActions[e].mouse){t.preventDefault();break}})),o(this,"onPointerCancel",(()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=h.NONE})),o(this,"onPointerDown",(t=>{if(0==t.button&&t.isPrimary?(this._downValid=!0,this._downEvents.push(t)):this._downValid=!1,"touch"==t.pointerType&&this._input!=h.CURSOR)switch(this._touchStart.push(t),this._touchCurrent.push(t),this._input){case h.NONE:this._input=h.ONE_FINGER,this.onSinglePanStart(t,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case h.ONE_FINGER:case h.ONE_FINGER_SWITCHED:this._input=h.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case h.TWO_FINGER:this._input=h.MULT_FINGER,this.onTriplePanStart()}else if("touch"!=t.pointerType&&this._input==h.NONE){let e=null;t.ctrlKey||t.metaKey?e="CTRL":t.shiftKey&&(e="SHIFT"),this._mouseOp=this.getOpFromAction(t.button,e),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=h.CURSOR,this._button=t.button,this.onSinglePanStart(t,this._mouseOp))}})),o(this,"onPointerMove",(t=>{if("touch"==t.pointerType&&this._input!=h.CURSOR)switch(this._input){case h.ONE_FINGER:this.updateTouchEvent(t),this.onSinglePanMove(t,a.ROTATE);break;case h.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],t)*this._devPxRatio>=this._switchSensibility){this._input=h.ONE_FINGER,this.updateTouchEvent(t),this.onSinglePanStart(t,"ROTATE");break}break;case h.TWO_FINGER:this.updateTouchEvent(t),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case h.MULT_FINGER:this.updateTouchEvent(t),this.onTriplePanMove()}else if("touch"!=t.pointerType&&this._input==h.CURSOR){let e=null;t.ctrlKey||t.metaKey?e="CTRL":t.shiftKey&&(e="SHIFT");const i=this.getOpStateFromAction(this._button,e);i&&this.onSinglePanMove(t,i)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],t)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)})),o(this,"onPointerUp",(t=>{if("touch"==t.pointerType&&this._input!=h.CURSOR){const e=this._touchCurrent.length;for(let i=0;i<e;i++)if(this._touchCurrent[i].pointerId==t.pointerId){this._touchCurrent.splice(i,1),this._touchStart.splice(i,1);break}switch(this._input){case h.ONE_FINGER:case h.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=h.NONE,this.onSinglePanEnd();break;case h.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=h.ONE_FINGER_SWITCHED;break;case h.MULT_FINGER:0==this._touchCurrent.length&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=h.NONE,this.onTriplePanEnd())}}else"touch"!=t.pointerType&&this._input==h.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=h.NONE,this.onSinglePanEnd(),this._button=-1);if(t.isPrimary)if(this._downValid)if(t.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(0==this._nclicks)this._nclicks=1,this._clickStart=performance.now();else{const e=t.timeStamp-this._clickStart,i=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;e<=this._maxInterval&&i<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(t)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)})),o(this,"onWheel",(t=>{var e,i;if(this.enabled&&this.enableZoom&&this.domElement){let s=null;t.ctrlKey||t.metaKey?s="CTRL":t.shiftKey&&(s="SHIFT");const r=this.getOpFromAction("WHEEL",s);if(r){t.preventDefault(),this.dispatchEvent(u);const s=125;let o=t.deltaY/s,h=1;switch(o>0?h=1/this.scaleFactor:o<0&&(h=this.scaleFactor),r){case"ZOOM":if(this.updateTbState(a.SCALE,!0),o>0?h=1/Math.pow(this.scaleFactor,o):o<0&&(h=Math.pow(this.scaleFactor,-o)),this.cursorZoom&&this.enablePan){let s;this.camera instanceof n.OrthographicCamera&&(s=null==(e=this.unprojectOnTbPlane(this.camera,t.clientX,t.clientY,this.domElement))?void 0:e.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof n.PerspectiveCamera&&(s=null==(i=this.unprojectOnTbPlane(this.camera,t.clientX,t.clientY,this.domElement))?void 0:i.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),void 0!==s&&this.applyTransformMatrix(this.applyScale(h,s))}else this.applyTransformMatrix(this.applyScale(h,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(a.IDLE,!1),this.dispatchEvent(l),this.dispatchEvent(d);break;case"FOV":if(this.camera instanceof n.PerspectiveCamera){this.updateTbState(a.FOV,!0),0!=t.deltaX&&(o=t.deltaX/s,h=1,o>0?h=1/Math.pow(this.scaleFactor,o):o<0&&(h=Math.pow(this.scaleFactor,-o))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const e=this._v3_1.distanceTo(this._gizmos.position);let i=e/h;i=n.MathUtils.clamp(i,this.minDistance,this.maxDistance);const r=e*Math.tan(n.MathUtils.DEG2RAD*this.camera.fov*.5);let A=n.MathUtils.RAD2DEG*(2*Math.atan(r/i));A>this.maxFov?A=this.maxFov:A<this.minFov&&(A=this.minFov),h=e/(r/Math.tan(n.MathUtils.DEG2RAD*(A/2))),this.setFov(A),this.applyTransformMatrix(this.applyScale(h,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(a.IDLE,!1),this.dispatchEvent(l),this.dispatchEvent(d)}}}})),o(this,"onSinglePanStart",((t,e)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(u),this.setCenter(t.clientX,t.clientY),e){case"PAN":if(!this.enablePan)return;if(-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(l)),this.camera){this.updateTbState(a.PAN,!0);const t=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement);void 0!==t&&this._startCursorPosition.copy(t),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(l))}break;case"ROTATE":if(!this.enableRotate)return;if(-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(a.ROTATE,!0);const t=this.unprojectOnTbSurface(this.camera,A.x,A.y,this.domElement,this._tbRadius);void 0!==t&&this._startCursorPosition.copy(t),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(l);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof n.PerspectiveCamera&&(-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(l)),this.updateTbState(a.FOV,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(l)),this.updateTbState(a.SCALE,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}})),o(this,"onSinglePanMove",((t,e)=>{if(this.enabled&&this.domElement){const i=e!=this._state;switch(this.setCenter(t.clientX,t.clientY),e){case a.PAN:if(this.enablePan&&this.camera)if(i){this.dispatchEvent(d),this.dispatchEvent(u),this.updateTbState(e,!0);const t=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement);void 0!==t&&this._startCursorPosition.copy(t),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const t=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement);void 0!==t&&this._currentCursorPosition.copy(t),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case a.ROTATE:if(this.enableRotate&&this.camera)if(i){this.dispatchEvent(d),this.dispatchEvent(u),this.updateTbState(e,!0);const t=this.unprojectOnTbSurface(this.camera,A.x,A.y,this.domElement,this._tbRadius);void 0!==t&&this._startCursorPosition.copy(t),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const t=this.unprojectOnTbSurface(this.camera,A.x,A.y,this.domElement,this._tbRadius);void 0!==t&&this._currentCursorPosition.copy(t);const e=this._startCursorPosition.distanceTo(this._currentCursorPosition),i=this._startCursorPosition.angleTo(this._currentCursorPosition),n=Math.max(e/this._tbRadius,i);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),n)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=n,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case a.SCALE:if(this.enableZoom)if(i)this.dispatchEvent(d),this.dispatchEvent(u),this.updateTbState(e,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{const t=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y);const e=this._currentCursorPosition.y-this._startCursorPosition.y;let i=1;e<0?i=1/Math.pow(this.scaleFactor,-e*t):e>0&&(i=Math.pow(this.scaleFactor,e*t)),this.applyTransformMatrix(this.applyScale(i,this._gizmos.position))}break;case a.FOV:if(this.enableZoom&&this.camera instanceof n.PerspectiveCamera)if(i)this.dispatchEvent(d),this.dispatchEvent(u),this.updateTbState(e,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{const t=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y);const e=this._currentCursorPosition.y-this._startCursorPosition.y;let i=1;e<0?i=1/Math.pow(this.scaleFactor,-e*t):e>0&&(i=Math.pow(this.scaleFactor,e*t)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const s=this._v3_1.distanceTo(this._gizmos.position);let r=s/i;r=n.MathUtils.clamp(r,this.minDistance,this.maxDistance);const o=s*Math.tan(n.MathUtils.DEG2RAD*this._fovState*.5);let a=n.MathUtils.RAD2DEG*(2*Math.atan(o/r));a=n.MathUtils.clamp(a,this.minFov,this.maxFov);const h=o/Math.tan(n.MathUtils.DEG2RAD*(a/2));i=s/h,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(a),this.applyTransformMatrix(this.applyScale(i,this._v3_2,!1));const c=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(h/s);this._m4_1.makeTranslation(c.x,c.y,c.z)}}this.dispatchEvent(l)}})),o(this,"onSinglePanEnd",(()=>{if(this._state==a.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const t=Math.abs((this._wPrev+this._wCurr)/2),e=this;this._animationId=window.requestAnimationFrame((function(i){e.updateTbState(a.ANIMATION_ROTATE,!0);const n=e.calculateRotationAxis(e._cursorPosPrev,e._cursorPosCurr);e.onRotationAnim(i,n,Math.min(t,e.wMax))}))}else this.updateTbState(a.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l);else this.updateTbState(a.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l)}else this._state!=a.PAN&&this._state!=a.IDLE||(this.updateTbState(a.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(l));this.dispatchEvent(d)})),o(this,"onDoubleTap",(t=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(u),this.setCenter(t.clientX,t.clientY);const e=this.unprojectOnObj(this.getCursorNDC(A.x,A.y,this.domElement),this.camera);if(e&&this.enableAnimations){const t=this;-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame((function(i){t.updateTbState(a.ANIMATION_FOCUS,!0),t.onFocusAnim(i,e,t._cameraMatrixState,t._gizmoMatrixState)}))}else e&&!this.enableAnimations&&(this.updateTbState(a.FOCUS,!0),this.focus(e,this.scaleFactor),this.updateTbState(a.IDLE,!1),this.dispatchEvent(l))}this.dispatchEvent(d)})),o(this,"onDoublePanStart",(()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(u),this.updateTbState(a.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const t=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement,!0);void 0!==t&&this._startCursorPosition.copy(t),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}})),o(this,"onDoublePanMove",(()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=a.PAN&&(this.updateTbState(a.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const t=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement,!0);void 0!==t&&this._currentCursorPosition.copy(t),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(l)}})),o(this,"onDoublePanEnd",(()=>{this.updateTbState(a.IDLE,!1),this.dispatchEvent(d)})),o(this,"onRotateStart",(()=>{var t;this.enabled&&this.enableRotate&&(this.dispatchEvent(u),this.updateTbState(a.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,null==(t=this.camera)||t.getWorldDirection(this._rotationAxis),this.enablePan||this.enableZoom||this.activateGizmos(!0))})),o(this,"onRotateMove",(()=>{var t;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){let e;this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=a.ZROTATE&&(this.updateTbState(a.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),e=null==(t=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement))?void 0:t.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):e=(new n.Vector3).setFromMatrixPosition(this._gizmoMatrixState);const i=n.MathUtils.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);void 0!==e&&this.applyTransformMatrix(this.zRotate(e,i)),this.dispatchEvent(l)}})),o(this,"onRotateEnd",(()=>{this.updateTbState(a.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(d)})),o(this,"onPinchStart",(()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(u),this.updateTbState(a.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))})),o(this,"onPinchMove",(()=>{var t,e;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const i=12;this._state!=a.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(a.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),i*this._devPxRatio);const s=this._currentFingerDistance/this._startFingerDistance;let r;this.enablePan?this.camera instanceof n.OrthographicCamera?r=null==(t=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement))?void 0:t.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof n.PerspectiveCamera&&(r=null==(e=this.unprojectOnTbPlane(this.camera,A.x,A.y,this.domElement))?void 0:e.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):r=this._gizmos.position,void 0!==r&&this.applyTransformMatrix(this.applyScale(s,r)),this.dispatchEvent(l)}})),o(this,"onPinchEnd",(()=>{this.updateTbState(a.IDLE,!1),this.dispatchEvent(d)})),o(this,"onTriplePanStart",(()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(u),this.updateTbState(a.SCALE,!0);let t=0,e=0;const i=this._touchCurrent.length;for(let n=0;n<i;n++)t+=this._touchCurrent[n].clientX,e+=this._touchCurrent[n].clientY;this.setCenter(t/i,e/i),this._startCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}})),o(this,"onTriplePanMove",(()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let t=0,e=0;const i=this._touchCurrent.length;for(let n=0;n<i;n++)t+=this._touchCurrent[n].clientX,e+=this._touchCurrent[n].clientY;this.setCenter(t/i,e/i);const s=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(A.x,A.y,this.domElement).y);const r=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;r<0?o=1/Math.pow(this.scaleFactor,-r*s):r>0&&(o=Math.pow(this.scaleFactor,r*s)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const a=this._v3_1.distanceTo(this._gizmos.position);let h=a/o;h=n.MathUtils.clamp(h,this.minDistance,this.maxDistance);const c=a*Math.tan(n.MathUtils.DEG2RAD*this._fovState*.5);let u=n.MathUtils.RAD2DEG*(2*Math.atan(c/h));u=n.MathUtils.clamp(u,this.minFov,this.maxFov);const d=c/Math.tan(n.MathUtils.DEG2RAD*(u/2));o=a/d,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(u),this.applyTransformMatrix(this.applyScale(o,this._v3_2,!1));const p=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(d/a);this._m4_1.makeTranslation(p.x,p.y,p.z),this.dispatchEvent(l)}})),o(this,"onTriplePanEnd",(()=>{this.updateTbState(a.IDLE,!1),this.dispatchEvent(d)})),o(this,"setCenter",((t,e)=>{A.x=t,A.y=e})),o(this,"initializeMouseActions",(()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")})),o(this,"setMouseAction",((t,e,i=null)=>{let n;if(!["PAN","ROTATE","ZOOM","FOV"].includes(t)||![0,1,2,"WHEEL"].includes(e)||!["CTRL","SHIFT",null].includes(i))return!1;if("WHEEL"==e&&"ZOOM"!=t&&"FOV"!=t)return!1;switch(t){case"PAN":n=a.PAN;break;case"ROTATE":n=a.ROTATE;break;case"ZOOM":n=a.SCALE;break;case"FOV":n=a.FOV}const s={operation:t,mouse:e,key:i,state:n};for(let r=0;r<this.mouseActions.length;r++)if(this.mouseActions[r].mouse==s.mouse&&this.mouseActions[r].key==s.key)return this.mouseActions.splice(r,1,s),!0;return this.mouseActions.push(s),!0})),o(this,"getOpFromAction",((t,e)=>{let i;for(let n=0;n<this.mouseActions.length;n++)if(i=this.mouseActions[n],i.mouse==t&&i.key==e)return i.operation;if(e)for(let n=0;n<this.mouseActions.length;n++)if(i=this.mouseActions[n],i.mouse==t&&null==i.key)return i.operation;return null})),o(this,"getOpStateFromAction",((t,e)=>{let i;for(let n=0;n<this.mouseActions.length;n++)if(i=this.mouseActions[n],i.mouse==t&&i.key==e)return i.state;if(e)for(let n=0;n<this.mouseActions.length;n++)if(i=this.mouseActions[n],i.mouse==t&&null==i.key)return i.state;return null})),o(this,"getAngle",((t,e)=>180*Math.atan2(e.clientY-t.clientY,e.clientX-t.clientX)/Math.PI)),o(this,"updateTouchEvent",(t=>{for(let e=0;e<this._touchCurrent.length;e++)if(this._touchCurrent[e].pointerId==t.pointerId){this._touchCurrent.splice(e,1,t);break}})),o(this,"calculateAngularSpeed",((t,e,i,n)=>{const s=(n-i)/1e3;return 0==s?0:(e-t)/s})),o(this,"calculatePointersDistance",((t,e)=>Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)))),o(this,"calculateRotationAxis",((t,e)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(t,e).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()))),o(this,"calculateTbRadius",(t=>{const e=t.position.distanceTo(this._gizmos.position);if(t instanceof n.PerspectiveCamera){const i=n.MathUtils.DEG2RAD*t.fov*.5,s=Math.atan(t.aspect*Math.tan(i));return Math.tan(Math.min(i,s))*e*.67}if(t instanceof n.OrthographicCamera)return.67*Math.min(t.top,t.right)})),o(this,"focus",((t,e,i=1)=>{if(this.camera){const n=t.clone();n.sub(this._gizmos.position).multiplyScalar(i),this._translationMatrix.makeTranslation(n.x,n.y,n.z);const s=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const r=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(e,this._gizmos.position)),this._gizmoMatrixState.copy(s),this._cameraMatrixState.copy(r)}})),o(this,"drawGrid",(()=>{if(this.scene){const t=8947848,e=3;let i,s,r,o;if(this.camera instanceof n.OrthographicCamera){const t=this.camera.right-this.camera.left,n=this.camera.bottom-this.camera.top;r=Math.max(t,n),o=r/20,i=r/this.camera.zoom*e,s=i/o*this.camera.zoom}else if(this.camera instanceof n.PerspectiveCamera){const t=this.camera.position.distanceTo(this._gizmos.position),a=n.MathUtils.DEG2RAD*this.camera.fov*.5,h=Math.atan(this.camera.aspect*Math.tan(a));r=Math.tan(Math.max(a,h))*t*2,o=r/20,i=r*e,s=i/o}null==this._grid&&this.camera&&(this._grid=new n.GridHelper(i,s,t,t),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(.5*Math.PI),this.scene.add(this._grid))}})),o(this,"connect",(t=>{document,this.domElement=t,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)})),o(this,"dispose",(()=>{var t,e,i,n,s;-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),null==(t=this.domElement)||t.removeEventListener("pointerdown",this.onPointerDown),null==(e=this.domElement)||e.removeEventListener("pointercancel",this.onPointerCancel),null==(i=this.domElement)||i.removeEventListener("wheel",this.onWheel),null==(n=this.domElement)||n.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),null==(s=this.scene)||s.remove(this._gizmos),this.disposeGrid()})),o(this,"disposeGrid",(()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)})),o(this,"easeOutCubic",(t=>1-Math.pow(1-t,3))),o(this,"activateGizmos",(t=>{for(const e of this._gizmos.children)e.material.setValues({opacity:t?1:.6})})),o(this,"getCursorNDC",((t,e,i)=>{const n=i.getBoundingClientRect();return this._v2_1.setX((t-n.left)/n.width*2-1),this._v2_1.setY((n.bottom-e)/n.height*2-1),this._v2_1.clone()})),o(this,"getCursorPosition",((t,e,i)=>(this._v2_1.copy(this.getCursorNDC(t,e,i)),this.camera instanceof n.OrthographicCamera&&(this._v2_1.x*=.5*(this.camera.right-this.camera.left),this._v2_1.y*=.5*(this.camera.top-this.camera.bottom)),this._v2_1.clone()))),o(this,"setCamera",(t=>{if(t){t.lookAt(this.target),t.updateMatrix(),t instanceof n.PerspectiveCamera&&(this._fov0=t.fov,this._fovState=t.fov),this._cameraMatrixState0.copy(t.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(t.projectionMatrix),this._zoom0=t.zoom,this._zoomState=this._zoom0,this._initialNear=t.near,this._nearPos0=t.position.distanceTo(this.target)-t.near,this._nearPos=this._initialNear,this._initialFar=t.far,this._farPos0=t.position.distanceTo(this.target)-t.far,this._farPos=this._initialFar,this._up0.copy(t.up),this._upState.copy(t.up),this.camera=t,this.camera.updateProjectionMatrix();const e=this.calculateTbRadius(t);void 0!==e&&(this._tbRadius=e),this.makeGizmos(this.target,this._tbRadius)}})),o(this,"makeGizmos",((t,e)=>{const i=new n.EllipseCurve(0,0,e,e).getPoints(this._curvePts),s=(new n.BufferGeometry).setFromPoints(i),r=new n.LineBasicMaterial({color:16744576,fog:!1,transparent:!0,opacity:.6}),o=new n.LineBasicMaterial({color:8454016,fog:!1,transparent:!0,opacity:.6}),a=new n.LineBasicMaterial({color:8421631,fog:!1,transparent:!0,opacity:.6}),h=new n.Line(s,r),A=new n.Line(s,o),c=new n.Line(s,a),l=.5*Math.PI;if(h.rotation.x=l,A.rotation.y=l,this._gizmoMatrixState0.identity().setPosition(t),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&1!=this.camera.zoom){const e=1/this.camera.zoom;this._scaleMatrix.makeScale(e,e,e),this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(t.x,t.y,t.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(h),this._gizmos.add(A),this._gizmos.add(c)})),o(this,"onFocusAnim",((t,e,i,n)=>{if(-1==this._timeStart&&(this._timeStart=t),this._state==a.ANIMATION_FOCUS){const s=(t-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(n),s>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(e,this.scaleFactor),this._timeStart=-1,this.updateTbState(a.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l);else{const t=this.easeOutCubic(s),r=1-t+this.scaleFactor*t;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(e,r,t),this.dispatchEvent(l);const o=this;this._animationId=window.requestAnimationFrame((function(t){o.onFocusAnim(t,e,i,n.clone())}))}}else this._animationId=-1,this._timeStart=-1})),o(this,"onRotationAnim",((t,e,i)=>{if(-1==this._timeStart&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=t),this._state==a.ANIMATION_ROTATE){const n=(t-this._timeStart)/1e3;if(i+-this.dampingFactor*n>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(n,2)+i*n+0,this.applyTransformMatrix(this.rotate(e,this._angleCurrent)),this.dispatchEvent(l);const t=this;this._animationId=window.requestAnimationFrame((function(n){t.onRotationAnim(n,e,i)}))}else this._animationId=-1,this._timeStart=-1,this.updateTbState(a.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(l)}else this._animationId=-1,this._timeStart=-1,this._state!=a.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(l))})),o(this,"pan",((t,e,i=!1)=>{if(this.camera){const s=t.clone().sub(e);if(this.camera instanceof n.OrthographicCamera&&s.multiplyScalar(1/this.camera.zoom),this.camera instanceof n.PerspectiveCamera&&i){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const t=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);s.multiplyScalar(1/t)}this._v3_1.set(s.x,s.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return c})),o(this,"reset",(()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof n.PerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const t=this.calculateTbRadius(this.camera);void 0!==t&&(this._tbRadius=t),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(a.IDLE,!1),this.dispatchEvent(l)}})),o(this,"rotate",((t,e)=>{const i=this._gizmos.position;return this._translationMatrix.makeTranslation(-i.x,-i.y,-i.z),this._rotationMatrix.makeRotationAxis(t,-e),this._m4_1.makeTranslation(i.x,i.y,i.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),c})),o(this,"copyState",(()=>{if(this.camera){const t=JSON.stringify(this.camera instanceof n.OrthographicCamera?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(t)}})),o(this,"pasteState",(()=>{const t=this;navigator.clipboard.readText().then((function(e){t.setStateFromJSON(e)}))})),o(this,"saveState",(()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof n.PerspectiveCamera&&(this._fov0=this.camera.fov))})),o(this,"applyScale",((t,e,i=!0)=>{if(!this.camera)return;const s=e.clone();let r=1/t;if(this.camera instanceof n.OrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=t,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,r=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,r=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(r,r,r),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),s.sub(this._v3_1);const e=s.clone().multiplyScalar(r);return s.sub(e),this._m4_1.makeTranslation(s.x,s.y,s.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),c}if(this.camera instanceof n.PerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let t=this._v3_1.distanceTo(s),e=t-t*r;const n=t-e;n<this.minDistance?(r=this.minDistance/t,e=t-t*r):n>this.maxDistance&&(r=this.maxDistance/t,e=t-t*r);let o=s.clone().sub(this._v3_1).normalize().multiplyScalar(e);if(this._m4_1.makeTranslation(o.x,o.y,o.z),i){const i=this._v3_2;t=i.distanceTo(s),e=t-t*r,o=s.clone().sub(this._v3_2).normalize().multiplyScalar(e),this._translationMatrix.makeTranslation(i.x,i.y,i.z),this._scaleMatrix.makeScale(r,r,r),this._m4_2.makeTranslation(o.x,o.y,o.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-i.x,-i.y,-i.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return c}})),o(this,"setFov",(t=>{this.camera instanceof n.PerspectiveCamera&&(this.camera.fov=n.MathUtils.clamp(t,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())})),o(this,"setTarget",((t,e,i)=>{if(this.camera){this.target.set(t,e,i),this._gizmos.position.set(t,e,i);const n=this.calculateTbRadius(this.camera);void 0!==n&&(this._tbRadius=n),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}})),o(this,"zRotate",((t,e)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,e),this._translationMatrix.makeTranslation(-t.x,-t.y,-t.z),this._m4_1.makeTranslation(t.x,t.y,t.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(t),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,e),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),c))),o(this,"unprojectOnObj",((t,e)=>{if(!this.scene)return null;const i=new n.Raycaster;i.near=e.near,i.far=e.far,i.setFromCamera(t,e);const s=i.intersectObjects(this.scene.children,!0);for(let n=0;n<s.length;n++)if(s[n].object.uuid!=this._gizmos.uuid&&s[n].face)return s[n].point.clone();return null})),o(this,"unprojectOnTbSurface",((t,e,i,s,r)=>{if(t instanceof n.OrthographicCamera){this._v2_1.copy(this.getCursorPosition(e,i,s)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const t=Math.pow(this._v2_1.x,2),n=Math.pow(this._v2_1.y,2),r=Math.pow(this._tbRadius,2);return t+n<=.5*r?this._v3_1.setZ(Math.sqrt(r-(t+n))):this._v3_1.setZ(.5*r/Math.sqrt(t+n)),this._v3_1}if(t instanceof n.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(e,i,s)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(t.projectionMatrixInverse);const o=this._v3_1.clone().normalize(),a=t.position.distanceTo(this._gizmos.position),h=Math.pow(r,2),A=this._v3_1.z,c=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(0==c)return o.set(this._v3_1.x,this._v3_1.y,r),o;const l=A/c,u=a;let d=Math.pow(l,2)+1,p=2*l*u,f=Math.pow(u,2)-h,g=Math.pow(p,2)-4*d*f;if(g>=0&&(this._v2_1.setX((-p-Math.sqrt(g))/(2*d)),this._v2_1.setY(l*this._v2_1.x+u),n.MathUtils.RAD2DEG*this._v2_1.angle()>=45)){const t=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(t),o.z+=a,o}d=l,p=u,f=.5*-h,g=Math.pow(p,2)-4*d*f,this._v2_1.setX((-p-Math.sqrt(g))/(2*d)),this._v2_1.setY(l*this._v2_1.x+u);const m=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(m),o.z+=a,o}})),o(this,"unprojectOnTbPlane",((t,e,i,s,r=!1)=>{if(t instanceof n.OrthographicCamera)return this._v2_1.copy(this.getCursorPosition(e,i,s)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(t instanceof n.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(e,i,s)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(t.projectionMatrixInverse);const n=this._v3_1.clone().normalize(),o=this._v3_1.z,a=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let h;if(h=r?this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):t.position.distanceTo(this._gizmos.position),0==a)return n.set(0,0,0),n;const A=h,c=-A/(o/a),l=Math.sqrt(Math.pow(A,2)+Math.pow(c,2));return n.multiplyScalar(l),n.z=0,n}})),o(this,"updateMatrixState",(()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof n.OrthographicCamera&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof n.PerspectiveCamera&&(this._fovState=this.camera.fov))})),o(this,"updateTbState",((t,e)=>{this._state=t,e&&this.updateMatrixState()})),o(this,"update",(()=>{const t=1e-6;if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const t=this.calculateTbRadius(this.camera);void 0!==t&&(this._tbRadius=t),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof n.OrthographicCamera&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const t=n.MathUtils.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(t/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof n.PerspectiveCamera){const e=this.camera.position.distanceTo(this._gizmos.position);if(e>this.maxDistance+t||e<this.minDistance-t){const t=n.MathUtils.clamp(e,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(t/e,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=n.MathUtils.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const i=this._tbRadius,s=this.calculateTbRadius(this.camera);if(void 0!==s&&(this._tbRadius=s),i<this._tbRadius-t||i>this._tbRadius+t){const t=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,e=this._tbRadius/t,i=new n.EllipseCurve(0,0,e,e).getPoints(this._curvePts),s=(new n.BufferGeometry).setFromPoints(i);for(const n in this._gizmos.children)this._gizmos.children[n].geometry=s}}this.camera.lookAt(this._gizmos.position)}})),o(this,"setStateFromJSON",(t=>{const e=JSON.parse(t);if(e.arcballState&&this.camera){this._cameraMatrixState.fromArray(e.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(e.arcballState.cameraUp),this.camera.near=e.arcballState.cameraNear,this.camera.far=e.arcballState.cameraFar,this.camera.zoom=e.arcballState.cameraZoom,this.camera instanceof n.PerspectiveCamera&&(this.camera.fov=e.arcballState.cameraFov),this._gizmoMatrixState.fromArray(e.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const t=this.calculateTbRadius(this.camera);void 0!==t&&(this._tbRadius=t);const i=(new n.Matrix4).copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(i),this.camera.lookAt(this._gizmos.position),this.updateTbState(a.IDLE,!1),this.dispatchEvent(l)}})),this.camera=null,this.domElement=e,this.scene=i,this.mouseActions=[],this._mouseOp=null,this._v2_1=new n.Vector2,this._v3_1=new n.Vector3,this._v3_2=new n.Vector3,this._m4_1=new n.Matrix4,this._m4_2=new n.Matrix4,this._quat=new n.Quaternion,this._translationMatrix=new n.Matrix4,this._rotationMatrix=new n.Matrix4,this._scaleMatrix=new n.Matrix4,this._rotationAxis=new n.Vector3,this._cameraMatrixState=new n.Matrix4,this._cameraProjectionState=new n.Matrix4,this._fovState=1,this._upState=new n.Vector3,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new n.Matrix4,this._up0=new n.Vector3,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new n.Matrix4,this._gizmoMatrixState0=new n.Matrix4,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=h.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new n.Vector3,this._startCursorPosition=new n.Vector3,this._grid=null,this._gridPosition=new n.Vector3,this._gizmos=new n.Group,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new n.Vector3,this._cursorPosCurr=new n.Vector3,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new n.Vector3(0,0,0),this._currentTarget=new n.Vector3(0,0,0),this._tbRadius=1,this._state=a.IDLE,this.setCamera(t),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(t){if((null==t?void 0:t.camera)&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(t.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),this._state!=a.ROTATE&&this._state!=a.ZROTATE&&this._state!=a.ANIMATION_ROTATE||this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),(null==t?void 0:t.gizmos)&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(t.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==a.SCALE||this._state==a.FOCUS||this._state==a.ANIMATION_FOCUS)&&this.camera){const t=this.calculateTbRadius(this.camera);if(void 0!==t&&(this._tbRadius=t),this.adjustNearFar){const t=this.camera.position.distanceTo(this._gizmos.position),e=new n.Box3;e.setFromObject(this._gizmos);const i=new n.Sphere;e.getBoundingSphere(i);const s=Math.max(this._nearPos0,i.radius+i.center.length()),r=t-this._initialNear,o=Math.min(s,r);this.camera.near=t-o;const a=Math.min(this._farPos0,-i.radius+i.center.length()),h=t-this._initialFar,A=Math.min(a,h);this.camera.far=t-A,this.camera.updateProjectionMatrix()}else{let t=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,t=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,t=!0),t&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(t){this._gizmos.visible=t,this.dispatchEvent(l)}setTransformationMatrices(t=null,e=null){t?c.camera?c.camera.copy(t):c.camera=t.clone():c.camera=null,e?c.gizmos?c.gizmos.copy(e):c.gizmos=e.clone():c.gizmos=null}}},UZln:(t,e,i)=>{"use strict";i.d(e,{m:()=>a});var n=i("jBc9"),s=i("Ua9r"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);const a=(()=>{const t={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new n.Vector3},up:{value:new n.Vector3(0,1,0)}},vertexShader:"\n      uniform vec3 sunPosition;\n      uniform float rayleigh;\n      uniform float turbidity;\n      uniform float mieCoefficient;\n      uniform vec3 up;\n\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      // constants for atmospheric scattering\n      const float e = 2.71828182845904523536028747135266249775724709369995957;\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      // wavelength of used primaries, according to preetham\n      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n      // mie stuff\n      // K coefficient for the primaries\n      const float v = 4.0;\n      const vec3 K = vec3( 0.686, 0.678, 0.666 );\n      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n      // earth shadow hack\n      // cutoffAngle = pi / 1.95;\n      const float cutoffAngle = 1.6110731556870734;\n      const float steepness = 1.5;\n      const float EE = 1000.0;\n\n      float sunIntensity( float zenithAngleCos ) {\n        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n      }\n\n      vec3 totalMie( float T ) {\n        float c = ( 0.2 * T ) * 10E-18;\n        return 0.434 * c * MieConst;\n      }\n\n      void main() {\n\n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        gl_Position.z = gl_Position.w; // set z to camera.far\n\n        vSunDirection = normalize( sunPosition );\n\n        vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n      // extinction (absorbtion + out scattering)\n      // rayleigh coefficients\n        vBetaR = totalRayleigh * rayleighCoefficient;\n\n      // mie coefficients\n        vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n      }\n    ",fragmentShader:`\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      uniform float mieDirectionalG;\n      uniform vec3 up;\n\n      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n      // constants for atmospheric scattering\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      const float n = 1.0003; // refractive index of air\n      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n      // optical length at zenith for molecules\n      const float rayleighZenithLength = 8.4E3;\n      const float mieZenithLength = 1.25E3;\n      // 66 arc seconds -> degrees, and the cosine of that\n      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n      // 3.0 / ( 16.0 * pi )\n      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n      // 1.0 / ( 4.0 * pi )\n      const float ONE_OVER_FOURPI = 0.07957747154594767;\n\n      float rayleighPhase( float cosTheta ) {\n        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n      }\n\n      float hgPhase( float cosTheta, float g ) {\n        float g2 = pow( g, 2.0 );\n        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n      }\n\n      void main() {\n\n        vec3 direction = normalize( vWorldPosition - cameraPos );\n\n      // optical length\n      // cutoff angle at 90 to avoid singularity in next formula.\n        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n        float sR = rayleighZenithLength * inverse;\n        float sM = mieZenithLength * inverse;\n\n      // combined extinction factor\n        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n      // in scattering\n        float cosTheta = dot( direction, vSunDirection );\n\n        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n        vec3 betaRTheta = vBetaR * rPhase;\n\n        float mPhase = hgPhase( cosTheta, mieDirectionalG );\n        vec3 betaMTheta = vBetaM * mPhase;\n\n        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n      // nightsky\n        float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n        float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n        vec3 L0 = vec3( 0.1 ) * Fex;\n\n      // composition + solar disc\n        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n        gl_FragColor = vec4( retColor, 1.0 );\n\n      #include <tonemapping_fragment>\n      #include <${s.r>=154?"colorspace_fragment":"encodings_fragment"}>\n\n      }\n    `},e=new n.ShaderMaterial({name:"SkyShader",fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n.UniformsUtils.clone(t.uniforms),side:n.BackSide,depthWrite:!1});class i extends n.Mesh{constructor(){super(new n.BoxGeometry(1,1,1),e)}}return o(i,"SkyShader",t),o(i,"material",e),i})()},Ua9r:(t,e,i)=>{"use strict";i.d(e,{r:()=>s});var n=i("jBc9");const s=(()=>parseInt(n.REVISION.replace(/\D+/g,"")))()},UcaZ:(t,e,i)=>{"use strict";i.d(e,{_:()=>s});var n=i("jBc9");class s extends n.ExtrudeGeometry{constructor(t,e={}){const{bevelEnabled:i=!1,bevelSize:n=8,bevelThickness:s=10,font:r,height:o=50,size:a=100,lineHeight:h=1,letterSpacing:A=0,...c}=e;void 0===r?super():super(r.generateShapes(t,a,{lineHeight:h,letterSpacing:A}),{...c,bevelEnabled:i,bevelSize:n,bevelThickness:s,depth:o}),this.type="TextGeometry"}}},V4Zg:(t,e,i)=>{"use strict";i.d(e,{f:()=>n});class n{constructor(t,e=" .:-=+*#%@",i={}){const n=i.resolution||.15,s=i.scale||1,r=i.color||!1,o=i.alpha||!1,a=i.block||!1,h=i.invert||!1,A=i.strResolution||"low";let c,l;const u=document.createElement("div");u.style.cursor="default";const d=document.createElement("table");let p,f,g;u.appendChild(d),this.setSize=function(e,i){c=e,l=i,t.setSize(e,i),function(){p=Math.floor(c*n),f=Math.floor(l*n),E.width=p,E.height=f,g=t.domElement,g.style.backgroundColor&&(d.rows[0].cells[0].style.backgroundColor=g.style.backgroundColor,d.rows[0].cells[0].style.color=g.style.color),d.cellSpacing=0,d.cellPadding=0;const e=d.style;e.whiteSpace="pre",e.margin="0px",e.padding="0px",e.letterSpacing=b+"px",e.fontFamily=v,e.fontSize=_+"px",e.lineHeight=w+"px",e.textAlign="left",e.textDecoration="none"}()},this.render=function(e,i){t.render(e,i),function(t){y.clearRect(0,0,p,f),y.drawImage(B,0,0,p,f);const e=y.getImageData(0,0,p,f).data;let i="";for(let n=0;n<f;n+=2){for(let t=0;t<p;t++){const s=4*(n*p+t),A=e[s],c=e[s+1],l=e[s+2],u=e[s+3];let d,f;f=(.3*A+.59*c+.11*l)/255,0==u&&(f=1),d=Math.floor((1-f)*(I.length-1)),h&&(d=I.length-d-1);let g=I[d];void 0!==g&&" "!=g||(g="&nbsp;"),i+=r?"<span style='color:rgb("+A+","+c+","+l+");"+(a?"background-color:rgb("+A+","+c+","+l+");":"")+(o?"opacity:"+u/255+";":"")+"'>"+g+"</span>":g}i+="<br/>"}t.innerHTML=`<tr><td style="display:block;width:${c}px;height:${l}px;overflow:hidden">${i}</td></tr>`}(d)},this.domElement=u;const m=" .,:;i1tfLCG08@".split(""),C=" CGO08@".split(""),v="courier new, monospace",B=t.domElement,E=document.createElement("canvas");if(!E.getContext)return;const y=E.getContext("2d");if(!y.getImageData)return;let I=r?C:m;e&&(I=e);const _=2/n*s,w=2/n*s;let b=0;if("low"==A)switch(s){case 1:b=-1;break;case 2:case 3:b=-2.1;break;case 4:b=-3.1;break;case 5:b=-4.15}if("medium"==A)switch(s){case 1:b=0;break;case 2:b=-1;break;case 3:b=-1.04;break;case 4:case 5:b=-2.1}if("high"==A)switch(s){case 1:case 2:b=0;break;case 3:case 4:case 5:b=-1}}}},VGrL:(t,e,i)=>{"use strict";i.d(e,{s:()=>d});var n=i("jBc9");const s={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvUv = uv;\n    \tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n    uniform float opacity;\n\n    uniform sampler2D tDiffuse;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 texel = texture2D( tDiffuse, vUv );\n    \tgl_FragColor = opacity * texel;\n\n    }\n  "};var r=i("iG0e"),o=i("cZpV"),a=Object.defineProperty,h=(t,e,i)=>(((t,e,i)=>{e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class A extends o.o{constructor(t,e){super(),h(this,"scene"),h(this,"camera"),h(this,"inverse"),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,i){const n=t.getContext(),s=t.state;let r,o;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(r=0,o=1):(r=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),s.buffers.stencil.setFunc(n.ALWAYS,r,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(n.EQUAL,1,4294967295),s.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),s.buffers.stencil.setLocked(!0)}}class c extends o.o{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}var l=Object.defineProperty,u=(t,e,i)=>(((t,e,i)=>{e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class d{constructor(t,e){if(u(this,"renderer"),u(this,"_pixelRatio"),u(this,"_width"),u(this,"_height"),u(this,"renderTarget1"),u(this,"renderTarget2"),u(this,"writeBuffer"),u(this,"readBuffer"),u(this,"renderToScreen"),u(this,"passes",[]),u(this,"copyPass"),u(this,"clock"),this.renderer=t,void 0===e){const i={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat},s=t.getSize(new n.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=s.width,this._height=s.height,(e=new n.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,i)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,r.p,this.copyPass=new r.p(s),this.copyPass.material.blending=n.NoBlending,this.clock=new n.Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let i=!1;const n=this.passes.length;for(let s=0;s<n;s++){const e=this.passes[s];if(!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){const e=this.renderer.getContext(),i=this.renderer.state.buffers.stencil;i.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),i.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==A&&(e instanceof A?i=!0:e instanceof c&&(i=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new n.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,n)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}},VRiI:(t,e,i)=>{"use strict";i.d(e,{V:()=>a});var n=i("jBc9"),s=i("XM0D"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class a extends s.Q{constructor(t,e){super(),o(this,"enabled",!0),o(this,"screen",{left:0,top:0,width:0,height:0}),o(this,"rotateSpeed",1),o(this,"zoomSpeed",1.2),o(this,"panSpeed",.3),o(this,"noRotate",!1),o(this,"noZoom",!1),o(this,"noPan",!1),o(this,"staticMoving",!1),o(this,"dynamicDampingFactor",.2),o(this,"minDistance",0),o(this,"maxDistance",1/0),o(this,"keys",["KeyA","KeyS","KeyD"]),o(this,"mouseButtons",{LEFT:n.MOUSE.ROTATE,MIDDLE:n.MOUSE.DOLLY,RIGHT:n.MOUSE.PAN}),o(this,"object"),o(this,"domElement"),o(this,"cursorZoom",!1),o(this,"target",new n.Vector3),o(this,"mousePosition",new n.Vector2),o(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),o(this,"EPS",1e-6),o(this,"lastZoom",1),o(this,"lastPosition",new n.Vector3),o(this,"cursorVector",new n.Vector3),o(this,"targetVector",new n.Vector3),o(this,"_state",this.STATE.NONE),o(this,"_keyState",this.STATE.NONE),o(this,"_eye",new n.Vector3),o(this,"_movePrev",new n.Vector2),o(this,"_moveCurr",new n.Vector2),o(this,"_lastAxis",new n.Vector3),o(this,"_lastAngle",0),o(this,"_zoomStart",new n.Vector2),o(this,"_zoomEnd",new n.Vector2),o(this,"_touchZoomDistanceStart",0),o(this,"_touchZoomDistanceEnd",0),o(this,"_panStart",new n.Vector2),o(this,"_panEnd",new n.Vector2),o(this,"target0"),o(this,"position0"),o(this,"up0"),o(this,"zoom0"),o(this,"changeEvent",{type:"change"}),o(this,"startEvent",{type:"start"}),o(this,"endEvent",{type:"end"}),o(this,"onScreenVector",new n.Vector2),o(this,"getMouseOnScreen",((t,e)=>(this.onScreenVector.set((t-this.screen.left)/this.screen.width,(e-this.screen.top)/this.screen.height),this.onScreenVector))),o(this,"onCircleVector",new n.Vector2),o(this,"getMouseOnCircle",((t,e)=>(this.onCircleVector.set((t-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-e))/this.screen.width),this.onCircleVector))),o(this,"axis",new n.Vector3),o(this,"quaternion",new n.Quaternion),o(this,"eyeDirection",new n.Vector3),o(this,"objectUpDirection",new n.Vector3),o(this,"objectSidewaysDirection",new n.Vector3),o(this,"moveDirection",new n.Vector3),o(this,"angle",0),o(this,"rotateCamera",(()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)})),o(this,"zoomCamera",(()=>{let t;if(this._state===this.STATE.TOUCH_ZOOM_PAN)t=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(t):this.object.isOrthographicCamera&&(this.object.zoom/=t,this.object.updateProjectionMatrix());else{if(t=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(t-1)>this.EPS&&t>0&&(this.object.isPerspectiveCamera?(t>1&&this._eye.length()>=this.maxDistance-this.EPS&&(t=1),this._eye.multiplyScalar(t)):this.object.isOrthographicCamera&&(t>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(t=1),this.object.zoom/=t)),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let e=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(e,this.target,t)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}})),o(this,"mouseChange",new n.Vector2),o(this,"objectUp",new n.Vector3),o(this,"pan",new n.Vector3),o(this,"panCamera",(()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const t=this.object,e=(t.right-t.left)/this.object.zoom,i=(t.top-t.bottom)/this.object.zoom;this.mouseChange.x*=e,this.mouseChange.y*=i}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}})),o(this,"checkDistances",(()=>{this.noZoom&&this.noPan||(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))})),o(this,"handleResize",(()=>{if(!this.domElement)return;const t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height})),o(this,"update",(()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera&&(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom))})),o(this,"reset",(()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom})),o(this,"keydown",(t=>{!1!==this.enabled&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(t.code!==this.keys[this.STATE.ROTATE]||this.noRotate?t.code!==this.keys[this.STATE.ZOOM]||this.noZoom?t.code!==this.keys[this.STATE.PAN]||this.noPan||(this._keyState=this.STATE.PAN):this._keyState=this.STATE.ZOOM:this._keyState=this.STATE.ROTATE))})),o(this,"onPointerDown",(t=>{if(!1!==this.enabled)switch(t.pointerType){case"mouse":case"pen":this.onMouseDown(t)}})),o(this,"onPointerMove",(t=>{if(!1!==this.enabled)switch(t.pointerType){case"mouse":case"pen":this.onMouseMove(t)}})),o(this,"onPointerUp",(t=>{if(!1!==this.enabled)switch(t.pointerType){case"mouse":case"pen":this.onMouseUp()}})),o(this,"keyup",(()=>{!1!==this.enabled&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))})),o(this,"onMouseDown",(t=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(t.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN}const e=this._keyState!==this.STATE.NONE?this._keyState:this._state;e!==this.STATE.ROTATE||this.noRotate?e!==this.STATE.ZOOM||this.noZoom?e!==this.STATE.PAN||this.noPan||(this._panStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._panEnd.copy(this._panStart)):(this._zoomStart.copy(this.getMouseOnScreen(t.pageX,t.pageY)),this._zoomEnd.copy(this._zoomStart)):(this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY)),this._movePrev.copy(this._moveCurr)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)})),o(this,"onMouseMove",(t=>{if(!1===this.enabled)return;const e=this._keyState!==this.STATE.NONE?this._keyState:this._state;e!==this.STATE.ROTATE||this.noRotate?e!==this.STATE.ZOOM||this.noZoom?e!==this.STATE.PAN||this.noPan||this._panEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)):this._zoomEnd.copy(this.getMouseOnScreen(t.pageX,t.pageY)):(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.pageX,t.pageY)))})),o(this,"onMouseUp",(()=>{this.domElement&&!1!==this.enabled&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))})),o(this,"mousewheel",(t=>{if(!1!==this.enabled&&!0!==this.noZoom){switch(t.preventDefault(),t.deltaMode){case 2:this._zoomStart.y-=.025*t.deltaY;break;case 1:this._zoomStart.y-=.01*t.deltaY;break;default:this._zoomStart.y-=25e-5*t.deltaY}this.mousePosition.x=t.offsetX/this.screen.width*2-1,this.mousePosition.y=-t.offsetY/this.screen.height*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}})),o(this,"touchstart",(t=>{if(!1!==this.enabled){if(t.preventDefault(),1===t.touches.length)this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr);else{this._state=this.STATE.TOUCH_ZOOM_PAN;const e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+i*i);const n=(t.touches[0].pageX+t.touches[1].pageX)/2,s=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(n,s)),this._panEnd.copy(this._panStart)}this.dispatchEvent(this.startEvent)}})),o(this,"touchmove",(t=>{if(!1!==this.enabled)if(t.preventDefault(),1===t.touches.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY));else{const e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(e*e+i*i);const n=(t.touches[0].pageX+t.touches[1].pageX)/2,s=(t.touches[0].pageY+t.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(n,s))}})),o(this,"touchend",(t=>{if(!1!==this.enabled){switch(t.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(t.touches[0].pageX,t.touches[0].pageY)),this._movePrev.copy(this._moveCurr)}this.dispatchEvent(this.endEvent)}})),o(this,"contextmenu",(t=>{!1!==this.enabled&&t.preventDefault()})),o(this,"connect",(t=>{document,this.domElement=t,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()})),o(this,"dispose",(()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))})),this.object=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,void 0!==e&&this.connect(e),this.update()}}},WLLx:(t,e,i)=>{"use strict";var n=i("q1tI"),s=i("at8e"),r="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},o=s.useSyncExternalStore,a=n.useRef,h=n.useEffect,A=n.useMemo,c=n.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,i,n,s){var l=a(null);if(null===l.current){var u={hasValue:!1,value:null};l.current=u}else u=l.current;l=A((function(){function t(t){if(!h){if(h=!0,o=t,t=n(t),void 0!==s&&u.hasValue){var e=u.value;if(s(e,t))return a=e}return a=t}if(e=a,r(o,t))return e;var i=n(t);return void 0!==s&&s(e,i)?(o=t,e):(o=t,a=i)}var o,a,h=!1,A=void 0===i?null:i;return[function(){return t(e())},null===A?void 0:function(){return t(A())}]}),[e,i,n,s]);var d=o(t,l[0],l[1]);return h((function(){u.hasValue=!0,u.value=d}),[d]),c(d),d}},WYqX:(t,e,i)=>{"use strict";i.d(e,{v:()=>s});var n=i("+sZi");class s extends n.n{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const e=t.length-3,i=new Float32Array(2*e);for(let n=0;n<e;n+=3)i[2*n]=t[n],i[2*n+1]=t[n+1],i[2*n+2]=t[n+2],i[2*n+3]=t[n+3],i[2*n+4]=t[n+4],i[2*n+5]=t[n+5];return super.setPositions(i),this}setColors(t,e=3){const i=t.length-e,n=new Float32Array(2*i);if(3===e)for(let s=0;s<i;s+=e)n[2*s]=t[s],n[2*s+1]=t[s+1],n[2*s+2]=t[s+2],n[2*s+3]=t[s+3],n[2*s+4]=t[s+4],n[2*s+5]=t[s+5];else for(let s=0;s<i;s+=e)n[2*s]=t[s],n[2*s+1]=t[s+1],n[2*s+2]=t[s+2],n[2*s+3]=t[s+3],n[2*s+4]=t[s+4],n[2*s+5]=t[s+5],n[2*s+6]=t[s+6],n[2*s+7]=t[s+7];return super.setColors(n,e),this}fromLine(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}}},XM0D:(t,e,i)=>{"use strict";i.d(e,{Q:()=>s});var n=Object.defineProperty;class s{constructor(){var t;((t,e,i)=>{e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(this,"symbol"!==typeof(t="_listeners")?t+"":t,undefined)}addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t);t.target=null}}}},aqsf:(t,e,i)=>{"use strict";i.d(e,{W:()=>h});var n=i("jBc9"),s=i("XM0D"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);const a=new n.Vector3;class h extends s.Q{constructor(t,e){super(),o(this,"object"),o(this,"domElement"),o(this,"enabled",!0),o(this,"movementSpeed",1),o(this,"lookSpeed",.005),o(this,"lookVertical",!0),o(this,"autoForward",!1),o(this,"activeLook",!0),o(this,"heightSpeed",!1),o(this,"heightCoef",1),o(this,"heightMin",0),o(this,"heightMax",1),o(this,"constrainVertical",!1),o(this,"verticalMin",0),o(this,"verticalMax",Math.PI),o(this,"mouseDragOn",!1),o(this,"autoSpeedFactor",0),o(this,"mouseX",0),o(this,"mouseY",0),o(this,"moveForward",!1),o(this,"moveBackward",!1),o(this,"moveLeft",!1),o(this,"moveRight",!1),o(this,"moveUp",!1),o(this,"moveDown",!1),o(this,"viewHalfX",0),o(this,"viewHalfY",0),o(this,"lat",0),o(this,"lon",0),o(this,"lookDirection",new n.Vector3),o(this,"spherical",new n.Spherical),o(this,"target",new n.Vector3),o(this,"connect",(t=>{t.setAttribute("tabindex","-1"),t.style.touchAction="none",t.addEventListener("contextmenu",this.contextmenu),t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),this.domElement=t,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()})),o(this,"dispose",(()=>{var t,e,i,n;null==(t=this.domElement)||t.removeEventListener("contextmenu",this.contextmenu),null==(e=this.domElement)||e.removeEventListener("mousedown",this.onMouseDown),null==(i=this.domElement)||i.removeEventListener("mousemove",this.onMouseMove),null==(n=this.domElement)||n.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)})),o(this,"handleResize",(()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)})),o(this,"onMouseDown",(t=>{var e;if(null==(e=this.domElement)||e.focus(),this.activeLook)switch(t.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0})),o(this,"onMouseUp",(t=>{if(this.activeLook)switch(t.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1})),o(this,"onMouseMove",(t=>{this.domElement&&(this.mouseX=t.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=t.pageY-this.domElement.offsetTop-this.viewHalfY)})),o(this,"onKeyDown",(t=>{switch(t.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0}})),o(this,"onKeyUp",(t=>{switch(t.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1}})),o(this,"lookAt",((t,e,i)=>(t instanceof n.Vector3?this.target.copy(t):e&&i&&this.target.set(t,e,i),this.object.lookAt(this.target),this.setOrientation(),this))),o(this,"update",(t=>{if(!this.enabled)return;if(this.heightSpeed){const e=n.MathUtils.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=t*(e*this.heightCoef)}else this.autoSpeedFactor=0;const e=t*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(e+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(e),this.moveLeft&&this.object.translateX(-e),this.moveRight&&this.object.translateX(e),this.moveUp&&this.object.translateY(e),this.moveDown&&this.object.translateY(-e);let i=t*this.lookSpeed;this.activeLook||(i=0);let s=1;this.constrainVertical&&(s=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*i,this.lookVertical&&(this.lat-=this.mouseY*i*s),this.lat=Math.max(-85,Math.min(85,this.lat));let r=n.MathUtils.degToRad(90-this.lat);const o=n.MathUtils.degToRad(this.lon);this.constrainVertical&&(r=n.MathUtils.mapLinear(r,0,Math.PI,this.verticalMin,this.verticalMax));const h=this.object.position;a.setFromSphericalCoords(1,r,o).add(h),this.object.lookAt(a)})),o(this,"contextmenu",(t=>t.preventDefault())),o(this,"setOrientation",(()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-n.MathUtils.radToDeg(this.spherical.phi),this.lon=n.MathUtils.radToDeg(this.spherical.theta)})),this.object=t,this.domElement=e,this.setOrientation(),e&&this.connect(e)}}},at8e:(t,e,i)=>{"use strict";t.exports=i("tImg")},bXbU:(t,e,i)=>{"use strict";i.d(e,{w:()=>d});var n=i("jBc9"),s=i(null);function r(t,e,i){const n=i.length-t-1;if(e>=i[n])return n-1;if(e<=i[t])return t;let s=t,r=n,o=Math.floor((s+r)/2);for(;e<i[o]||e>=i[o+1];)e<i[o]?r=o:s=o,o=Math.floor((s+r)/2);return o}function o(t,e){let i=1;for(let s=2;s<=t;++s)i*=s;let n=1;for(let s=2;s<=e;++s)n*=s;for(let s=2;s<=t-e;++s)n*=s;return i/n}class a extends n.Curve{constructor(t,e,i,s,r){super(),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=s||0,this.endKnot=r||this.knots.length-1;for(let o=0;o<i.length;++o){const t=i[o];this.controlPoints[o]=new n.Vector4(t.x,t.y,t.z,t.w)}}getPoint(t,e){const i=e||new n.Vector3,s=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=function(t,e,i,s){const o=r(t,s,e),a=function(t,e,i,n){const s=[],r=[],o=[];s[0]=1;for(let a=1;a<=i;++a){r[a]=e-n[t+1-a],o[a]=n[t+a]-e;let i=0;for(let t=0;t<a;++t){const e=o[t+1],n=r[a-t],h=s[t]/(e+n);s[t]=i+e*h,i=n*h}s[a]=i}return s}(o,s,t,e),h=new n.Vector4(0,0,0,0);for(let n=0;n<=t;++n){const e=i[o-t+n],s=a[n],r=e.w*s;h.x+=e.x*r,h.y+=e.y*r,h.z+=e.z*r,h.w+=e.w*s}return h}(this.degree,this.knots,this.controlPoints,s);return 1!=o.w&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(t,e){const i=e||new n.Vector3,s=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),a=function(t,e,i,s){const a=function(t,e,i,s){const o=1<t?1:t,a=[],h=r(t,s,e),A=function(t,e,i,n,s){const r=[];for(let l=0;l<=i;++l)r[l]=0;const o=[];for(let l=0;l<=n;++l)o[l]=r.slice(0);const a=[];for(let l=0;l<=i;++l)a[l]=r.slice(0);a[0][0]=1;const h=r.slice(0),A=r.slice(0);for(let l=1;l<=i;++l){h[l]=e-s[t+1-l],A[l]=s[t+l]-e;let i=0;for(let t=0;t<l;++t){const e=A[t+1],n=h[l-t];a[l][t]=e+n;const s=a[t][l-1]/a[l][t];a[t][l]=i+e*s,i=n*s}a[l][l]=i}for(let l=0;l<=i;++l)o[0][l]=a[l][i];for(let l=0;l<=i;++l){let t=0,e=1;const s=[];for(let n=0;n<=i;++n)s[n]=r.slice(0);s[0][0]=1;for(let r=1;r<=n;++r){let n=0;const h=l-r,A=i-r;l>=r&&(s[e][0]=s[t][0]/a[A+1][h],n=s[e][0]*a[h][A]);const c=l-1<=A?r-1:i-l;for(let i=h>=-1?1:-h;i<=c;++i)s[e][i]=(s[t][i]-s[t][i-1])/a[A+1][h+i],n+=s[e][i]*a[h+i][A];l<=A&&(s[e][r]=-s[t][r-1]/a[A+1][l],n+=s[e][r]*a[l][A]),o[r][l]=n;const u=t;t=e,e=u}}let c=i;for(let l=1;l<=n;++l){for(let t=0;t<=i;++t)o[l][t]*=c;c*=i-l}return o}(h,s,t,o,e),c=[];for(let n=0;n<i.length;++n){const t=i[n].clone(),e=t.w;t.x*=e,t.y*=e,t.z*=e,c[n]=t}for(let n=0;n<=o;++n){const e=c[h-t].clone().multiplyScalar(A[n][0]);for(let i=1;i<=t;++i)e.add(c[h-t+i].clone().multiplyScalar(A[n][i]));a[n]=e}for(let r=o+1;r<=2;++r)a[r]=new n.Vector4(0,0,0);return a}(t,e,i,s);return function(t){const e=t.length,i=[],s=[];for(let o=0;o<e;++o){const e=t[o];i[o]=new n.Vector3(e.x,e.y,e.z),s[o]=e.w}const r=[];for(let n=0;n<e;++n){const t=i[n].clone();for(let e=1;e<=n;++e)t.sub(r[n-e].clone().multiplyScalar(o(n,e)*s[e]));r[n]=t.divideScalar(s[0])}return r}(a)}(this.degree,this.knots,this.controlPoints,s);return i.copy(a[1]).normalize(),i}}var h=i(null),A=i(null);let c,l,u;class d extends n.Loader{constructor(t){super(t)}load(t,e,i,s){const r=this,o=""===r.path?n.LoaderUtils.extractUrlBase(t):r.path,a=new n.FileLoader(this.manager);a.setPath(r.path),a.setResponseType("arraybuffer"),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,(function(i){try{e(r.parse(i,o))}catch(n){s&&s(n),r.manager.itemError(t)}}),i,s)}parse(t,e){if((i=t).byteLength>=21&&"Kaydara FBX Binary  \0"===Q(i,0,21))c=(new C).parse(t);else{const e=Q(t);if(!function(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let i=0;function n(e){const n=t[e-1];return t=t.slice(i+e),i++,n}for(let s=0;s<e.length;++s)if(n(1)===e[s])return!1;return!0}(e))throw new Error("THREE.FBXLoader: Unknown format.");if(E(e)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+E(e));c=(new m).parse(e)}var i;const s=new n.TextureLoader(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);return new p(s,this.manager).parse(c)}}class p{constructor(t,e){this.textureLoader=t,this.manager=e}parse(){l=this.parseConnections();const t=this.parseImages(),e=this.parseTextures(t),i=this.parseMaterials(e),n=this.parseDeformers(),s=(new f).parse(n);return this.parseScene(n,s,i),u}parseConnections(){const t=new Map;return"Connections"in c&&c.Connections.connections.forEach((function(e){const i=e[0],n=e[1],s=e[2];t.has(i)||t.set(i,{parents:[],children:[]});const r={ID:n,relationship:s};t.get(i).parents.push(r),t.has(n)||t.set(n,{parents:[],children:[]});const o={ID:i,relationship:s};t.get(n).children.push(o)})),t}parseImages(){const t={},e={};if("Video"in c.Objects){const i=c.Objects.Video;for(const n in i){const s=i[n];if(t[parseInt(n)]=s.RelativeFilename||s.Filename,"Content"in s){const t=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,r="string"===typeof s.Content&&""!==s.Content;if(t||r){const t=this.parseImage(i[n]);e[s.RelativeFilename||s.Filename]=t}}}}for(const i in t){const n=t[i];void 0!==e[n]?t[i]=e[n]:t[i]=t[i].split("\\").pop()}return t}parseImage(t){const e=t.Content,i=t.RelativeFilename||t.Filename;let n;switch(i.slice(i.lastIndexOf(".")+1).toLowerCase()){case"bmp":n="image/bmp";break;case"jpg":case"jpeg":n="image/jpeg";break;case"png":n="image/png";break;case"tif":n="image/tiff";break;case"tga":this.manager.getHandler(".tga"),n="image/tga";break;default:return}if("string"===typeof e)return"data:"+n+";base64,"+e;{const t=new Uint8Array(e);return window.URL.createObjectURL(new Blob([t],{type:n}))}}parseTextures(t){const e=new Map;if("Texture"in c.Objects){const i=c.Objects.Texture;for(const n in i){const s=this.parseTexture(i[n],t);e.set(parseInt(n),s)}}return e}parseTexture(t,e){const i=this.loadTexture(t,e);i.ID=t.id,i.name=t.attrName;const s=t.WrapModeU,r=t.WrapModeV,o=void 0!==s?s.value:0,a=void 0!==r?r.value:0;if(i.wrapS=0===o?n.RepeatWrapping:n.ClampToEdgeWrapping,i.wrapT=0===a?n.RepeatWrapping:n.ClampToEdgeWrapping,"Scaling"in t){const e=t.Scaling.value;i.repeat.x=e[0],i.repeat.y=e[1]}return i}loadTexture(t,e){let i;const s=this.textureLoader.path,r=l.get(t.id).children;let o;void 0!==r&&r.length>0&&void 0!==e[r[0].ID]&&(i=e[r[0].ID],0!==i.indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));const a=t.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?o=new n.Texture:(t.setPath(this.textureLoader.path),o=t.load(i))}else o="psd"===a?new n.Texture:this.textureLoader.load(i);return this.textureLoader.setPath(s),o}parseMaterials(t){const e=new Map;if("Material"in c.Objects){const i=c.Objects.Material;for(const n in i){const s=this.parseMaterial(i[n],t);null!==s&&e.set(parseInt(n),s)}}return e}parseMaterial(t,e){const i=t.id,s=t.attrName;let r=t.ShadingModel;if("object"===typeof r&&(r=r.value),!l.has(i))return null;const o=this.parseParameters(t,e,i);let a;switch(r.toLowerCase()){case"phong":default:a=new n.MeshPhongMaterial;break;case"lambert":a=new n.MeshLambertMaterial}return a.setValues(o),a.name=s,a}parseParameters(t,e,i){const s={};t.BumpFactor&&(s.bumpScale=t.BumpFactor.value),t.Diffuse?s.color=(new n.Color).fromArray(t.Diffuse.value):!t.DiffuseColor||"Color"!==t.DiffuseColor.type&&"ColorRGB"!==t.DiffuseColor.type||(s.color=(new n.Color).fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(s.displacementScale=t.DisplacementFactor.value),t.Emissive?s.emissive=(new n.Color).fromArray(t.Emissive.value):!t.EmissiveColor||"Color"!==t.EmissiveColor.type&&"ColorRGB"!==t.EmissiveColor.type||(s.emissive=(new n.Color).fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(s.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(s.opacity=parseFloat(t.Opacity.value)),s.opacity<1&&(s.transparent=!0),t.ReflectionFactor&&(s.reflectivity=t.ReflectionFactor.value),t.Shininess&&(s.shininess=t.Shininess.value),t.Specular?s.specular=(new n.Color).fromArray(t.Specular.value):t.SpecularColor&&"Color"===t.SpecularColor.type&&(s.specular=(new n.Color).fromArray(t.SpecularColor.value));const r=this;return l.get(i).children.forEach((function(t){switch(t.relationship){case"Bump":s.bumpMap=r.getTexture(e,t.ID);break;case"Maya|TEX_ao_map":s.aoMap=r.getTexture(e,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=r.getTexture(e,t.ID),void 0!==s.map&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=r.getTexture(e,t.ID);break;case"EmissiveColor":s.emissiveMap=r.getTexture(e,t.ID),void 0!==s.emissiveMap&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=r.getTexture(e,t.ID);break;case"ReflectionColor":s.envMap=r.getTexture(e,t.ID),void 0!==s.envMap&&(s.envMap.mapping=n.EquirectangularReflectionMapping,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=r.getTexture(e,t.ID),void 0!==s.specularMap&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=r.getTexture(e,t.ID),s.transparent=!0}})),s}getTexture(t,e){return"LayeredTexture"in c.Objects&&e in c.Objects.LayeredTexture&&(e=l.get(e).children[0].ID),t.get(e)}parseDeformers(){const t={},e={};if("Deformer"in c.Objects){const i=c.Objects.Deformer;for(const n in i){const s=i[n],r=l.get(parseInt(n));if("Skin"===s.attrType){const e=this.parseSkeleton(r,i);e.ID=n,r.parents.length,e.geometryID=r.parents[0].ID,t[n]=e}else if("BlendShape"===s.attrType){const t={id:n};t.rawTargets=this.parseMorphTargets(r,i),t.id=n,r.parents.length,e[n]=t}}}return{skeletons:t,morphTargets:e}}parseSkeleton(t,e){const i=[];return t.children.forEach((function(t){const s=e[t.ID];if("Cluster"!==s.attrType)return;const r={ID:t.ID,indices:[],weights:[],transformLink:(new n.Matrix4).fromArray(s.TransformLink.a)};"Indexes"in s&&(r.indices=s.Indexes.a,r.weights=s.Weights.a),i.push(r)})),{rawBones:i,bones:[]}}parseMorphTargets(t,e){const i=[];for(let n=0;n<t.children.length;n++){const s=t.children[n],r=e[s.ID],o={name:r.attrName,initialWeight:r.DeformPercent,id:r.id,fullWeights:r.FullWeights.a};if("BlendShapeChannel"!==r.attrType)return;o.geoID=l.get(parseInt(s.ID)).children.filter((function(t){return void 0===t.relationship}))[0].ID,i.push(o)}return i}parseScene(t,e,i){u=new n.Group;const s=this.parseModels(t.skeletons,e,i),r=c.Objects.Model,o=this;s.forEach((function(t){const e=r[t.ID];o.setLookAtProperties(t,e),l.get(t.ID).parents.forEach((function(e){const i=s.get(e.ID);void 0!==i&&i.add(t)})),null===t.parent&&u.add(t)})),this.bindSkeleton(t.skeletons,e,s),this.createAmbientLight(),u.traverse((function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrix=t.parent.matrix,t.userData.transformData.parentMatrixWorld=t.parent.matrixWorld);const e=x(t.userData.transformData);t.applyMatrix4(e),t.updateWorldMatrix()}}));const a=(new g).parse();1===u.children.length&&u.children[0].isGroup&&(u.children[0].animations=a,u=u.children[0]),u.animations=a}parseModels(t,e,i){const s=new Map,r=c.Objects.Model;for(const o in r){const a=parseInt(o),h=r[o],A=l.get(a);let c=this.buildSkeleton(A,t,a,h.attrName);if(!c){switch(h.attrType){case"Camera":c=this.createCamera(A);break;case"Light":c=this.createLight(A);break;case"Mesh":c=this.createMesh(A,e,i);break;case"NurbsCurve":c=this.createCurve(A,e);break;case"LimbNode":case"Root":c=new n.Bone;break;default:c=new n.Group}c.name=h.attrName?n.PropertyBinding.sanitizeNodeName(h.attrName):"",c.ID=a}this.getTransformData(c,h),s.set(a,c)}return s}buildSkeleton(t,e,i,s){let r=null;return t.parents.forEach((function(t){for(const o in e){const a=e[o];a.rawBones.forEach((function(e,o){if(e.ID===t.ID){const t=r;r=new n.Bone,r.matrixWorld.copy(e.transformLink),r.name=s?n.PropertyBinding.sanitizeNodeName(s):"",r.ID=i,a.bones[o]=r,null!==t&&r.add(t)}}))}})),r}createCamera(t){let e,i;if(t.children.forEach((function(t){const e=c.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)})),void 0===i)e=new n.Object3D;else{let t=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(t=1);let s=1;void 0!==i.NearPlane&&(s=i.NearPlane.value/1e3);let r=1e3;void 0!==i.FarPlane&&(r=i.FarPlane.value/1e3);let o=window.innerWidth,a=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(o=i.AspectWidth.value,a=i.AspectHeight.value);const h=o/a;let A=45;void 0!==i.FieldOfView&&(A=i.FieldOfView.value);const c=i.FocalLength?i.FocalLength.value:null;switch(t){case 0:e=new n.PerspectiveCamera(A,h,s,r),null!==c&&e.setFocalLength(c);break;case 1:e=new n.OrthographicCamera(-o/2,o/2,a/2,-a/2,s,r);break;default:e=new n.Object3D}}return e}createLight(t){let e,i;if(t.children.forEach((function(t){const e=c.Objects.NodeAttribute[t.ID];void 0!==e&&(i=e)})),void 0===i)e=new n.Object3D;else{let t;t=void 0===i.LightType?0:i.LightType.value;let s=16777215;void 0!==i.Color&&(s=(new n.Color).fromArray(i.Color.value));let r=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(r=0);let o=0;void 0!==i.FarAttenuationEnd&&(o=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);const a=1;switch(t){case 0:e=new n.PointLight(s,r,o,a);break;case 1:e=new n.DirectionalLight(s,r);break;case 2:let t=Math.PI/3;void 0!==i.InnerAngle&&(t=n.MathUtils.degToRad(i.InnerAngle.value));let h=0;void 0!==i.OuterAngle&&(h=n.MathUtils.degToRad(i.OuterAngle.value),h=Math.max(h,1)),e=new n.SpotLight(s,r,o,t,h,a);break;default:e=new n.PointLight(s,r)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(e.castShadow=!0)}return e}createMesh(t,e,i){let s,r=null,o=null;const a=[];return t.children.forEach((function(t){e.has(t.ID)&&(r=e.get(t.ID)),i.has(t.ID)&&a.push(i.get(t.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new n.MeshPhongMaterial({color:13421772}),a.push(o)),"color"in r.attributes&&a.forEach((function(t){t.vertexColors=!0})),r.FBX_Deformer?(s=new n.SkinnedMesh(r,o),s.normalizeSkinWeights()):s=new n.Mesh(r,o),s}createCurve(t,e){const i=t.children.reduce((function(t,i){return e.has(i.ID)&&(t=e.get(i.ID)),t}),null),s=new n.LineBasicMaterial({color:3342591,linewidth:1});return new n.Line(i,s)}getTransformData(t,e){const i={};"InheritType"in e&&(i.inheritType=parseInt(e.InheritType.value)),i.eulerOrder="RotationOrder"in e?S(e.RotationOrder.value):"ZYX","Lcl_Translation"in e&&(i.translation=e.Lcl_Translation.value),"PreRotation"in e&&(i.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(i.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(i.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(i.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(i.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(i.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(i.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(i.rotationPivot=e.RotationPivot.value),t.userData.transformData=i}setLookAtProperties(t,e){"LookAtProperty"in e&&l.get(t.ID).children.forEach((function(e){if("LookAtProperty"===e.relationship){const i=c.Objects.Model[e.ID];if("Lcl_Translation"in i){const e=i.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(e),u.add(t.target)):t.lookAt((new n.Vector3).fromArray(e))}}}))}bindSkeleton(t,e,i){const s=this.parsePoseNodes();for(const r in t){const o=t[r];l.get(parseInt(o.ID)).parents.forEach((function(t){if(e.has(t.ID)){const e=t.ID;l.get(e).parents.forEach((function(t){i.has(t.ID)&&i.get(t.ID).bind(new n.Skeleton(o.bones),s[t.ID])}))}}))}}parsePoseNodes(){const t={};if("Pose"in c.Objects){const e=c.Objects.Pose;for(const i in e)if("BindPose"===e[i].attrType&&e[i].NbPoseNodes>0){const s=e[i].PoseNode;Array.isArray(s)?s.forEach((function(e){t[e.Node]=(new n.Matrix4).fromArray(e.Matrix.a)})):t[s.Node]=(new n.Matrix4).fromArray(s.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in c&&"AmbientColor"in c.GlobalSettings){const t=c.GlobalSettings.AmbientColor.value,e=t[0],i=t[1],s=t[2];if(0!==e||0!==i||0!==s){const t=new n.Color(e,i,s);u.add(new n.AmbientLight(t,1))}}}}class f{parse(t){const e=new Map;if("Geometry"in c.Objects){const i=c.Objects.Geometry;for(const n in i){const s=l.get(parseInt(n)),r=this.parseGeometry(s,i[n],t);e.set(parseInt(n),r)}}return e}parseGeometry(t,e,i){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,i);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometry(t,e,i){const n=i.skeletons,s=[],r=t.parents.map((function(t){return c.Objects.Model[t.ID]}));if(0===r.length)return;const o=t.children.reduce((function(t,e){return void 0!==n[e.ID]&&(t=n[e.ID]),t}),null);t.children.forEach((function(t){void 0!==i.morphTargets[t.ID]&&s.push(i.morphTargets[t.ID])}));const a=r[0],h={};"RotationOrder"in a&&(h.eulerOrder=S(a.RotationOrder.value)),"InheritType"in a&&(h.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(h.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(h.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(h.scale=a.GeometricScaling.value);const A=x(h);return this.genGeometry(e,o,s,A)}genGeometry(t,e,i,s){const r=new n.BufferGeometry;t.attrName&&(r.name=t.attrName);const o=this.parseGeoNode(t,e),a=this.genBuffers(o),h=new n.Float32BufferAttribute(a.vertex,3);if(h.applyMatrix4(s),r.setAttribute("position",h),a.colors.length>0&&r.setAttribute("color",new n.Float32BufferAttribute(a.colors,3)),e&&(r.setAttribute("skinIndex",new n.Uint16BufferAttribute(a.weightsIndices,4)),r.setAttribute("skinWeight",new n.Float32BufferAttribute(a.vertexWeights,4)),r.FBX_Deformer=e),a.normal.length>0){const t=(new n.Matrix3).getNormalMatrix(s),e=new n.Float32BufferAttribute(a.normal,3);e.applyNormalMatrix(t),r.setAttribute("normal",e)}if(a.uvs.forEach((function(t,e){"uv2"===A.D&&e++;const i=0===e?"uv":`uv${e}`;r.setAttribute(i,new n.Float32BufferAttribute(a.uvs[e],2))})),o.material&&"AllSame"!==o.material.mappingType){let t=a.materialIndex[0],e=0;if(a.materialIndex.forEach((function(i,n){i!==t&&(r.addGroup(e,n-e,t),t=i,e=n)})),r.groups.length>0){const e=r.groups[r.groups.length-1],i=e.start+e.count;i!==a.materialIndex.length&&r.addGroup(i,a.materialIndex.length-i,t)}0===r.groups.length&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,t,i,s),r}parseGeoNode(t,e){const i={};if(i.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],i.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(i.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(i.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(i.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){i.uv=[];let e=0;for(;t.LayerElementUV[e];)t.LayerElementUV[e].UV&&i.uv.push(this.parseUVs(t.LayerElementUV[e])),e++}return i.weightTable={},null!==e&&(i.skeleton=e,e.rawBones.forEach((function(t,e){t.indices.forEach((function(n,s){void 0===i.weightTable[n]&&(i.weightTable[n]=[]),i.weightTable[n].push({id:e,weight:t.weights[s]})}))}))),i}genBuffers(t){const e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,n=0,s=!1,r=[],o=[],a=[],h=[],A=[],c=[];const l=this;return t.vertexIndices.forEach((function(u,d){let p,f=!1;u<0&&(u=~u,f=!0);let g=[],m=[];if(r.push(3*u,3*u+1,3*u+2),t.color){const e=_(d,i,u,t.color);a.push(e[0],e[1],e[2])}if(t.skeleton){if(void 0!==t.weightTable[u]&&t.weightTable[u].forEach((function(t){m.push(t.weight),g.push(t.id)})),m.length>4){s||(s=!0);const t=[0,0,0,0],e=[0,0,0,0];m.forEach((function(i,n){let s=i,r=g[n];e.forEach((function(e,i,n){if(s>e){n[i]=s,s=e;const o=t[i];t[i]=r,r=o}}))})),g=t,m=e}for(;m.length<4;)m.push(0),g.push(0);for(let t=0;t<4;++t)A.push(m[t]),c.push(g[t])}if(t.normal){const e=_(d,i,u,t.normal);o.push(e[0],e[1],e[2])}t.material&&"AllSame"!==t.material.mappingType&&(p=_(d,i,u,t.material)[0]),t.uv&&t.uv.forEach((function(t,e){const n=_(d,i,u,t);void 0===h[e]&&(h[e]=[]),h[e].push(n[0]),h[e].push(n[1])})),n++,f&&(l.genFace(e,t,r,p,o,a,h,A,c,n),i++,n=0,r=[],o=[],a=[],h=[],A=[],c=[])})),e}genFace(t,e,i,n,s,r,o,a,h,A){for(let c=2;c<A;c++)t.vertex.push(e.vertexPositions[i[0]]),t.vertex.push(e.vertexPositions[i[1]]),t.vertex.push(e.vertexPositions[i[2]]),t.vertex.push(e.vertexPositions[i[3*(c-1)]]),t.vertex.push(e.vertexPositions[i[3*(c-1)+1]]),t.vertex.push(e.vertexPositions[i[3*(c-1)+2]]),t.vertex.push(e.vertexPositions[i[3*c]]),t.vertex.push(e.vertexPositions[i[3*c+1]]),t.vertex.push(e.vertexPositions[i[3*c+2]]),e.skeleton&&(t.vertexWeights.push(a[0]),t.vertexWeights.push(a[1]),t.vertexWeights.push(a[2]),t.vertexWeights.push(a[3]),t.vertexWeights.push(a[4*(c-1)]),t.vertexWeights.push(a[4*(c-1)+1]),t.vertexWeights.push(a[4*(c-1)+2]),t.vertexWeights.push(a[4*(c-1)+3]),t.vertexWeights.push(a[4*c]),t.vertexWeights.push(a[4*c+1]),t.vertexWeights.push(a[4*c+2]),t.vertexWeights.push(a[4*c+3]),t.weightsIndices.push(h[0]),t.weightsIndices.push(h[1]),t.weightsIndices.push(h[2]),t.weightsIndices.push(h[3]),t.weightsIndices.push(h[4*(c-1)]),t.weightsIndices.push(h[4*(c-1)+1]),t.weightsIndices.push(h[4*(c-1)+2]),t.weightsIndices.push(h[4*(c-1)+3]),t.weightsIndices.push(h[4*c]),t.weightsIndices.push(h[4*c+1]),t.weightsIndices.push(h[4*c+2]),t.weightsIndices.push(h[4*c+3])),e.color&&(t.colors.push(r[0]),t.colors.push(r[1]),t.colors.push(r[2]),t.colors.push(r[3*(c-1)]),t.colors.push(r[3*(c-1)+1]),t.colors.push(r[3*(c-1)+2]),t.colors.push(r[3*c]),t.colors.push(r[3*c+1]),t.colors.push(r[3*c+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(n),t.materialIndex.push(n),t.materialIndex.push(n)),e.normal&&(t.normal.push(s[0]),t.normal.push(s[1]),t.normal.push(s[2]),t.normal.push(s[3*(c-1)]),t.normal.push(s[3*(c-1)+1]),t.normal.push(s[3*(c-1)+2]),t.normal.push(s[3*c]),t.normal.push(s[3*c+1]),t.normal.push(s[3*c+2])),e.uv&&e.uv.forEach((function(e,i){void 0===t.uvs[i]&&(t.uvs[i]=[]),t.uvs[i].push(o[i][0]),t.uvs[i].push(o[i][1]),t.uvs[i].push(o[i][2*(c-1)]),t.uvs[i].push(o[i][2*(c-1)+1]),t.uvs[i].push(o[i][2*c]),t.uvs[i].push(o[i][2*c+1])}))}addMorphTargets(t,e,i,n){if(0===i.length)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const s=this;i.forEach((function(i){i.rawTargets.forEach((function(i){const r=c.Objects.Geometry[i.geoID];void 0!==r&&s.genMorphGeometry(t,e,r,n,i.name)}))}))}genMorphGeometry(t,e,i,s,r){const o=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],a=void 0!==i.Vertices?i.Vertices.a:[],h=void 0!==i.Indexes?i.Indexes.a:[],A=3*t.attributes.position.count,c=new Float32Array(A);for(let n=0;n<h.length;n++){const t=3*h[n];c[t]=a[3*n],c[t+1]=a[3*n+1],c[t+2]=a[3*n+2]}const l={vertexIndices:o,vertexPositions:c},u=this.genBuffers(l),d=new n.Float32BufferAttribute(u.vertex,3);d.name=r||i.attrName,d.applyMatrix4(s),t.morphAttributes.position.push(d)}parseNormals(t){const e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.Normals.a;let s=[];return"IndexToDirect"===i&&("NormalIndex"in t?s=t.NormalIndex.a:"NormalsIndex"in t&&(s=t.NormalsIndex.a)),{dataSize:3,buffer:n,indices:s,mappingType:e,referenceType:i}}parseUVs(t){const e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.UV.a;let s=[];return"IndexToDirect"===i&&(s=t.UVIndex.a),{dataSize:2,buffer:n,indices:s,mappingType:e,referenceType:i}}parseVertexColors(t){const e=t.MappingInformationType,i=t.ReferenceInformationType,n=t.Colors.a;let s=[];return"IndexToDirect"===i&&(s=t.ColorIndex.a),{dataSize:4,buffer:n,indices:s,mappingType:e,referenceType:i}}parseMaterialIndices(t){const e=t.MappingInformationType,i=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const n=t.Materials.a,s=[];for(let r=0;r<n.length;++r)s.push(r);return{dataSize:1,buffer:n,indices:s,mappingType:e,referenceType:i}}parseNurbsGeometry(t){if(void 0===a)return new n.BufferGeometry;const e=parseInt(t.Order);if(isNaN(e))return new n.BufferGeometry;const i=e-1,s=t.KnotVector.a,r=[],o=t.Points.a;for(let a=0,l=o.length;a<l;a+=4)r.push((new n.Vector4).fromArray(o,a));let h,A;if("Closed"===t.Form)r.push(r[0]);else if("Periodic"===t.Form){h=i,A=s.length-1-h;for(let t=0;t<i;++t)r.push(r[t])}const c=new a(i,s,r,h,A).getPoints(12*r.length);return(new n.BufferGeometry).setFromPoints(c)}}class g{parse(){const t=[],e=this.parseClips();if(void 0!==e)for(const i in e){const n=e[i],s=this.addClip(n);t.push(s)}return t}parseClips(){if(void 0===c.Objects.AnimationCurve)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const e=this.parseAnimationLayers(t);return this.parseAnimStacks(e)}parseAnimationCurveNodes(){const t=c.Objects.AnimationCurveNode,e=new Map;for(const i in t){const n=t[i];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){const t={id:n.id,attr:n.attrName,curves:{}};e.set(t.id,t)}}return e}parseAnimationCurves(t){const e=c.Objects.AnimationCurve;for(const i in e){const n={id:e[i].id,times:e[i].KeyTime.a.map(y),values:e[i].KeyValueFloat.a},s=l.get(n.id);if(void 0!==s){const e=s.parents[0].ID,i=s.parents[0].relationship;i.match(/X/)?t.get(e).curves.x=n:i.match(/Y/)?t.get(e).curves.y=n:i.match(/Z/)?t.get(e).curves.z=n:i.match(/d|DeformPercent/)&&t.has(e)&&(t.get(e).curves.morph=n)}}}parseAnimationLayers(t){const e=c.Objects.AnimationLayer,i=new Map;for(const s in e){const e=[],r=l.get(parseInt(s));void 0!==r&&(r.children.forEach((function(i,s){if(t.has(i.ID)){const r=t.get(i.ID);if(void 0!==r.curves.x||void 0!==r.curves.y||void 0!==r.curves.z){if(void 0===e[s]){const t=l.get(i.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID;if(void 0!==t){const i=c.Objects.Model[t.toString()];if(void 0===i)return;const r={modelName:i.attrName?n.PropertyBinding.sanitizeNodeName(i.attrName):"",ID:i.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};u.traverse((function(t){t.ID===i.id&&(r.transform=t.matrix,t.userData.transformData&&(r.eulerOrder=t.userData.transformData.eulerOrder))})),r.transform||(r.transform=new n.Matrix4),"PreRotation"in i&&(r.preRotation=i.PreRotation.value),"PostRotation"in i&&(r.postRotation=i.PostRotation.value),e[s]=r}}e[s]&&(e[s][r.attr]=r)}else if(void 0!==r.curves.morph){if(void 0===e[s]){const t=l.get(i.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID,r=l.get(t).parents[0].ID,o=l.get(r).parents[0].ID,a=l.get(o).parents[0].ID,h=c.Objects.Model[a],A={modelName:h.attrName?n.PropertyBinding.sanitizeNodeName(h.attrName):"",morphName:c.Objects.Deformer[t].attrName};e[s]=A}e[s][r.attr]=r}}})),i.set(parseInt(s),e))}return i}parseAnimStacks(t){const e=c.Objects.AnimationStack,i={};for(const n in e){const s=l.get(parseInt(n)).children;s.length;const r=t.get(s[0].ID);i[n]={name:e[n].attrName,layer:r}}return i}addClip(t){let e=[];const i=this;return t.layer.forEach((function(t){e=e.concat(i.generateTracks(t))})),new n.AnimationClip(t.name,-1,e)}generateTracks(t){const e=[];let i=new n.Vector3,s=new n.Quaternion,r=new n.Vector3;if(t.transform&&t.transform.decompose(i,s,r),i=i.toArray(),s=(new n.Euler).setFromQuaternion(s,t.eulerOrder).toArray(),r=r.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){const n=this.generateVectorTrack(t.modelName,t.T.curves,i,"position");void 0!==n&&e.push(n)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){const i=this.generateRotationTrack(t.modelName,t.R.curves,s,t.preRotation,t.postRotation,t.eulerOrder);void 0!==i&&e.push(i)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){const i=this.generateVectorTrack(t.modelName,t.S.curves,r,"scale");void 0!==i&&e.push(i)}if(void 0!==t.DeformPercent){const i=this.generateMorphTrack(t);void 0!==i&&e.push(i)}return e}generateVectorTrack(t,e,i,s){const r=this.getTimesForAllAxes(e),o=this.getKeyframeTrackValues(r,e,i);return new n.VectorKeyframeTrack(t+"."+s,r,o)}generateRotationTrack(t,e,i,s,r,o){void 0!==e.x&&(this.interpolateRotations(e.x),e.x.values=e.x.values.map(n.MathUtils.degToRad)),void 0!==e.y&&(this.interpolateRotations(e.y),e.y.values=e.y.values.map(n.MathUtils.degToRad)),void 0!==e.z&&(this.interpolateRotations(e.z),e.z.values=e.z.values.map(n.MathUtils.degToRad));const a=this.getTimesForAllAxes(e),h=this.getKeyframeTrackValues(a,e,i);void 0!==s&&((s=s.map(n.MathUtils.degToRad)).push(o),s=(new n.Euler).fromArray(s),s=(new n.Quaternion).setFromEuler(s)),void 0!==r&&((r=r.map(n.MathUtils.degToRad)).push(o),r=(new n.Euler).fromArray(r),r=(new n.Quaternion).setFromEuler(r).invert());const A=new n.Quaternion,c=new n.Euler,l=[];for(let n=0;n<h.length;n+=3)c.set(h[n],h[n+1],h[n+2],o),A.setFromEuler(c),void 0!==s&&A.premultiply(s),void 0!==r&&A.multiply(r),A.toArray(l,n/3*4);return new n.QuaternionKeyframeTrack(t+".quaternion",a,l)}generateMorphTrack(t){const e=t.DeformPercent.curves.morph,i=e.values.map((function(t){return t/100})),s=u.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new n.NumberKeyframeTrack(t.modelName+".morphTargetInfluences["+s+"]",e.times,i)}getTimesForAllAxes(t){let e=[];if(void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),e=e.sort((function(t,e){return t-e})),e.length>1){let t=1,i=e[0];for(let n=1;n<e.length;n++){const s=e[n];s!==i&&(e[t]=s,i=s,t++)}e=e.slice(0,t)}return e}getKeyframeTrackValues(t,e,i){const n=i,s=[];let r=-1,o=-1,a=-1;return t.forEach((function(t){if(e.x&&(r=e.x.times.indexOf(t)),e.y&&(o=e.y.times.indexOf(t)),e.z&&(a=e.z.times.indexOf(t)),-1!==r){const t=e.x.values[r];s.push(t),n[0]=t}else s.push(n[0]);if(-1!==o){const t=e.y.values[o];s.push(t),n[1]=t}else s.push(n[1]);if(-1!==a){const t=e.z.values[a];s.push(t),n[2]=t}else s.push(n[2])})),s}interpolateRotations(t){for(let e=1;e<t.values.length;e++){const i=t.values[e-1],n=t.values[e]-i,s=Math.abs(n);if(s>=180){const r=s/180,o=n/r;let a=i+o;const h=t.times[e-1],A=(t.times[e]-h)/r;let c=h+A;const l=[],u=[];for(;c<t.times[e];)l.push(c),c+=A,u.push(a),a+=o;t.times=D(t.times,e,l),t.values=D(t.values,e,u)}}}}class m{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new B,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const e=this,i=t.split(/[\r\n]+/);return i.forEach((function(t,n){const s=t.match(/^[\s\t]*;/),r=t.match(/^[\s\t]*$/);if(s||r)return;const o=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),a=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=t.match("^\\t{"+(e.currentIndent-1)+"}}");o?e.parseNodeBegin(t,o):a?e.parseNodeProperty(t,a,i[++n]):h?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)})),this.allNodes}parseNodeBegin(t,e){const i=e[1].trim().replace(/^"/,"").replace(/"$/,""),n=e[2].split(",").map((function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")})),s={name:i},r=this.parseNodeAttr(n),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,s):i in o?("PoseNode"===i?o.PoseNode.push(s):void 0!==o[i].id&&(o[i]={},o[i][o[i].id]=o[i]),""!==r.id&&(o[i][r.id]=s)):"number"===typeof r.id?(o[i]={},o[i][r.id]=s):"Properties70"!==i&&(o[i]="PoseNode"===i?[s]:s),"number"===typeof r.id&&(s.id=r.id),""!==r.name&&(s.attrName=r.name),""!==r.type&&(s.attrType=r.type),this.pushStack(s)}parseNodeAttr(t){let e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));let i="",n="";return t.length>1&&(i=t[1].replace(/^(\w+)::/,""),n=t[2]),{id:e,name:i,type:n}}parseNodeProperty(t,e,i){let n=e[1].replace(/^"/,"").replace(/"$/,"").trim(),s=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===s&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const r=this.getCurrentNode();if("Properties70"!==r.name){if("C"===n){const t=s.split(",").slice(1),e=parseInt(t[0]),i=parseInt(t[1]);let o=s.split(",").slice(3);o=o.map((function(t){return t.trim().replace(/^"/,"")})),n="connections",s=[e,i],function(t,e){for(let i=0,n=t.length,s=e.length;i<s;i++,n++)t[n]=e[i]}(s,o),void 0===r[n]&&(r[n]=[])}"Node"===n&&(r.id=s),n in r&&Array.isArray(r[n])?r[n].push(s):"a"!==n?r[n]=s:r.a=s,this.setCurrentProp(r,n),"a"===n&&","!==s.slice(-1)&&(r.a=M(s))}else this.parseNodeSpecialProperty(t,n,s)}parseNodePropertyContinued(t){const e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=M(e.a))}parseNodeSpecialProperty(t,e,i){const n=i.split('",').map((function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")})),s=n[0],r=n[1],o=n[2],a=n[3];let h=n[4];switch(r){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":h=parseFloat(h);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":h=M(h)}this.getPrevNode()[s]={type:r,type2:o,flag:a,value:h},this.setCurrentProp(this.getPrevNode(),s)}}class C{parse(t){const e=new v(t);e.skip(23);const i=e.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const n=new B;for(;!this.endOfContent(e);){const t=this.parseNode(e,i);null!==t&&n.add(t.name,t)}return n}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){const i={},n=e>=7500?t.getUint64():t.getUint32(),s=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();const r=t.getUint8(),o=t.getString(r);if(0===n)return null;const a=[];for(let l=0;l<s;l++)a.push(this.parseProperty(t));const h=a.length>0?a[0]:"",A=a.length>1?a[1]:"",c=a.length>2?a[2]:"";for(i.singleProperty=1===s&&t.getOffset()===n;n>t.getOffset();){const n=this.parseNode(t,e);null!==n&&this.parseSubNode(o,i,n)}return i.propertyList=a,"number"===typeof h&&(i.id=h),""!==A&&(i.attrName=A),""!==c&&(i.attrType=c),""!==o&&(i.name=o),i}parseSubNode(t,e,i){if(!0===i.singleProperty){const t=i.propertyList[0];Array.isArray(t)?(e[i.name]=i,i.a=t):e[i.name]=t}else if("Connections"===t&&"C"===i.name){const t=[];i.propertyList.forEach((function(e,i){0!==i&&t.push(e)})),void 0===e.connections&&(e.connections=[]),e.connections.push(t)}else if("Properties70"===i.name)Object.keys(i).forEach((function(t){e[t]=i[t]}));else if("Properties70"===t&&"P"===i.name){let t=i.propertyList[0],n=i.propertyList[1];const s=i.propertyList[2],r=i.propertyList[3];let o;0===t.indexOf("Lcl ")&&(t=t.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),o="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],e[t]={type:n,type2:s,flag:r,value:o}}else void 0===e[i.name]?"number"===typeof i.id?(e[i.name]={},e[i.name][i.id]=i):e[i.name]=i:"PoseNode"===i.name?(Array.isArray(e[i.name])||(e[i.name]=[e[i.name]]),e[i.name].push(i)):void 0===e[i.name][i.id]&&(e[i.name][i.id]=i)}parseProperty(t){const e=t.getString(1);let i;switch(e){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return i=t.getUint32(),t.getArrayBuffer(i);case"S":return i=t.getUint32(),t.getString(i);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const n=t.getUint32(),r=t.getUint32(),o=t.getUint32();if(0===r)switch(e){case"b":case"c":return t.getBooleanArray(n);case"d":return t.getFloat64Array(n);case"f":return t.getFloat32Array(n);case"i":return t.getInt32Array(n);case"l":return t.getInt64Array(n)}const a=(0,s.a8)(new Uint8Array(t.getArrayBuffer(o))),h=new v(a.buffer);switch(e){case"b":case"c":return h.getBooleanArray(n);case"d":return h.getFloat64Array(n);case"f":return h.getFloat32Array(n);case"i":return h.getInt32Array(n);case"l":return h.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+e)}}}class v{constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(t){const e=[];for(let i=0;i<t;i++)e.push(this.getBoolean());return e}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getInt32());return e}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e?(e=4294967295&~e,t=4294967295&~t,4294967295===t&&(e=e+1&4294967295),t=t+1&4294967295,-(4294967296*e+t)):4294967296*e+t}getInt64Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getInt64());return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getFloat32());return e}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getFloat64());return e}getArrayBuffer(t){const e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getString(t){let e=[];for(let n=0;n<t;n++)e[n]=this.getUint8();const i=e.indexOf(0);return i>=0&&(e=e.slice(0,i)),(0,h.g)(new Uint8Array(e))}}class B{add(t,e){this[t]=e}}function E(t){const e=t.match(/FBXVersion: (\d+)/);if(e)return parseInt(e[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function y(t){return t/46186158e3}const I=[];function _(t,e,i,n){let s;switch(n.mappingType){case"ByPolygonVertex":s=t;break;case"ByPolygon":s=e;break;case"ByVertice":s=i;break;case"AllSame":s=n.indices[0]}"IndexToDirect"===n.referenceType&&(s=n.indices[s]);const r=s*n.dataSize,o=r+n.dataSize;return function(t,e,i,n){for(let s=i,r=0;s<n;s++,r++)t[r]=e[s];return t}(I,n.buffer,r,o)}const w=new n.Euler,b=new n.Vector3;function x(t){const e=new n.Matrix4,i=new n.Matrix4,s=new n.Matrix4,r=new n.Matrix4,o=new n.Matrix4,a=new n.Matrix4,h=new n.Matrix4,A=new n.Matrix4,c=new n.Matrix4,l=new n.Matrix4,u=new n.Matrix4,d=new n.Matrix4,p=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(b.fromArray(t.translation)),t.preRotation){const e=t.preRotation.map(n.MathUtils.degToRad);e.push(t.eulerOrder),i.makeRotationFromEuler(w.fromArray(e))}if(t.rotation){const e=t.rotation.map(n.MathUtils.degToRad);e.push(t.eulerOrder),s.makeRotationFromEuler(w.fromArray(e))}if(t.postRotation){const e=t.postRotation.map(n.MathUtils.degToRad);e.push(t.eulerOrder),r.makeRotationFromEuler(w.fromArray(e)),r.invert()}t.scale&&o.scale(b.fromArray(t.scale)),t.scalingOffset&&h.setPosition(b.fromArray(t.scalingOffset)),t.scalingPivot&&a.setPosition(b.fromArray(t.scalingPivot)),t.rotationOffset&&A.setPosition(b.fromArray(t.rotationOffset)),t.rotationPivot&&c.setPosition(b.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(u.copy(t.parentMatrix),l.copy(t.parentMatrixWorld));const f=i.clone().multiply(s).multiply(r),g=new n.Matrix4;g.extractRotation(l);const m=new n.Matrix4;m.copyPosition(l);const C=m.clone().invert().multiply(l),v=g.clone().invert().multiply(C),B=o,E=new n.Matrix4;if(0===p)E.copy(g).multiply(f).multiply(v).multiply(B);else if(1===p)E.copy(g).multiply(v).multiply(f).multiply(B);else{const t=(new n.Matrix4).scale((new n.Vector3).setFromMatrixScale(u)).clone().invert(),e=v.clone().multiply(t);E.copy(g).multiply(f).multiply(e).multiply(B)}const y=c.clone().invert(),I=a.clone().invert();let _=e.clone().multiply(A).multiply(c).multiply(i).multiply(s).multiply(r).multiply(y).multiply(h).multiply(a).multiply(o).multiply(I);const x=(new n.Matrix4).copyPosition(_),S=l.clone().multiply(x);return d.copyPosition(S),_=d.clone().multiply(E),_.premultiply(l.invert()),_}function S(t){const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(t=t||0)?e[0]:e[t]}function M(t){return t.split(",").map((function(t){return parseFloat(t)}))}function Q(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),(0,h.g)(new Uint8Array(t,e,i))}function D(t,e,i){return t.slice(0,e).concat(i).concat(t.slice(e))}},bn0K:(t,e,i)=>{"use strict";i.d(e,{L:()=>r});var n=i("jBc9"),s=i("Ua9r");class r extends n.Mesh{constructor(t,e){var i,r;const o=(a=t)&&a.isCubeTexture;var a;const h=(null!=(r=o?null==(i=t.image[0])?void 0:i.width:t.image.width)?r:1024)/4,A=Math.floor(Math.log2(h)),c=Math.pow(2,A),l=[o?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH "+1/(3*Math.max(c,112)),"#define CUBEUV_TEXEL_HEIGHT "+1/(4*c),`#define CUBEUV_MAX_MIP ${A}.0`].join("\n")+`\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <${s.r>=154?"colorspace_fragment":"encodings_fragment"}>\n        }\n        `,u={map:{value:t},height:{value:(null==e?void 0:e.height)||15},radius:{value:(null==e?void 0:e.radius)||100}};super(new n.IcosahedronGeometry(1,16),new n.ShaderMaterial({uniforms:u,fragmentShader:l,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:n.DoubleSide}))}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}},cZpV:(t,e,i)=>{"use strict";i.d(e,{F:()=>a,o:()=>o});var n=i("jBc9"),s=Object.defineProperty,r=(t,e,i)=>(((t,e,i)=>{e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class o{constructor(){r(this,"enabled",!0),r(this,"needsSwap",!0),r(this,"clear",!1),r(this,"renderToScreen",!1)}setSize(t,e){}render(t,e,i,n,s){}dispose(){}}class a{constructor(t){r(this,"camera",new n.OrthographicCamera(-1,1,1,-1,0,1)),r(this,"geometry",new n.PlaneGeometry(2,2)),r(this,"mesh"),this.mesh=new n.Mesh(this.geometry,t)}get material(){return this.mesh.material}set material(t){this.mesh.material=t}dispose(){this.mesh.geometry.dispose()}render(t){t.render(this.mesh,this.camera)}}},caKH:(t,e,i)=>{"use strict";i.d(e,{eh:()=>n});const n=t=>(e,i,n)=>{const s=n.subscribe;return n.subscribe=(t,e,i)=>{let r=t;if(e){const s=(null==i?void 0:i.equalityFn)||Object.is;let o=t(n.getState());r=i=>{const n=t(i);if(!s(o,n)){const t=o;e(o=n,t)}},(null==i?void 0:i.fireImmediately)&&e(o,o)}return s(r)},t(e,i,n)}},dzHe:(t,e,i)=>{"use strict";function n(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{h(n.next(t))}catch(t){r(t)}}function a(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))}i.d(e,{Z:()=>d}),"function"==typeof SuppressedError&&SuppressedError;const s=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function r(t){return t.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const o="undefined"==typeof window,a=(()=>{if(o)return;const{userAgent:t,platform:e,maxTouchPoints:i}=window.navigator,n=/(iphone|ipod|ipad)/i.test(t),s="iPad"===e||"MacIntel"===e&&i>0&&!window.MSStream;return{isIpad:s,isMobile:/android/i.test(t)||n||s,isSafari12:/Version\/12.+Safari/.test(t),isFirefox:/Firefox/.test(t)}})();class h extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}const A=[],c=[];function l(t,e){if(t===e)return 0;const i=t;t.length>e.length&&(t=e,e=i);let n=t.length,s=e.length;for(;n>0&&t.charCodeAt(~-n)===e.charCodeAt(~-s);)n--,s--;let r,o=0;for(;o<n&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(n-=o,s-=o,0===n)return s;let a,h,l=0,u=0,d=0;for(;u<n;)c[u]=t.charCodeAt(o+u),A[u]=++u;for(;d<s;)for(r=e.charCodeAt(o+d),a=d++,l=d,u=0;u<n;u++)h=r===c[u]?a:a+1,a=A[u],l=A[u]=a>l?h>l?l+1:h:h>a?a+1:h;return l}function u(t){return null!=t}const d=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:i={},glContext:A,failIfMajorPerformanceCaveat:c=!1,benchmarksURL:d="https://unpkg.com/detect-gpu@5.0.70/dist/benchmarks"}={})=>n(void 0,void 0,void 0,(function*(){const p={};if(o)return{tier:0,type:"SSR"};const{isIpad:f=!!(null==a?void 0:a.isIpad),isMobile:g=!!(null==a?void 0:a.isMobile),screenSize:m=window.screen,loadBenchmarks:C=t=>n(void 0,void 0,void 0,(function*(){const e=yield fetch(`${d}/${t}`).then((t=>t.json()));if(parseInt(e.shift().split(".")[0],10)<4)throw new h("Detect GPU benchmark data is out of date. Please update to version 4x");return e}))}=i;let{renderer:v}=i;const B=(t,e,i,n,s)=>({device:s,fps:n,gpu:i,isMobile:g,tier:t,type:e});let E,y="";if(v)v=r(v),E=[v];else{const t=A||function(t,e=!1){const i={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:e,powerPreference:"high-performance",stencil:!1};t&&delete i.powerPreference;const n=window.document.createElement("canvas"),s=n.getContext("webgl",i)||n.getContext("experimental-webgl",i);return null!=s?s:void 0}(null==a?void 0:a.isSafari12,c);if(!t)return B(0,"WEBGL_UNSUPPORTED");const e=(null==a?void 0:a.isFirefox)?null:t.getExtension("WEBGL_debug_renderer_info");if(v=e?t.getParameter(e.UNMASKED_RENDERER_WEBGL):t.getParameter(t.RENDERER),!v)return B(1,"FALLBACK");y=v,v=r(v),E=function(t,e,i){return"apple gpu"===e?function(t,e,i){if(!i)return[e];const n=function(t){const e=t.createShader(35633),i=t.createShader(35632),n=t.createProgram();if(!(i&&e&&n))return;t.shaderSource(e,"\n    precision highp float;\n    attribute vec3 aPosition;\n    varying float vvv;\n    void main() {\n      vvv = 0.31622776601683794;\n      gl_Position = vec4(aPosition, 1.0);\n    }\n  "),t.shaderSource(i,"\n    precision highp float;\n    varying float vvv;\n    void main() {\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n      enc = fract(enc);\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n      gl_FragColor = enc;\n    }\n  "),t.compileShader(e),t.compileShader(i),t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.detachShader(n,e),t.detachShader(n,i),t.deleteShader(e),t.deleteShader(i),t.useProgram(n);const s=t.createBuffer();t.bindBuffer(34962,s),t.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const r=t.getAttribLocation(n,"aPosition");t.vertexAttribPointer(r,3,5126,!1,0,0),t.enableVertexAttribArray(r),t.clearColor(1,1,1,1),t.clear(16384),t.viewport(0,0,1,1),t.drawArrays(4,0,3);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,6408,5121,o),t.deleteProgram(n),t.deleteBuffer(s),o.join("")}(t),s="801621810",r="8016218135",o="80162181161",h=(null==a?void 0:a.isIpad)?[["a7",o,12],["a8",r,15],["a8x",r,15],["a9",r,15],["a9x",r,15],["a10",r,15],["a10x",r,15],["a12",s,15],["a12x",s,15],["a12z",s,15],["a14",s,15],["a15",s,15],["m1",s,15],["m2",s,15]]:[["a7",o,12],["a8",r,12],["a9",r,15],["a10",r,15],["a11",s,15],["a12",s,15],["a13",s,15],["a14",s,15],["a15",s,15],["a16",s,15],["a17",s,15]];let A;return"80162181255"===n?A=h.filter((([,,t])=>t>=14)):(A=h.filter((([,t])=>t===n)),A.length||(A=h)),A.map((([t])=>`apple ${t} gpu`))}(t,e,i):[e]}(t,v,g)}const I=(yield Promise.all(E.map((function(t){var e;return n(this,void 0,void 0,(function*(){const i=(t=>{const e=g?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const i of e)if(t.includes(i))return i})(t);if(!i)return;const n=`${g?"m":"d"}-${i}${f?"-ipad":""}.json`,s=p[n]=null!==(e=p[n])&&void 0!==e?e:C(n);let r;try{r=yield s}catch(i){if(i instanceof h)throw i;return}const o=function(t){var e;const i=(t=t.replace(/\([^)]+\)/,"")).match(/\d+/)||t.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!==(e=null==i?void 0:i.join("").replace(/\W|amd/g,""))&&void 0!==e?e:""}(t);let a=r.filter((([,t])=>t===o));a.length||(a=r.filter((([e])=>e.includes(t))));const A=a.length;if(0===A)return;const c=t.split(/[.,()\[\]/\s]/g).sort().filter(((t,e,i)=>0===e||t!==i[e-1])).join(" ");let u,[d,,,,v]=A>1?a.map((t=>[t,l(c,t[2])])).sort((([,t],[,e])=>t-e))[0][0]:a[0],B=Number.MAX_VALUE;const{devicePixelRatio:E}=window,y=m.width*E*m.height*E;for(const t of v){const[e,i]=t,n=e*i,s=Math.abs(y-n);s<B&&(B=s,u=t)}if(!u)return;const[,,I,_]=u;return[B,I,d,_]}))})))).filter(u).sort((([t=Number.MAX_VALUE,e],[i=Number.MAX_VALUE,n])=>t===i?e-n:t-i));if(!I.length){const t=s.find((t=>v.includes(t)));return t?B(0,"BLOCKLISTED",t):B(1,"FALLBACK",`${v} (${y})`)}const[,_,w,b]=I[0];if(-1===_)return B(0,"BLOCKLISTED",w,_,b);const x=g?t:e;let S=0;for(let t=0;t<x.length;t++)_>=x[t]&&(S=t);return B(S,"BENCHMARK",w,_,b)}))},eBGR:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i("jBc9"),s=i("XM0D"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);const a=new n.Euler(0,0,0,"YXZ"),h=new n.Vector3,A={type:"change"},c={type:"lock"},l={type:"unlock"},u=Math.PI/2;class d extends s.Q{constructor(t,e){super(),o(this,"camera"),o(this,"domElement"),o(this,"isLocked"),o(this,"minPolarAngle"),o(this,"maxPolarAngle"),o(this,"pointerSpeed"),o(this,"onMouseMove",(t=>{this.domElement&&!1!==this.isLocked&&(a.setFromQuaternion(this.camera.quaternion),a.y-=.002*t.movementX*this.pointerSpeed,a.x-=.002*t.movementY*this.pointerSpeed,a.x=Math.max(u-this.maxPolarAngle,Math.min(u-this.minPolarAngle,a.x)),this.camera.quaternion.setFromEuler(a),this.dispatchEvent(A))})),o(this,"onPointerlockChange",(()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(c),this.isLocked=!0):(this.dispatchEvent(l),this.isLocked=!1))})),o(this,"onPointerlockError",(()=>{})),o(this,"connect",(t=>{this.domElement=t||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))})),o(this,"disconnect",(()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))})),o(this,"dispose",(()=>{this.disconnect()})),o(this,"getObject",(()=>this.camera)),o(this,"direction",new n.Vector3(0,0,-1)),o(this,"getDirection",(t=>t.copy(this.direction).applyQuaternion(this.camera.quaternion))),o(this,"moveForward",(t=>{h.setFromMatrixColumn(this.camera.matrix,0),h.crossVectors(this.camera.up,h),this.camera.position.addScaledVector(h,t)})),o(this,"moveRight",(t=>{h.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(h,t)})),o(this,"lock",(()=>{this.domElement&&this.domElement.requestPointerLock()})),o(this,"unlock",(()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()})),this.camera=t,this.domElement=e,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,e&&this.connect(e)}}},eCu4:(t,e,i)=>{"use strict";i.d(e,{useGesture:()=>At});const n={toVector:(t,e)=>(void 0===t&&(t=e),Array.isArray(t)?t:[t,t]),add:(t,e)=>[t[0]+e[0],t[1]+e[1]],sub:(t,e)=>[t[0]-e[0],t[1]-e[1]],addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function s(t,e,i){return 0===e||Math.abs(e)===1/0?Math.pow(t,5*i):t*e*i/(e+i*t)}function r(t,e,i,n=.15){return 0===n?function(t,e,i){return Math.max(e,Math.min(t,i))}(t,e,i):t<e?-s(e-t,i-e,n)+e:t>i?+s(t-i,i-e,n)+i:t}function o(t,e,i){return(e=function(t){var e=function(t){if("object"!==typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!==typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const A={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function c(t){return t?t[0].toUpperCase()+t.slice(1):""}const l=["enter","leave"],u=["gotpointercapture","lostpointercapture"];function d(t){let e=t.substring(2).toLowerCase();const i=!!~e.indexOf("passive");i&&(e=e.replace("passive",""));const n=u.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(n);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:i}}function p(t){return"touches"in t}function f(t){return p(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function g(t){return p(t)?function(t){return"touchend"===t.type||"touchcancel"===t.type?t.changedTouches:t.targetTouches}(t)[0]:t}function m(t,e){try{const i=e.clientX-t.clientX,n=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,r=(e.clientY+t.clientY)/2,o=Math.hypot(i,n);return{angle:-180*Math.atan2(i,n)/Math.PI,distance:o,origin:[s,r]}}catch(i){}return null}function C(t,e){const[i,n]=Array.from(t.touches).filter((t=>e.includes(t.identifier)));return m(i,n)}function v(t){const e=g(t);return p(t)?e.identifier:e.pointerId}function B(t){const e=g(t);return[e.clientX,e.clientY]}function E(t){let{deltaX:e,deltaY:i,deltaMode:n}=t;return 1===n?(e*=40,i*=40):2===n&&(e*=800,i*=800),[e,i]}function y(t,...e){return"function"===typeof t?t(...e):t}function I(){}function _(...t){return 0===t.length?I:1===t.length?t[0]:function(){let e;for(const i of t)e=i.apply(this,arguments)||e;return e}}function w(t,e){return Object.assign({},e,t||{})}class b{constructor(t,e,i){this.ctrl=t,this.args=e,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:e,ingKey:i,args:n}=this;e[i]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=n,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const e=this.state,i=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget,e.lastOffset=i.from?y(i.from,e):e.offset,e.offset=e.lastOffset,e.startTime=e.timeStamp=t.timeStamp)}computeValues(t){const e=this.state;e._values=t,e.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:e,config:i,shared:s}=this;e.args=this.args;let o=0;if(t&&(e.event=t,i.preventDefault&&t.cancelable&&e.event.preventDefault(),e.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,function(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:i,altKey:n,metaKey:s,ctrlKey:r}=t;Object.assign(e,{shiftKey:i,altKey:n,metaKey:s,ctrlKey:r})}return e}(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,o=t.timeStamp-e.timeStamp,e.timeStamp=t.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){const t=e._delta.map(Math.abs);n.addTo(e._distance,t)}this.axisIntent&&this.axisIntent(t);const[a,h]=e._movement,[A,c]=i.threshold,{_step:l,values:u}=e;if(i.hasCustomTransform?(!1===l[0]&&(l[0]=Math.abs(a)>=A&&u[0]),!1===l[1]&&(l[1]=Math.abs(h)>=c&&u[1])):(!1===l[0]&&(l[0]=Math.abs(a)>=A&&Math.sign(a)*A),!1===l[1]&&(l[1]=Math.abs(h)>=c&&Math.sign(h)*c)),e.intentional=!1!==l[0]||!1!==l[1],!e.intentional)return;const d=[0,0];if(i.hasCustomTransform){const[t,e]=u;d[0]=!1!==l[0]?t-l[0]:0,d[1]=!1!==l[1]?e-l[1]:0}else d[0]=!1!==l[0]?a-l[0]:0,d[1]=!1!==l[1]?h-l[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(d);const p=e.offset,f=e._active&&!e._blocked||e.active;f&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=s[this.ingKey]=e._active,t&&(e.first&&("bounds"in i&&(e._bounds=y(i.bounds,e)),this.setup&&this.setup()),e.movement=d,this.computeOffset()));const[g,m]=e.offset,[[C,v],[B,E]]=e._bounds;e.overflow=[g<C?-1:g>v?1:0,m<B?-1:m>E?1:0],e._movementBound[0]=!!e.overflow[0]&&(!1===e._movementBound[0]?e._movement[0]:e._movementBound[0]),e._movementBound[1]=!!e.overflow[1]&&(!1===e._movementBound[1]?e._movement[1]:e._movementBound[1]);const I=e._active&&i.rubberband||[0,0];if(e.offset=function(t,[e,i],[n,s]){const[[o,a],[h,A]]=t;return[r(e,o,a,n),r(i,h,A,s)]}(e._bounds,e.offset,I),e.delta=n.sub(e.offset,p),this.computeMovement(),f&&(!e.last||o>32)){e.delta=n.sub(e.offset,p);const t=e.delta.map(Math.abs);n.addTo(e.distance,t),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&o>0&&(e.velocity=[t[0]/o,t[1]/o],e.timeDelta=o)}}emit(){const t=this.state,e=this.shared,i=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!i.triggerAllEvents)return;const n=this.handler(h(h(h({},e),t),{},{[this.aliasKey]:t.values}));void 0!==n&&(t.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class x extends b{constructor(...t){super(...t),o(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=n.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=n.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const e=this.state,i=this.config;if(!e.axis&&t){const n="object"===typeof i.axisThreshold?i.axisThreshold[f(t)]:i.axisThreshold;e.axis=function([t,e],i){const n=Math.abs(t),s=Math.abs(e);return n>s&&n>i?"x":s>n&&s>i?"y":void 0}(e._movement,n)}e._blocked=(i.lockDirection||!!i.axis)&&!e.axis||!!i.axis&&i.axis!==e.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0}}}const S=t=>t,M={enabled:(t=!0)=>t,eventOptions:(t,e,i)=>h(h({},i.shared.eventOptions),t),preventDefault:(t=!1)=>t,triggerAllEvents:(t=!1)=>t,rubberband(t=0){switch(t){case!0:return[.15,.15];case!1:return[0,0];default:return n.toVector(t)}},from:t=>"function"===typeof t?t:null!=t?n.toVector(t):void 0,transform(t,e,i){const n=t||i.shared.transform;return this.hasCustomTransform=!!n,n||S},threshold:t=>n.toVector(t,0)},Q=h(h({},M),{},{axis(t,e,{axis:i}){if(this.lockDirection="lock"===i,!this.lockDirection)return i},axisThreshold:(t=0)=>t,bounds(t={}){if("function"===typeof t)return e=>Q.bounds(t(e));if("current"in t)return()=>t.current;if("function"===typeof HTMLElement&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:i=1/0,top:n=-1/0,bottom:s=1/0}=t;return[[e,i],[n,s]]}}),D={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]},T="undefined"!==typeof window&&window.document&&window.document.createElement;function F(){return T&&"ontouchstart"in window}const R={isBrowser:T,gesture:function(){try{return"constructor"in GestureEvent}catch(t){return!1}}(),touch:F(),touchscreen:F()||T&&window.navigator.maxTouchPoints>1,pointer:T&&"onpointerdown"in window,pointerLock:T&&"exitPointerLock"in window.document},P={mouse:0,touch:0,pen:8},U=h(h({},Q),{},{device(t,e,{pointer:{touch:i=!1,lock:n=!1,mouse:s=!1}={}}){return this.pointerLock=n&&R.pointerLock,R.touch&&i?"touch":this.pointerLock?"mouse":R.pointer&&!s?"pointer":R.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:i}){if(this.preventScrollDelay="number"===typeof i?i:i||void 0===i&&t?250:void 0,R.touchscreen&&!1!==i)return t||(void 0!==i?"y":void 0)},pointerCapture(t,e,{pointer:{capture:i=!0,buttons:n=1,keys:s=!0}={}}){return this.pointerButtons=n,this.keys=s,!this.pointerLock&&"pointer"===this.device&&i},threshold(t,e,{filterTaps:i=!1,tapsThreshold:s=3,axis:r}){const o=n.toVector(t,i?s:r?1:0);return this.filterTaps=i,this.tapsThreshold=s,o},swipe({velocity:t=.5,distance:e=50,duration:i=250}={}){return{velocity:this.transform(n.toVector(t)),distance:this.transform(n.toVector(e)),duration:i}},delay(t=0){switch(t){case!0:return 180;case!1:return 0;default:return t}},axisThreshold:t=>t?h(h({},P),t):P,keyboardDisplacement:(t=10)=>t});function O(t){const[e,i]=t.overflow,[n,s]=t._delta,[r,o]=t._direction;(e<0&&n>0&&r<0||e>0&&n<0&&r>0)&&(t._movement[0]=t._movementBound[0]),(i<0&&s>0&&o<0||i>0&&s<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const G=h(h({},M),{},{device(t,e,{shared:i,pointer:{touch:n=!1}={}}){if(i.target&&!R.touch&&R.gesture)return"gesture";if(R.touch&&n)return"touch";if(R.touchscreen){if(R.pointer)return"pointer";if(R.touch)return"touch"}},bounds(t,e,{scaleBounds:i={},angleBounds:n={}}){const s=t=>{const e=w(y(i,t),{min:-1/0,max:1/0});return[e.min,e.max]},r=t=>{const e=w(y(n,t),{min:-1/0,max:1/0});return[e.min,e.max]};return"function"!==typeof i&&"function"!==typeof n?[s(),r()]:t=>[s(t),r(t)]},threshold(t,e,i){return this.lockDirection="lock"===i.axis,n.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey:t=>void 0===t?"ctrlKey":t,pinchOnWheel:(t=!0)=>t}),k=h(h({},Q),{},{mouseOnly:(t=!0)=>t}),L=Q,N=Q,H=h(h({},Q),{},{mouseOnly:(t=!0)=>t}),z=new Map,V=new Map;function J(t){z.set(t.key,t.engine),V.set(t.key,t.resolver)}const j={key:"drag",engine:class extends x{constructor(...t){super(...t),o(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const e=t._bounds.getBoundingClientRect(),i=t.currentTarget.getBoundingClientRect(),n={left:e.left-i.left+t.offset[0],right:e.right-i.right+t.offset[0],top:e.top-i.top+t.offset[1],bottom:e.bottom-i.bottom+t.offset[1]};t._bounds=Q.bounds(n)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const e=this.config,i=this.state;if(null!=t.buttons&&(Array.isArray(e.pointerButtons)?!e.pointerButtons.includes(t.buttons):-1!==e.pointerButtons&&e.pointerButtons!==t.buttons))return;const n=this.ctrl.setEventIds(t);e.pointerCapture&&t.target.setPointerCapture(t.pointerId),n&&n.size>1&&i._pointerActive||(this.start(t),this.setupPointer(t),i._pointerId=v(t),i._pointerActive=!0,this.computeValues(B(t)),this.computeInitial(),e.preventScrollAxis&&"mouse"!==f(t)?(i._active=!1,this.setupScrollPrevention(t)):e.delay>0?(this.setupDelayTrigger(t),e.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const e=this.state,i=this.config;if(!e._pointerActive)return;const s=v(t);if(void 0!==e._pointerId&&s!==e._pointerId)return;const r=B(t);return document.pointerLockElement===t.target?e._delta=[t.movementX,t.movementY]:(e._delta=n.sub(r,e._values),this.computeValues(r)),n.addTo(e._movement,e._delta),this.compute(t),e._delayed&&e.intentional?(this.timeoutStore.remove("dragDelay"),e.active=!1,void this.startPointerDrag(t)):i.preventScrollAxis&&!e._preventScroll?e.axis?e.axis===i.preventScrollAxis||"xy"===i.preventScrollAxis?(e._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(t)):void 0:void this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(o){}const e=this.state,i=this.config;if(!e._active||!e._pointerActive)return;const n=v(t);if(void 0!==e._pointerId&&n!==e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[s,r]=e._distance;if(e.tap=s<=i.tapsThreshold&&r<=i.tapsThreshold,e.tap&&i.filterTaps)e._force=!0;else{const[t,n]=e._delta,[s,r]=e._movement,[o,a]=i.swipe.velocity,[h,A]=i.swipe.distance,c=i.swipe.duration;if(e.elapsedTime<c){const i=Math.abs(t/e.timeDelta),c=Math.abs(n/e.timeDelta);i>o&&Math.abs(s)>h&&(e.swipe[0]=Math.sign(t)),c>a&&Math.abs(r)>A&&(e.swipe[1]=Math.sign(n))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const e=this.config,i=e.device;e.pointerLock&&t.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,function(t){"persist"in t&&"function"===typeof t.persist&&t.persist()}(t);const e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(t)}),this.config.delay)}keyDown(t){const e=D[t.key];if(e){const i=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),i._delta=e(this.config.keyboardDisplacement,s),i._keyboardActive=!0,n.addTo(i._movement,i._delta),this.compute(t),this.emit()}}keyUp(t){t.key in D&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const e=this.config.device;t(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(e,"change",this.pointerMove.bind(this)),t(e,"end",this.pointerUp.bind(this)),t(e,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:U},Y={key:"hover",engine:class extends x{constructor(...t){super(...t),o(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&"mouse"!==t.pointerType||(this.start(t),this.computeValues(B(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&"mouse"!==t.pointerType)return;const e=this.state;if(!e._active)return;e._active=!1;const i=B(t);e._movement=e._delta=n.sub(i,e._values),this.computeValues(i),this.compute(t),e.delta=e.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}},resolver:H},K={key:"move",engine:class extends x{constructor(...t){super(...t),o(this,"ingKey","moving")}move(t){this.config.mouseOnly&&"mouse"!==t.pointerType||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(B(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const e=B(t),i=this.state;i._delta=n.sub(e,i._values),n.addTo(i._movement,i._delta),this.computeValues(e),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}},resolver:k},q={key:"pinch",engine:class extends b{constructor(...t){super(...t),o(this,"ingKey","pinching"),o(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:e,lastOffset:i}=this.state;this.state.offset="wheel"===t?n.add(e,i):[(1+e[0])*i[0],e[1]+i[1]]}computeMovement(){const{offset:t,lastOffset:e}=this.state;this.state.movement=[t[0]/e[0],t[1]-e[1]]}axisIntent(){const t=this.state,[e,i]=t._movement;if(!t.axis){const n=30*Math.abs(e)-Math.abs(i);n<0?t.axis="angle":n>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&("scale"===this.state.axis?t[1]=0:"angle"===this.state.axis&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout((()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()}),0)}touchStart(t){this.ctrl.setEventIds(t);const e=this.state,i=this.ctrl.touchIds;if(e._active&&e._touchIds.every((t=>i.has(t))))return;if(i.size<2)return;this.start(t),e._touchIds=Array.from(i).slice(0,2);const n=C(t,e._touchIds);n&&this.pinchStart(t,n)}pointerStart(t){if(null!=t.buttons&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const e=this.state,i=e._pointerEvents,n=this.ctrl.pointerIds;if(e._active&&Array.from(i.keys()).every((t=>n.has(t))))return;if(i.size<2&&i.set(t.pointerId,t),e._pointerEvents.size<2)return;this.start(t);const s=m(...Array.from(i.values()));s&&this.pinchStart(t,s)}pinchStart(t,e){this.state.origin=e.origin,this.computeValues([e.distance,e.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const e=C(t,this.state._touchIds);e&&this.pinchMove(t,e)}pointerMove(t){const e=this.state._pointerEvents;if(e.has(t.pointerId)&&e.set(t.pointerId,t),!this.state._active)return;const i=m(...Array.from(e.values()));i&&this.pinchMove(t,i)}pinchMove(t,e){const i=this.state,n=i._values[1],s=e.angle-n;let r=0;Math.abs(s)>270&&(r+=Math.sign(s)),this.computeValues([e.distance,e.angle-360*r]),i.origin=e.origin,i.turns=r,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some((t=>!this.ctrl.touchIds.has(t)))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const e=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch(i){}e._pointerEvents.has(t.pointerId)&&e._pointerEvents.delete(t.pointerId),e._active&&e._pointerEvents.size<2&&(e._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const e=this.state;e._active||(this.start(t),this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const e=this.state;this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY];const i=e._movement;e._movement=[t.scale-1,t.rotation],e._delta=n.sub(e._movement,i),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const e=this.config.modifierKey;e&&!(Array.isArray(e)?e.find((e=>t[e])):t[e])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const e=this.state;e._delta=[-E(t)[1]/100*e.offset[0],0],n.addTo(e._movement,e._delta),O(e),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const e=this.config.device;e&&(t(e,"start",this[e+"Start"].bind(this)),t(e,"change",this[e+"Move"].bind(this)),t(e,"end",this[e+"End"].bind(this)),t(e,"cancel",this[e+"End"].bind(this)),t("lostPointerCapture","",this[e+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:G},X={key:"scroll",engine:class extends x{constructor(...t){super(...t),o(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const e=this.state,i=function(t){var e,i;const{scrollX:n,scrollY:s,scrollLeft:r,scrollTop:o}=t.currentTarget;return[null!==(e=null!==n&&void 0!==n?n:r)&&void 0!==e?e:0,null!==(i=null!==s&&void 0!==s?s:o)&&void 0!==i?i:0]}(t);e._delta=n.sub(i,e._values),n.addTo(e._movement,e._delta),this.computeValues(i),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}},resolver:L},W={key:"wheel",engine:class extends x{constructor(...t){super(...t),o(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const e=this.state;e._delta=E(t),n.addTo(e._movement,e._delta),O(e),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}},resolver:N};var Z=i("q1tI");const $={target(t){if(t)return()=>"current"in t?t.current:t},enabled:(t=!0)=>t,window:(t=(R.isBrowser?window:void 0))=>t,eventOptions:({passive:t=!0,capture:e=!1}={})=>({passive:t,capture:e}),transform:t=>t},tt=["target","eventOptions","window","enabled","transform"];function et(t={},e){const i={};for(const[n,s]of Object.entries(e))switch(typeof s){case"function":i[n]=s.call(i,t[n],n,t);break;case"object":i[n]=et(t[n],s);break;case"boolean":s&&(i[n]=t[n])}return i}class it{constructor(t,e){o(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=e}add(t,e,i,n,s){const r=this._listeners,o=function(t,e=""){const i=A[t];return t+(i&&i[e]||e)}(e,i),a=h(h({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),s);t.addEventListener(o,n,a);const c=()=>{t.removeEventListener(o,n,a),r.delete(c)};return r.add(c),c}clean(){this._listeners.forEach((t=>t())),this._listeners.clear()}}class nt{constructor(){o(this,"_timeouts",new Map)}add(t,e,i=140,...n){this.remove(t),this._timeouts.set(t,window.setTimeout(e,i,...n))}remove(t){const e=this._timeouts.get(t);e&&window.clearTimeout(e)}clean(){this._timeouts.forEach((t=>{window.clearTimeout(t)})),this._timeouts.clear()}}class st{constructor(t){var e,i;o(this,"gestures",new Set),o(this,"_targetEventStore",new it(this)),o(this,"gestureEventStores",{}),o(this,"gestureTimeoutStores",{}),o(this,"handlers",{}),o(this,"config",{}),o(this,"pointerIds",new Set),o(this,"touchIds",new Set),o(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),e=this,(i=t).drag&&rt(e,"drag"),i.wheel&&rt(e,"wheel"),i.scroll&&rt(e,"scroll"),i.move&&rt(e,"move"),i.pinch&&rt(e,"pinch"),i.hover&&rt(e,"hover")}setEventIds(t){return p(t)?(this.touchIds=new Set(function(t){return function(t){return Array.from(t.touches).filter((e=>{var i,n;return e.target===t.currentTarget||(null===(i=t.currentTarget)||void 0===i||null===(n=i.contains)||void 0===n?void 0:n.call(i,e.target))}))}(t).map((t=>t.identifier))}(t)),this.touchIds):"pointerId"in t?("pointerup"===t.type||"pointercancel"===t.type?this.pointerIds.delete(t.pointerId):"pointerdown"===t.type&&this.pointerIds.add(t.pointerId),this.pointerIds):void 0}applyHandlers(t,e){this.handlers=t,this.nativeHandlers=e}applyConfig(t,e){this.config=function(t,e,i={}){const n=t,{target:s,eventOptions:r,window:o,enabled:a,transform:A}=n,c=function(t,e){if(null==t)return{};var i,n,s=function(t,e){if(null==t)return{};var i,n,s={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}(n,tt);if(i.shared=et({target:s,eventOptions:r,window:o,enabled:a,transform:A},$),e){const t=V.get(e);i[e]=et(h({shared:i.shared},c),t)}else for(const l in c){const t=V.get(l);t&&(i[l]=et(h({shared:i.shared},c[l]),t))}return i}(t,e,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const e=this.config.shared,i={};let n;if(!e.target||(n=e.target(),n)){if(e.enabled){for(const e of this.gestures){const s=this.config[e],r=ot(i,s.eventOptions,!!n);s.enabled&&new(z.get(e))(this,t,e).bind(r)}const s=ot(i,e.eventOptions,!!n);for(const e in this.nativeHandlers)s(e,"",(i=>this.nativeHandlers[e](h(h({},this.state.shared),{},{event:i,args:t}))),void 0,!0)}for(const t in i)i[t]=_(...i[t]);if(!n)return i;for(const t in i){const{device:e,capture:s,passive:r}=d(t);this._targetEventStore.add(n,e,"",i[t],{capture:s,passive:r})}}}}function rt(t,e){t.gestures.add(e),t.gestureEventStores[e]=new it(t,e),t.gestureTimeoutStores[e]=new nt}const ot=(t,e,i)=>(n,s,r,o={},a=!1)=>{var h,u;const d=null!==(h=o.capture)&&void 0!==h?h:e.capture,p=null!==(u=o.passive)&&void 0!==u?u:e.passive;let f=a?n:function(t,e="",i=!1){const n=A[t],s=n&&n[e]||e;return"on"+c(t)+c(s)+(function(t=!1,e){return t&&!l.includes(e)}(i,s)?"Capture":"")}(n,s,d);i&&p&&(f+="Passive"),t[f]=t[f]||[],t[f].push(r)},at=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ht(t,e,i,n,s,r){if(!t.has(i))return;if(!z.has(n))return;const o=i+"Start",a=i+"End";s[n]=t=>{let n;return t.first&&o in e&&e[o](t),i in e&&(n=e[i](t)),t.last&&a in e&&e[a](t),n},r[n]=r[n]||{}}function At(t,e){const i=([j,q,X,W,K,Y].forEach(J),function(t,e){const{handlers:i,nativeHandlers:n,config:s}=function(t,e){const[i,n,s]=function(t){const e={},i={},n=new Set;for(let s in t)at.test(s)?(n.add(RegExp.lastMatch),i[s]=t[s]):e[s]=t[s];return[i,e,n]}(t),r={};return ht(s,i,"onDrag","drag",r,e),ht(s,i,"onWheel","wheel",r,e),ht(s,i,"onScroll","scroll",r,e),ht(s,i,"onPinch","pinch",r,e),ht(s,i,"onMove","move",r,e),ht(s,i,"onHover","hover",r,e),{handlers:r,config:e,nativeHandlers:n}}(t,e||{});return function(t,e={},i,n){const s=Z.useMemo((()=>new st(t)),[]);if(s.applyHandlers(t,n),s.applyConfig(e,i),Z.useEffect(s.effect.bind(s)),Z.useEffect((()=>s.clean.bind(s)),[]),void 0===e.target)return s.bind.bind(s)}(i,s,void 0,n)});return i(t,e||{})}},ejks:(t,e,i)=>{"use strict";t.exports=i("WLLx")},gGK5:(t,e,i)=>{"use strict";i.d(e,{Yc:()=>s});var n=i("jBc9");class s extends n.Mesh{constructor(t,e,i=!1,s=!1,a=1e4){const h=new n.BufferGeometry;super(h,e),this.isMarchingCubes=!0;const A=this,c=new Float32Array(36),l=new Float32Array(36),u=new Float32Array(36);function d(t,e,i){return t+(e-t)*i}function p(t,e,i,n,s,r,o,a,h,p){const f=(i-o)/(a-o),g=A.normal_cache;c[e+0]=n+f*A.delta,c[e+1]=s,c[e+2]=r,l[e+0]=d(g[t+0],g[t+3],f),l[e+1]=d(g[t+1],g[t+4],f),l[e+2]=d(g[t+2],g[t+5],f),u[e+0]=d(A.palette[3*h+0],A.palette[3*p+0],f),u[e+1]=d(A.palette[3*h+1],A.palette[3*p+1],f),u[e+2]=d(A.palette[3*h+2],A.palette[3*p+2],f)}function f(t,e,i,n,s,r,o,a,h,p){const f=(i-o)/(a-o),g=A.normal_cache;c[e+0]=n,c[e+1]=s+f*A.delta,c[e+2]=r;const m=t+3*A.yd;l[e+0]=d(g[t+0],g[m+0],f),l[e+1]=d(g[t+1],g[m+1],f),l[e+2]=d(g[t+2],g[m+2],f),u[e+0]=d(A.palette[3*h+0],A.palette[3*p+0],f),u[e+1]=d(A.palette[3*h+1],A.palette[3*p+1],f),u[e+2]=d(A.palette[3*h+2],A.palette[3*p+2],f)}function g(t,e,i,n,s,r,o,a,h,p){const f=(i-o)/(a-o),g=A.normal_cache;c[e+0]=n,c[e+1]=s,c[e+2]=r+f*A.delta;const m=t+3*A.zd;l[e+0]=d(g[t+0],g[m+0],f),l[e+1]=d(g[t+1],g[m+1],f),l[e+2]=d(g[t+2],g[m+2],f),u[e+0]=d(A.palette[3*h+0],A.palette[3*p+0],f),u[e+1]=d(A.palette[3*h+1],A.palette[3*p+1],f),u[e+2]=d(A.palette[3*h+2],A.palette[3*p+2],f)}function m(t){const e=3*t;0===A.normal_cache[e]&&(A.normal_cache[e+0]=A.field[t-1]-A.field[t+1],A.normal_cache[e+1]=A.field[t-A.yd]-A.field[t+A.yd],A.normal_cache[e+2]=A.field[t-A.zd]-A.field[t+A.zd])}function C(t,e,i,n,s){const a=n+1,h=n+A.yd,d=n+A.zd,C=a+A.yd,B=a+A.zd,E=n+A.yd+A.zd,y=a+A.yd+A.zd;let I=0;const _=A.field[n],w=A.field[a],b=A.field[h],x=A.field[C],S=A.field[d],M=A.field[B],Q=A.field[E],D=A.field[y];_<s&&(I|=1),w<s&&(I|=2),b<s&&(I|=8),x<s&&(I|=4),S<s&&(I|=16),M<s&&(I|=32),Q<s&&(I|=128),D<s&&(I|=64);const T=r[I];if(0===T)return 0;const F=A.delta,R=t+F,P=e+F,U=i+F;1&T&&(m(n),m(a),p(3*n,0,s,t,e,i,_,w,n,a)),2&T&&(m(a),m(C),f(3*a,3,s,R,e,i,w,x,a,C)),4&T&&(m(h),m(C),p(3*h,6,s,t,P,i,b,x,h,C)),8&T&&(m(n),m(h),f(3*n,9,s,t,e,i,_,b,n,h)),16&T&&(m(d),m(B),p(3*d,12,s,t,e,U,S,M,d,B)),32&T&&(m(B),m(y),f(3*B,15,s,R,e,U,M,D,B,y)),64&T&&(m(E),m(y),p(3*E,18,s,t,P,U,Q,D,E,y)),128&T&&(m(d),m(E),f(3*d,21,s,t,e,U,S,Q,d,E)),256&T&&(m(n),m(d),g(3*n,24,s,t,e,i,_,S,n,d)),512&T&&(m(a),m(B),g(3*a,27,s,R,e,i,w,M,a,B)),1024&T&&(m(C),m(y),g(3*C,30,s,R,P,i,x,D,C,y)),2048&T&&(m(h),m(E),g(3*h,33,s,t,P,i,b,Q,h,E)),I<<=4;let O,G,k,L=0,N=0;for(;-1!=o[I+N];)O=I+N,G=O+1,k=O+2,v(c,l,u,3*o[O],3*o[G],3*o[k]),N+=3,L++;return L}function v(t,e,i,n,s,r){const o=3*A.count;if(A.positionArray[o+0]=t[n],A.positionArray[o+1]=t[n+1],A.positionArray[o+2]=t[n+2],A.positionArray[o+3]=t[s],A.positionArray[o+4]=t[s+1],A.positionArray[o+5]=t[s+2],A.positionArray[o+6]=t[r],A.positionArray[o+7]=t[r+1],A.positionArray[o+8]=t[r+2],!0===A.material.flatShading){const t=(e[n+0]+e[s+0]+e[r+0])/3,i=(e[n+1]+e[s+1]+e[r+1])/3,a=(e[n+2]+e[s+2]+e[r+2])/3;A.normalArray[o+0]=t,A.normalArray[o+1]=i,A.normalArray[o+2]=a,A.normalArray[o+3]=t,A.normalArray[o+4]=i,A.normalArray[o+5]=a,A.normalArray[o+6]=t,A.normalArray[o+7]=i,A.normalArray[o+8]=a}else A.normalArray[o+0]=e[n+0],A.normalArray[o+1]=e[n+1],A.normalArray[o+2]=e[n+2],A.normalArray[o+3]=e[s+0],A.normalArray[o+4]=e[s+1],A.normalArray[o+5]=e[s+2],A.normalArray[o+6]=e[r+0],A.normalArray[o+7]=e[r+1],A.normalArray[o+8]=e[r+2];if(A.enableUvs){const e=2*A.count;A.uvArray[e+0]=t[n+0],A.uvArray[e+1]=t[n+2],A.uvArray[e+2]=t[s+0],A.uvArray[e+3]=t[s+2],A.uvArray[e+4]=t[r+0],A.uvArray[e+5]=t[r+2]}A.enableColors&&(A.colorArray[o+0]=i[n+0],A.colorArray[o+1]=i[n+1],A.colorArray[o+2]=i[n+2],A.colorArray[o+3]=i[s+0],A.colorArray[o+4]=i[s+1],A.colorArray[o+5]=i[s+2],A.colorArray[o+6]=i[r+0],A.colorArray[o+7]=i[r+1],A.colorArray[o+8]=i[r+2]),A.count+=3}this.enableUvs=i,this.enableColors=s,this.init=function(t){this.resolution=t,this.isolation=80,this.size=t,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(3*this.size3),this.palette=new Float32Array(3*this.size3),this.count=0;const e=3*a;this.positionArray=new Float32Array(3*e);const i=new n.BufferAttribute(this.positionArray,3);i.setUsage(n.DynamicDrawUsage),h.setAttribute("position",i),this.normalArray=new Float32Array(3*e);const s=new n.BufferAttribute(this.normalArray,3);if(s.setUsage(n.DynamicDrawUsage),h.setAttribute("normal",s),this.enableUvs){this.uvArray=new Float32Array(2*e);const t=new n.BufferAttribute(this.uvArray,2);t.setUsage(n.DynamicDrawUsage),h.setAttribute("uv",t)}if(this.enableColors){this.colorArray=new Float32Array(3*e);const t=new n.BufferAttribute(this.colorArray,3);t.setUsage(n.DynamicDrawUsage),h.setAttribute("color",t)}h.boundingSphere=new n.Sphere(new n.Vector3,1)},this.addBall=function(t,e,i,s,r,o){const a=Math.sign(s);s=Math.abs(s);const h=!(void 0===o||null===o);let A=new n.Color(t,e,i);if(h)try{A=o instanceof n.Color?o:Array.isArray(o)?new n.Color(Math.min(Math.abs(o[0]),1),Math.min(Math.abs(o[1]),1),Math.min(Math.abs(o[2]),1)):new n.Color(o)}catch(D){A=new n.Color(t,e,i)}const c=this.size*Math.sqrt(s/r),l=i*this.size,u=e*this.size,d=t*this.size;let p=Math.floor(l-c);p<1&&(p=1);let f=Math.floor(l+c);f>this.size-1&&(f=this.size-1);let g=Math.floor(u-c);g<1&&(g=1);let m=Math.floor(u+c);m>this.size-1&&(m=this.size-1);let C=Math.floor(d-c);C<1&&(C=1);let v,B,E,y,I,_,w,b,x,S,M,Q=Math.floor(d+c);for(Q>this.size-1&&(Q=this.size-1),E=p;E<f;E++)for(I=this.size2*E,b=E/this.size-i,x=b*b,B=g;B<m;B++)for(y=I+this.size*B,w=B/this.size-e,S=w*w,v=C;v<Q;v++)if(_=v/this.size-t,M=s/(1e-6+_*_+S+x)-r,M>0){this.field[y+v]+=M*a;const t=Math.sqrt((v-d)*(v-d)+(B-u)*(B-u)+(E-l)*(E-l))/c,e=1-t*t*t*(t*(6*t-15)+10);this.palette[3*(y+v)+0]+=A.r*e,this.palette[3*(y+v)+1]+=A.g*e,this.palette[3*(y+v)+2]+=A.b*e}},this.addPlaneX=function(t,e){const i=this.size,n=this.yd,s=this.zd,r=this.field;let o,a,h,A,c,l,u,d=i*Math.sqrt(t/e);for(d>i&&(d=i),o=0;o<d;o++)if(l=o/i,A=l*l,c=t/(1e-4+A)-e,c>0)for(a=0;a<i;a++)for(u=o+a*n,h=0;h<i;h++)r[s*h+u]+=c},this.addPlaneY=function(t,e){const i=this.size,n=this.yd,s=this.zd,r=this.field;let o,a,h,A,c,l,u,d,p=i*Math.sqrt(t/e);for(p>i&&(p=i),a=0;a<p;a++)if(l=a/i,A=l*l,c=t/(1e-4+A)-e,c>0)for(u=a*n,o=0;o<i;o++)for(d=u+o,h=0;h<i;h++)r[s*h+d]+=c},this.addPlaneZ=function(t,e){const i=this.size,n=this.yd,s=this.zd,r=this.field;let o,a,h,A,c,l,u,d,p=i*Math.sqrt(t/e);for(p>i&&(p=i),h=0;h<p;h++)if(l=h/i,A=l*l,c=t/(1e-4+A)-e,c>0)for(u=s*h,a=0;a<i;a++)for(d=u+a*n,o=0;o<i;o++)r[d+o]+=c},this.setCell=function(t,e,i,n){const s=this.size2*i+this.size*e+t;this.field[s]=n},this.getCell=function(t,e,i){const n=this.size2*i+this.size*e+t;return this.field[n]},this.blur=function(t=1){const e=this.field,i=e.slice(),n=this.size,s=this.size2;for(let r=0;r<n;r++)for(let o=0;o<n;o++)for(let a=0;a<n;a++){const h=s*a+n*o+r;let A=i[h],c=1;for(let e=-1;e<=1;e+=2){const h=e+r;if(!(h<0||h>=n))for(let e=-1;e<=1;e+=2){const r=e+o;if(!(r<0||r>=n))for(let e=-1;e<=1;e+=2){const o=e+a;o<0||o>=n||(c++,A+=t*(i[s*o+n*r+h]-A)/c)}}}e[h]=A}},this.reset=function(){for(let t=0;t<this.size3;t++)this.normal_cache[3*t]=0,this.field[t]=0,this.palette[3*t]=this.palette[3*t+1]=this.palette[3*t+2]=0},this.update=function(){this.count=0;const t=this.size-2;for(let e=1;e<t;e++){const i=this.size2*e,n=(e-this.halfsize)/this.halfsize;for(let e=1;e<t;e++){const s=i+this.size*e,r=(e-this.halfsize)/this.halfsize;for(let e=1;e<t;e++)C((e-this.halfsize)/this.halfsize,r,n,s+e,this.isolation)}}this.geometry.setDrawRange(0,this.count),h.getAttribute("position").needsUpdate=!0,h.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(h.getAttribute("uv").needsUpdate=!0),this.enableColors&&(h.getAttribute("color").needsUpdate=!0),this.count},this.init(t)}}const r=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),o=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])},"gL+i":(t,e,i)=>{"use strict";i.d(e,{o:()=>h});var n=i("jBc9"),s=i("XM0D"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);function a(t){t.preventDefault()}class h extends s.Q{constructor(t,e){super(),o(this,"object"),o(this,"domElement",null),o(this,"movementSpeed",1),o(this,"rollSpeed",.005),o(this,"dragToLook",!1),o(this,"autoForward",!1),o(this,"changeEvent",{type:"change"}),o(this,"EPS",1e-6),o(this,"tmpQuaternion",new n.Quaternion),o(this,"mouseStatus",0),o(this,"movementSpeedMultiplier",1),o(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),o(this,"moveVector",new n.Vector3(0,0,0)),o(this,"rotationVector",new n.Vector3(0,0,0)),o(this,"keydown",(t=>{if(!t.altKey){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}})),o(this,"keyup",(t=>{switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()})),o(this,"pointerdown",(t=>{if(this.dragToLook)this.mouseStatus++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}})),o(this,"pointermove",(t=>{if(!this.dragToLook||this.mouseStatus>0){const e=this.getContainerDimensions(),i=e.size[0]/2,n=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-i)/i,this.moveState.pitchDown=(t.pageY-e.offset[1]-n)/n,this.updateRotationVector()}})),o(this,"pointerup",(t=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()})),o(this,"lastQuaternion",new n.Quaternion),o(this,"lastPosition",new n.Vector3),o(this,"update",(t=>{const e=t*this.movementSpeed,i=t*this.rollSpeed;this.object.translateX(this.moveVector.x*e),this.object.translateY(this.moveVector.y*e),this.object.translateZ(this.moveVector.z*e),this.tmpQuaternion.set(this.rotationVector.x*i,this.rotationVector.y*i,this.rotationVector.z*i,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))})),o(this,"updateMovementVector",(()=>{const t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back})),o(this,"updateRotationVector",(()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft})),o(this,"getContainerDimensions",(()=>this.domElement==document||this.domElement instanceof Document?{size:[window.innerWidth,window.innerHeight],offset:[0,0]}:{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]})),o(this,"connect",(t=>{this.domElement=t,t instanceof Document||t.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",a),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)})),o(this,"dispose",(()=>{this.domElement.removeEventListener("contextmenu",a),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)})),this.object=t,void 0!==e&&this.connect(e),this.updateMovementVector(),this.updateRotationVector()}}},iG0e:(t,e,i)=>{"use strict";i.d(e,{p:()=>a});var n=i("jBc9"),s=i("cZpV"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class a extends s.o{constructor(t,e="tDiffuse"){super(),o(this,"textureID"),o(this,"uniforms"),o(this,"material"),o(this,"fsQuad"),this.textureID=e,t instanceof n.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):(this.uniforms=n.UniformsUtils.clone(t.uniforms),this.material=new n.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new s.F(this.material)}render(t,e,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.fsQuad.dispose(),this.material.dispose()}}},iilC:(t,e,i)=>{"use strict";i.d(e,{b:()=>I});var n=i("jBc9"),s=i("+sZi"),r=i("7Le1");const o=i("Ua9r").r>=125?"uv1":"uv2",a=new n.Vector4,h=new n.Vector3,A=new n.Vector3,c=new n.Vector4,l=new n.Vector4,u=new n.Vector4,d=new n.Vector3,p=new n.Matrix4,f=new n.Line3,g=new n.Vector3,m=new n.Box3,C=new n.Sphere,v=new n.Vector4;let B,E;function y(t,e,i){return v.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),v.multiplyScalar(1/v.w),v.x=E/i.width,v.y=E/i.height,v.applyMatrix4(t.projectionMatrixInverse),v.multiplyScalar(1/v.w),Math.abs(Math.max(v.x,v.y))}class I extends n.Mesh{constructor(t=new s.n,e=new r.G({color:16777215*Math.random()})){super(t,e),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,e=t.attributes.instanceStart,i=t.attributes.instanceEnd,s=new Float32Array(2*e.count);for(let n=0,o=0,a=e.count;n<a;n++,o+=2)h.fromBufferAttribute(e,n),A.fromBufferAttribute(i,n),s[o]=0===o?0:s[o-1],s[o+1]=s[o]+h.distanceTo(A);const r=new n.InstancedInterleavedBuffer(s,2,1);return t.setAttribute("instanceDistanceStart",new n.InterleavedBufferAttribute(r,1,0)),t.setAttribute("instanceDistanceEnd",new n.InterleavedBufferAttribute(r,1,1)),this}raycast(t,e){const i=this.material.worldUnits,s=t.camera,r=void 0!==t.params.Line2&&t.params.Line2.threshold||0;B=t.ray;const a=this.matrixWorld,h=this.geometry,A=this.material;let v,I;E=A.linewidth+r,null===h.boundingSphere&&h.computeBoundingSphere(),C.copy(h.boundingSphere).applyMatrix4(a),v=i?.5*E:y(s,Math.max(s.near,C.distanceToPoint(B.origin)),A.resolution),C.radius+=v,!1!==B.intersectsSphere(C)&&(null===h.boundingBox&&h.computeBoundingBox(),m.copy(h.boundingBox).applyMatrix4(a),I=i?.5*E:y(s,Math.max(s.near,m.distanceToPoint(B.origin)),A.resolution),m.expandByScalar(I),!1!==B.intersectsBox(m)&&(i?function(t,e){const i=t.matrixWorld,s=t.geometry,r=s.attributes.instanceStart,a=s.attributes.instanceEnd;for(let h=0,A=Math.min(s.instanceCount,r.count);h<A;h++){f.start.fromBufferAttribute(r,h),f.end.fromBufferAttribute(a,h),f.applyMatrix4(i);const s=new n.Vector3,A=new n.Vector3;B.distanceSqToSegment(f.start,f.end,A,s),A.distanceTo(s)<.5*E&&e.push({point:A,pointOnLine:s,distance:B.origin.distanceTo(A),object:t,face:null,faceIndex:h,uv:null,[o]:null})}}(this,e):function(t,e,i){const s=e.projectionMatrix,r=t.material.resolution,a=t.matrixWorld,h=t.geometry,A=h.attributes.instanceStart,m=h.attributes.instanceEnd,C=Math.min(h.instanceCount,A.count),v=-e.near;B.at(1,u),u.w=1,u.applyMatrix4(e.matrixWorldInverse),u.applyMatrix4(s),u.multiplyScalar(1/u.w),u.x*=r.x/2,u.y*=r.y/2,u.z=0,d.copy(u),p.multiplyMatrices(e.matrixWorldInverse,a);for(let u=0,y=C;u<y;u++){if(c.fromBufferAttribute(A,u),l.fromBufferAttribute(m,u),c.w=1,l.w=1,c.applyMatrix4(p),l.applyMatrix4(p),c.z>v&&l.z>v)continue;if(c.z>v){const t=c.z-l.z,e=(c.z-v)/t;c.lerp(l,e)}else if(l.z>v){const t=l.z-c.z,e=(l.z-v)/t;l.lerp(c,e)}c.applyMatrix4(s),l.applyMatrix4(s),c.multiplyScalar(1/c.w),l.multiplyScalar(1/l.w),c.x*=r.x/2,c.y*=r.y/2,l.x*=r.x/2,l.y*=r.y/2,f.start.copy(c),f.start.z=0,f.end.copy(l),f.end.z=0;const e=f.closestPointToPointParameter(d,!0);f.at(e,g);const h=n.MathUtils.lerp(c.z,l.z,e),C=h>=-1&&h<=1,y=d.distanceTo(g)<.5*E;if(C&&y){f.start.fromBufferAttribute(A,u),f.end.fromBufferAttribute(m,u),f.start.applyMatrix4(a),f.end.applyMatrix4(a);const e=new n.Vector3,s=new n.Vector3;B.distanceSqToSegment(f.start,f.end,s,e),i.push({point:s,pointOnLine:e,distance:B.origin.distanceTo(s),object:t,face:null,faceIndex:u,uv:null,[o]:null})}}}(this,s,e)))}onBeforeRender(t){const e=this.material.uniforms;e&&e.resolution&&(t.getViewport(a),this.material.uniforms.resolution.value.set(a.z,a.w))}}},imZL:(t,e,i)=>{"use strict";i.d(e,{N:()=>l,r:()=>u});var n=i("jBc9"),s=i("XM0D"),r=Object.defineProperty,o=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);const a=new n.Ray,h=new n.Plane,A=Math.cos(Math.PI/180*70),c=(t,e)=>(t%e+e)%e;class l extends s.Q{constructor(t,e){super(),o(this,"object"),o(this,"domElement"),o(this,"enabled",!0),o(this,"target",new n.Vector3),o(this,"minDistance",0),o(this,"maxDistance",1/0),o(this,"minZoom",0),o(this,"maxZoom",1/0),o(this,"minPolarAngle",0),o(this,"maxPolarAngle",Math.PI),o(this,"minAzimuthAngle",-1/0),o(this,"maxAzimuthAngle",1/0),o(this,"enableDamping",!1),o(this,"dampingFactor",.05),o(this,"enableZoom",!0),o(this,"zoomSpeed",1),o(this,"enableRotate",!0),o(this,"rotateSpeed",1),o(this,"enablePan",!0),o(this,"panSpeed",1),o(this,"screenSpacePanning",!0),o(this,"keyPanSpeed",7),o(this,"zoomToCursor",!1),o(this,"autoRotate",!1),o(this,"autoRotateSpeed",2),o(this,"reverseOrbit",!1),o(this,"reverseHorizontalOrbit",!1),o(this,"reverseVerticalOrbit",!1),o(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),o(this,"mouseButtons",{LEFT:n.MOUSE.ROTATE,MIDDLE:n.MOUSE.DOLLY,RIGHT:n.MOUSE.PAN}),o(this,"touches",{ONE:n.TOUCH.ROTATE,TWO:n.TOUCH.DOLLY_PAN}),o(this,"target0"),o(this,"position0"),o(this,"zoom0"),o(this,"_domElementKeyEvents",null),o(this,"getPolarAngle"),o(this,"getAzimuthalAngle"),o(this,"setPolarAngle"),o(this,"setAzimuthalAngle"),o(this,"getDistance"),o(this,"getZoomScale"),o(this,"listenToKeyEvents"),o(this,"stopListenToKeyEvents"),o(this,"saveState"),o(this,"reset"),o(this,"update"),o(this,"connect"),o(this,"dispose"),o(this,"dollyIn"),o(this,"dollyOut"),o(this,"getScale"),o(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=t=>{let e=c(t,2*Math.PI),n=f.phi;n<0&&(n+=2*Math.PI),e<0&&(e+=2*Math.PI);let s=Math.abs(e-n);2*Math.PI-s<s&&(e<n?e+=2*Math.PI:n+=2*Math.PI),g.phi=e-n,i.update()},this.setAzimuthalAngle=t=>{let e=c(t,2*Math.PI),n=f.theta;n<0&&(n+=2*Math.PI),e<0&&(e+=2*Math.PI);let s=Math.abs(e-n);2*Math.PI-s<s&&(e<n?e+=2*Math.PI:n+=2*Math.PI),g.theta=e-n,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",it),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",it),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(s),i.update(),d=u.NONE},this.update=(()=>{const e=new n.Vector3,r=new n.Vector3(0,1,0),o=(new n.Quaternion).setFromUnitVectors(t.up,r),c=o.clone().invert(),l=new n.Vector3,v=new n.Quaternion,B=2*Math.PI;return function(){const E=i.object.position;o.setFromUnitVectors(t.up,r),c.copy(o).invert(),e.copy(E).sub(i.target),e.applyQuaternion(o),f.setFromVector3(e),i.autoRotate&&d===u.NONE&&R(2*Math.PI/60/60*i.autoRotateSpeed),i.enableDamping?(f.theta+=g.theta*i.dampingFactor,f.phi+=g.phi*i.dampingFactor):(f.theta+=g.theta,f.phi+=g.phi);let y=i.minAzimuthAngle,I=i.maxAzimuthAngle;isFinite(y)&&isFinite(I)&&(y<-Math.PI?y+=B:y>Math.PI&&(y-=B),I<-Math.PI?I+=B:I>Math.PI&&(I-=B),f.theta=y<=I?Math.max(y,Math.min(I,f.theta)):f.theta>(y+I)/2?Math.max(y,f.theta):Math.min(I,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(C,i.dampingFactor):i.target.add(C),i.zoomToCursor&&Q||i.object.isOrthographicCamera?f.radius=z(f.radius):f.radius=z(f.radius*m),e.setFromSpherical(f),e.applyQuaternion(c),E.copy(i.target).add(e),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),!0===i.enableDamping?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,C.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),C.set(0,0,0));let _=!1;if(i.zoomToCursor&&Q){let s=null;if(i.object instanceof n.PerspectiveCamera&&i.object.isPerspectiveCamera){const t=e.length();s=z(t*m);const n=t-s;i.object.position.addScaledVector(S,n),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const t=new n.Vector3(M.x,M.y,0);t.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix(),_=!0;const r=new n.Vector3(M.x,M.y,0);r.unproject(i.object),i.object.position.sub(r).add(t),i.object.updateMatrixWorld(),s=e.length()}else i.zoomToCursor=!1;null!==s&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(s).add(i.object.position):(a.origin.copy(i.object.position),a.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(a.direction))<A?t.lookAt(i.target):(h.setFromNormalAndCoplanarPoint(i.object.up,i.target),a.intersectPlane(h,i.target))))}else i.object instanceof n.OrthographicCamera&&i.object.isOrthographicCamera&&(_=1!==m,_&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix()));return m=1,Q=!1,!!(_||l.distanceToSquared(i.object.position)>p||8*(1-v.dot(i.object.quaternion))>p)&&(i.dispatchEvent(s),l.copy(i.object.position),v.copy(i.object.quaternion),_=!1,!0)}})(),this.connect=t=>{i.domElement=t,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",nt),i.domElement.addEventListener("pointerdown",Z),i.domElement.addEventListener("pointercancel",tt),i.domElement.addEventListener("wheel",et)},this.dispose=()=>{var t,e,n,s,r,o;i.domElement&&(i.domElement.style.touchAction="auto"),null==(t=i.domElement)||t.removeEventListener("contextmenu",nt),null==(e=i.domElement)||e.removeEventListener("pointerdown",Z),null==(n=i.domElement)||n.removeEventListener("pointercancel",tt),null==(s=i.domElement)||s.removeEventListener("wheel",et),null==(r=i.domElement)||r.ownerDocument.removeEventListener("pointermove",$),null==(o=i.domElement)||o.ownerDocument.removeEventListener("pointerup",tt),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",it)};const i=this,s={type:"change"},r={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=u.NONE;const p=1e-6,f=new n.Spherical,g=new n.Spherical;let m=1;const C=new n.Vector3,v=new n.Vector2,B=new n.Vector2,E=new n.Vector2,y=new n.Vector2,I=new n.Vector2,_=new n.Vector2,w=new n.Vector2,b=new n.Vector2,x=new n.Vector2,S=new n.Vector3,M=new n.Vector2;let Q=!1;const D=[],T={};function F(){return Math.pow(.95,i.zoomSpeed)}function R(t){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=t:g.theta-=t}function P(t){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=t:g.phi-=t}const U=(()=>{const t=new n.Vector3;return function(e,i){t.setFromMatrixColumn(i,0),t.multiplyScalar(-e),C.add(t)}})(),O=(()=>{const t=new n.Vector3;return function(e,n){!0===i.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(i.object.up,t)),t.multiplyScalar(e),C.add(t)}})(),G=(()=>{const t=new n.Vector3;return function(e,s){const r=i.domElement;if(r&&i.object instanceof n.PerspectiveCamera&&i.object.isPerspectiveCamera){const n=i.object.position;t.copy(n).sub(i.target);let o=t.length();o*=Math.tan(i.object.fov/2*Math.PI/180),U(2*e*o/r.clientHeight,i.object.matrix),O(2*s*o/r.clientHeight,i.object.matrix)}else r&&i.object instanceof n.OrthographicCamera&&i.object.isOrthographicCamera?(U(e*(i.object.right-i.object.left)/i.object.zoom/r.clientWidth,i.object.matrix),O(s*(i.object.top-i.object.bottom)/i.object.zoom/r.clientHeight,i.object.matrix)):i.enablePan=!1}})();function k(t){i.object instanceof n.PerspectiveCamera&&i.object.isPerspectiveCamera||i.object instanceof n.OrthographicCamera&&i.object.isOrthographicCamera?m=t:i.enableZoom=!1}function L(t){k(m/t)}function N(t){k(m*t)}function H(t){if(!i.zoomToCursor||!i.domElement)return;Q=!0;const e=i.domElement.getBoundingClientRect(),n=t.clientX-e.left,s=t.clientY-e.top,r=e.width,o=e.height;M.x=n/r*2-1,M.y=-s/o*2+1,S.set(M.x,M.y,1).unproject(i.object).sub(i.object.position).normalize()}function z(t){return Math.max(i.minDistance,Math.min(i.maxDistance,t))}function V(t){v.set(t.clientX,t.clientY)}function J(t){y.set(t.clientX,t.clientY)}function j(){if(1==D.length)v.set(D[0].pageX,D[0].pageY);else{const t=.5*(D[0].pageX+D[1].pageX),e=.5*(D[0].pageY+D[1].pageY);v.set(t,e)}}function Y(){if(1==D.length)y.set(D[0].pageX,D[0].pageY);else{const t=.5*(D[0].pageX+D[1].pageX),e=.5*(D[0].pageY+D[1].pageY);y.set(t,e)}}function K(){const t=D[0].pageX-D[1].pageX,e=D[0].pageY-D[1].pageY,i=Math.sqrt(t*t+e*e);w.set(0,i)}function q(t){if(1==D.length)B.set(t.pageX,t.pageY);else{const e=rt(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);B.set(i,n)}E.subVectors(B,v).multiplyScalar(i.rotateSpeed);const e=i.domElement;e&&(R(2*Math.PI*E.x/e.clientHeight),P(2*Math.PI*E.y/e.clientHeight)),v.copy(B)}function X(t){if(1==D.length)I.set(t.pageX,t.pageY);else{const e=rt(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);I.set(i,n)}_.subVectors(I,y).multiplyScalar(i.panSpeed),G(_.x,_.y),y.copy(I)}function W(t){const e=rt(t),n=t.pageX-e.x,s=t.pageY-e.y,r=Math.sqrt(n*n+s*s);b.set(0,r),x.set(0,Math.pow(b.y/w.y,i.zoomSpeed)),L(x.y),w.copy(b)}function Z(t){var e,s;!1!==i.enabled&&(0===D.length&&(null==(e=i.domElement)||e.ownerDocument.addEventListener("pointermove",$),null==(s=i.domElement)||s.ownerDocument.addEventListener("pointerup",tt)),function(t){D.push(t)}(t),"touch"===t.pointerType?function(t){switch(st(t),D.length){case 1:switch(i.touches.ONE){case n.TOUCH.ROTATE:if(!1===i.enableRotate)return;j(),d=u.TOUCH_ROTATE;break;case n.TOUCH.PAN:if(!1===i.enablePan)return;Y(),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(i.touches.TWO){case n.TOUCH.DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;i.enableZoom&&K(),i.enablePan&&Y(),d=u.TOUCH_DOLLY_PAN;break;case n.TOUCH.DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;i.enableZoom&&K(),i.enableRotate&&j(),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&i.dispatchEvent(r)}(t):function(t){let e;switch(t.button){case 0:e=i.mouseButtons.LEFT;break;case 1:e=i.mouseButtons.MIDDLE;break;case 2:e=i.mouseButtons.RIGHT;break;default:e=-1}switch(e){case n.MOUSE.DOLLY:if(!1===i.enableZoom)return;!function(t){H(t),w.set(t.clientX,t.clientY)}(t),d=u.DOLLY;break;case n.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enablePan)return;J(t),d=u.PAN}else{if(!1===i.enableRotate)return;V(t),d=u.ROTATE}break;case n.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===i.enableRotate)return;V(t),d=u.ROTATE}else{if(!1===i.enablePan)return;J(t),d=u.PAN}break;default:d=u.NONE}d!==u.NONE&&i.dispatchEvent(r)}(t))}function $(t){!1!==i.enabled&&("touch"===t.pointerType?function(t){switch(st(t),d){case u.TOUCH_ROTATE:if(!1===i.enableRotate)return;q(t),i.update();break;case u.TOUCH_PAN:if(!1===i.enablePan)return;X(t),i.update();break;case u.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;!function(t){i.enableZoom&&W(t),i.enablePan&&X(t)}(t),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;!function(t){i.enableZoom&&W(t),i.enableRotate&&q(t)}(t),i.update();break;default:d=u.NONE}}(t):function(t){if(!1!==i.enabled)switch(d){case u.ROTATE:if(!1===i.enableRotate)return;!function(t){B.set(t.clientX,t.clientY),E.subVectors(B,v).multiplyScalar(i.rotateSpeed);const e=i.domElement;e&&(R(2*Math.PI*E.x/e.clientHeight),P(2*Math.PI*E.y/e.clientHeight)),v.copy(B),i.update()}(t);break;case u.DOLLY:if(!1===i.enableZoom)return;!function(t){b.set(t.clientX,t.clientY),x.subVectors(b,w),x.y>0?L(F()):x.y<0&&N(F()),w.copy(b),i.update()}(t);break;case u.PAN:if(!1===i.enablePan)return;!function(t){I.set(t.clientX,t.clientY),_.subVectors(I,y).multiplyScalar(i.panSpeed),G(_.x,_.y),y.copy(I),i.update()}(t)}}(t))}function tt(t){var e,n,s;!function(t){delete T[t.pointerId];for(let e=0;e<D.length;e++)if(D[e].pointerId==t.pointerId)return void D.splice(e,1)}(t),0===D.length&&(null==(e=i.domElement)||e.releasePointerCapture(t.pointerId),null==(n=i.domElement)||n.ownerDocument.removeEventListener("pointermove",$),null==(s=i.domElement)||s.ownerDocument.removeEventListener("pointerup",tt)),i.dispatchEvent(l),d=u.NONE}function et(t){!1===i.enabled||!1===i.enableZoom||d!==u.NONE&&d!==u.ROTATE||(t.preventDefault(),i.dispatchEvent(r),function(t){H(t),t.deltaY<0?N(F()):t.deltaY>0&&L(F()),i.update()}(t),i.dispatchEvent(l))}function it(t){!1!==i.enabled&&!1!==i.enablePan&&function(t){let e=!1;switch(t.code){case i.keys.UP:G(0,i.keyPanSpeed),e=!0;break;case i.keys.BOTTOM:G(0,-i.keyPanSpeed),e=!0;break;case i.keys.LEFT:G(i.keyPanSpeed,0),e=!0;break;case i.keys.RIGHT:G(-i.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),i.update())}(t)}function nt(t){!1!==i.enabled&&t.preventDefault()}function st(t){let e=T[t.pointerId];void 0===e&&(e=new n.Vector2,T[t.pointerId]=e),e.set(t.pageX,t.pageY)}function rt(t){const e=t.pointerId===D[0].pointerId?D[1]:D[0];return T[e.pointerId]}this.dollyIn=(t=F())=>{N(t),i.update()},this.dollyOut=(t=F())=>{L(t),i.update()},this.getScale=()=>m,this.setScale=t=>{k(t),i.update()},this.getZoomScale=()=>F(),void 0!==e&&this.connect(e),this.update()}}class u extends l{constructor(t,e){super(t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=n.MOUSE.PAN,this.mouseButtons.RIGHT=n.MOUSE.ROTATE,this.touches.ONE=n.TOUCH.PAN,this.touches.TWO=n.TOUCH.DOLLY_ROTATE}}},jA9d:(t,e,i)=>{"use strict";i.d(e,{Y:()=>s});var n=i("jBc9");class s extends n.DataTextureLoader{constructor(t){super(t),this.type=n.HalfFloatType}parse(t){const e=function(t,e){switch(t){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(e||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(e||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(e||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(e||""))}},i=function(t,e,i){e=e||1024;let n=t.pos,s=-1,r=0,o="",a=String.fromCharCode.apply(null,new Uint16Array(t.subarray(n,n+128)));for(;0>(s=a.indexOf("\n"))&&r<e&&n<t.byteLength;)o+=a,r+=a.length,n+=128,a+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(n,n+128)));return-1<s&&(!1!==i&&(t.pos+=r+s+1),o+a.slice(0,s))},s=function(t,e,i,n){const s=t[e+3],r=Math.pow(2,s-128)/255;i[n+0]=t[e+0]*r,i[n+1]=t[e+1]*r,i[n+2]=t[e+2]*r,i[n+3]=1},r=function(t,e,i,s){const r=t[e+3],o=Math.pow(2,r-128)/255;i[s+0]=n.DataUtils.toHalfFloat(Math.min(t[e+0]*o,65504)),i[s+1]=n.DataUtils.toHalfFloat(Math.min(t[e+1]*o,65504)),i[s+2]=n.DataUtils.toHalfFloat(Math.min(t[e+2]*o,65504)),i[s+3]=n.DataUtils.toHalfFloat(1)},o=new Uint8Array(t);o.pos=0;const a=function(t){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*FORMAT=(\S+)\s*$/,o=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let h,A;for((t.pos>=t.byteLength||!(h=i(t)))&&e(1,"no header found"),(A=h.match(/^#\?(\S+)/))||e(3,"bad initial token"),a.valid|=1,a.programtype=A[1],a.string+=h+"\n";h=i(t),!1!==h;)if(a.string+=h+"\n","#"!==h.charAt(0)){if((A=h.match(n))&&(a.gamma=parseFloat(A[1])),(A=h.match(s))&&(a.exposure=parseFloat(A[1])),(A=h.match(r))&&(a.valid|=2,a.format=A[1]),(A=h.match(o))&&(a.valid|=4,a.height=parseInt(A[1],10),a.width=parseInt(A[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=h+"\n";return 2&a.valid||e(3,"missing format specifier"),4&a.valid||e(3,"missing image size specifier"),a}(o),h=a.width,A=a.height,c=function(t,i,n){const s=i;if(s<8||s>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);s!==(t[2]<<8|t[3])&&e(3,"wrong scanline width");const r=new Uint8Array(4*i*n);r.length||e(4,"unable to allocate buffer space");let o=0,a=0;const h=4*s,A=new Uint8Array(4),c=new Uint8Array(h);let l=n;for(;l>0&&a<t.byteLength;){a+4>t.byteLength&&e(1),A[0]=t[a++],A[1]=t[a++],A[2]=t[a++],A[3]=t[a++],2==A[0]&&2==A[1]&&(A[2]<<8|A[3])==s||e(3,"bad rgbe scanline format");let i,n=0;for(;n<h&&a<t.byteLength;){i=t[a++];const s=i>128;if(s&&(i-=128),(0===i||n+i>h)&&e(3,"bad scanline data"),s){const e=t[a++];for(let t=0;t<i;t++)c[n++]=e}else c.set(t.subarray(a,a+i),n),n+=i,a+=i}const u=s;for(let t=0;t<u;t++){let e=0;r[o]=c[t+e],e+=s,r[o+1]=c[t+e],e+=s,r[o+2]=c[t+e],e+=s,r[o+3]=c[t+e],o+=4}l--}return r}(o.subarray(o.pos),h,A);let l,u,d;switch(this.type){case n.FloatType:d=c.length/4;const t=new Float32Array(4*d);for(let i=0;i<d;i++)s(c,4*i,t,4*i);l=t,u=n.FloatType;break;case n.HalfFloatType:d=c.length/4;const e=new Uint16Array(4*d);for(let i=0;i<d;i++)r(c,4*i,e,4*i);l=e,u=n.HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:h,height:A,data:l,header:a.string,gamma:a.gamma,exposure:a.exposure,type:u}}setDataType(t){return this.type=t,this}load(t,e,i,s){return super.load(t,(function(t,i){switch(t.type){case n.FloatType:case n.HalfFloatType:"colorSpace"in t?t.colorSpace="srgb-linear":t.encoding=3e3,t.minFilter=n.LinearFilter,t.magFilter=n.LinearFilter,t.generateMipmaps=!1,t.flipY=!0}e&&e(t,i)}),i,s)}}},jJgd:(t,e,i)=>{"use strict";let n;i.d(e,{f:()=>s});const s=()=>{if(n)return n;const t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let i,s="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";WebAssembly.validate(t)&&(s="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");const r=WebAssembly.instantiate(function(t){const i=new Uint8Array(t.length);for(let e=0;e<t.length;++e){const n=t.charCodeAt(e);i[e]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let n=0;for(let s=0;s<t.length;++s)i[n++]=i[s]<60?e[i[s]]:64*(i[s]-60)+i[++s];return i.buffer.slice(0,n)}(s),{}).then((t=>{i=t.instance,i.exports.__wasm_call_ctors()}));function o(t,e,n,s,r,o){const a=i.exports.sbrk,h=n+3&-4,A=a(h*s),c=a(r.length),l=new Uint8Array(i.exports.memory.buffer);l.set(r,c);const u=t(A,n,s,c,r.length);if(0===u&&o&&o(A,h,s),e.set(l.subarray(A,A+n*s)),a(A-a(0)),0!==u)throw new Error(`Malformed buffer data: ${u}`)}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return n={ready:r,supported:!0,decodeVertexBuffer(t,e,n,s,r){o(i.exports.meshopt_decodeVertexBuffer,t,e,n,s,i.exports[a[r]])},decodeIndexBuffer(t,e,n,s){o(i.exports.meshopt_decodeIndexBuffer,t,e,n,s)},decodeIndexSequence(t,e,n,s){o(i.exports.meshopt_decodeIndexSequence,t,e,n,s)},decodeGltfBuffer(t,e,n,s,r,A){o(i.exports[h[r]],t,e,n,s,i.exports[a[A]])}},n}},l2gs:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});const n=class t{constructor({trackGPU:e=!1,logsPerSecond:i=30,samplesLog:n=60,samplesGraph:s=10,precision:r=2,minimal:o=!1,horizontal:a=!0,mode:h=0}={}){this.gl=null,this.ext=null,this.activeQuery=null,this.gpuQueries=[],this.threeRendererPatched=!1,this.frames=0,this.renderCount=0,this.isRunningCPUProfiling=!1,this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalGpuDurationCompute=0,this.totalFps=0,this.gpuPanel=null,this.gpuPanelCompute=null,this.averageFps={logs:[],graph:[]},this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.averageGpuCompute={logs:[],graph:[]},this.handleClick=t=>{t.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},this.handleResize=()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2),this.gpuPanelCompute&&this.resizePanel(this.gpuPanelCompute,3)},this.mode=h,this.horizontal=a,this.minimal=o,this.trackGPU=e,this.samplesLog=n,this.samplesGraph=s,this.precision=r,this.logsPerSecond=i,this.dom=document.createElement("div"),this.initializeDOM(),this.beginTime=performance.now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.fpsPanel=this.addPanel(new t.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new t.Panel("CPU","#0f0","#020"),1),this.setupEventListeners()}initializeDOM(){this.dom.style.cssText=`\n      position: fixed;\n      top: 0;\n      left: 0;\n      opacity: 0.9;\n      z-index: 10000;\n      ${this.minimal?"cursor: pointer;":""}\n    `}setupEventListeners(){this.minimal?(this.dom.addEventListener("click",this.handleClick),this.showPanel(this.mode)):window.addEventListener("resize",this.handleResize)}async init(t){t&&(this.handleThreeRenderer(t)||await this.handleWebGPURenderer(t)||this.initializeWebGL(t))}handleThreeRenderer(t){return!(!t.isWebGLRenderer||this.threeRendererPatched)&&(this.patchThreeRenderer(t),this.gl=t.getContext(),this.trackGPU&&this.initializeGPUTracking(),!0)}async handleWebGPURenderer(t){return!!t.isWebGPURenderer&&(this.trackGPU&&(t.backend.trackTimestamp=!0,await t.hasFeatureAsync("timestamp-query")&&this.initializeWebGPUPanels()),this.info=t.info,!0)}initializeWebGPUPanels(){this.gpuPanel=this.addPanel(new t.Panel("GPU","#ff0","#220"),2),this.gpuPanelCompute=this.addPanel(new t.Panel("CPT","#e1e1e1","#212121"),3)}initializeWebGL(t){if(t instanceof WebGL2RenderingContext)this.gl=t;else{if(!(t instanceof HTMLCanvasElement||t instanceof OffscreenCanvas))return!1;if(this.gl=t.getContext("webgl2"),!this.gl)return!1}return!0}initializeGPUTracking(){this.gl&&(this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new t.Panel("GPU","#ff0","#220"),2)))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}update(){this.info?this.processWebGPUTimestamps():this.processGpuQueries(),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.updateAverages(),this.resetCounters()}processWebGPUTimestamps(){this.totalGpuDuration=this.info.render.timestamp,this.totalGpuDurationCompute=this.info.compute.timestamp,this.addToAverage(this.totalGpuDurationCompute,this.averageGpuCompute)}updateAverages(){this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu)}resetCounters(){this.renderCount=0,0===this.totalCpuDuration&&this.beginProfiling("cpu-started"),this.totalCpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}resizePanel(t,e){t.canvas.style.position="absolute",this.minimal?t.canvas.style.display="none":(t.canvas.style.display="block",this.horizontal?(t.canvas.style.top="0px",t.canvas.style.left=e*t.WIDTH/t.PR+"px"):(t.canvas.style.left="0px",t.canvas.style.top=e*t.HEIGHT/t.PR+"px"))}addPanel(t,e){return t.canvas&&(this.dom.appendChild(t.canvas),this.resizePanel(t,e)),t}showPanel(t){for(let e=0;e<this.dom.children.length;e++)this.dom.children[e].style.display=e===t?"block":"none";this.mode=t}processGpuQueries(){this.gl&&this.ext&&(this.totalGpuDuration=0,this.gpuQueries.forEach(((t,e)=>{if(this.gl){const i=this.gl.getQueryParameter(t.query,this.gl.QUERY_RESULT_AVAILABLE),n=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(i&&!n){const i=1e-6*this.gl.getQueryParameter(t.query,this.gl.QUERY_RESULT);this.totalGpuDuration+=i,this.gl.deleteQuery(t.query),this.gpuQueries.splice(e,1)}}})))}endInternal(){this.frames++;const t=(performance||Date).now(),e=t-this.prevTime;if(t>=this.prevCpuTime+1e3/this.logsPerSecond){const i=Math.round(1e3*this.frames/e);this.addToAverage(i,this.averageFps),this.updatePanel(this.fpsPanel,this.averageFps,0),this.updatePanel(this.msPanel,this.averageCpu,this.precision),this.updatePanel(this.gpuPanel,this.averageGpu,this.precision),this.gpuPanelCompute&&this.updatePanel(this.gpuPanelCompute,this.averageGpuCompute),this.frames=0,this.prevCpuTime=t,this.prevTime=t}return t}addToAverage(t,e){e.logs.push(t),e.logs.length>this.samplesLog&&e.logs.shift(),e.graph.push(t),e.graph.length>this.samplesGraph&&e.graph.shift()}beginProfiling(t){window.performance&&(window.performance.mark(t),this.isRunningCPUProfiling=!0)}endProfiling(t,e,i){if(window.performance&&e&&this.isRunningCPUProfiling){window.performance.mark(e);const n=performance.measure(i,t,e);this.totalCpuDuration+=n.duration,this.isRunningCPUProfiling=!1}}updatePanel(t,e,i=2){if(e.logs.length>0){let n=0,s=.01;for(let t=0;t<e.logs.length;t++)n+=e.logs[t],e.logs[t]>s&&(s=e.logs[t]);let r=0,o=.01;for(let t=0;t<e.graph.length;t++)r+=e.graph[t],e.graph[t]>o&&(o=e.graph[t]);t&&t.update(n/Math.min(e.logs.length,this.samplesLog),r/Math.min(e.graph.length,this.samplesGraph),s,o,i)}}get domElement(){return this.dom}patchThreeRenderer(t){const e=t.render,i=this;t.render=function(t,n){i.begin(),e.call(this,t,n),i.end()},this.threeRendererPatched=!0}};n.Panel=class{constructor(t,e,i){this.name=t,this.fg=e,this.bg=i,this.gradient=null,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=this.WIDTH,this.canvas.height=this.HEIGHT,this.canvas.style.width="90px",this.canvas.style.height="48px",this.canvas.style.position="absolute",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.initializeCanvas()}createGradient(){if(!this.context)throw new Error("No context");const t=this.context.createLinearGradient(0,this.GRAPH_Y,0,this.GRAPH_Y+this.GRAPH_HEIGHT);let e;const i=this.fg;switch(this.fg.toLowerCase()){case"#0ff":e="#006666";break;case"#0f0":e="#006600";break;case"#ff0":e="#666600";break;case"#e1e1e1":e="#666666";break;default:e=this.bg}return t.addColorStop(0,e),t.addColorStop(1,i),t}initializeCanvas(){this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.gradient=this.createGradient(),this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillStyle=this.fg,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(t,e,i,n,s=0){if(!this.context||!this.gradient)return;const r=Math.min(1/0,t),o=Math.max(i,t);n=Math.max(n,e),this.context.globalAlpha=1,this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(`${t.toFixed(s)} ${this.name} (${r.toFixed(s)}-${parseFloat(o.toFixed(s))})`,this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT);const a=this.GRAPH_HEIGHT-(1-e/n)*this.GRAPH_HEIGHT;a>0&&(this.context.globalAlpha=1,this.context.fillStyle=this.gradient,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y+this.GRAPH_HEIGHT-a,this.PR,a))}};let s=n},"m/r/":(t,e,i)=>{"use strict";i.d(e,{g:()=>v});var n=i("jBc9");const s=new n.Frustum,r=new n.Vector3,o=new n.Vector3,a=new n.Vector3,h=new n.Vector3,A=new n.Vector3,c=new n.Vector3,l=new n.Vector3,u=new n.Vector3,d=new n.Vector3,p=new n.Vector3,f=new n.Vector3,g=new n.Vector3,m=new n.Vector3,C=new n.Vector3;class v{constructor(t,e,i){this.camera=t,this.scene=e,this.startPoint=new n.Vector3,this.endPoint=new n.Vector3,this.collection=[],this.deep=i||Number.MAX_VALUE}select(t,e){return this.startPoint=t||this.startPoint,this.endPoint=e||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(s,this.scene),this.collection}updateFrustum(t,e){if(t=t||this.startPoint,e=e||this.endPoint,t.x===e.x&&(e.x+=Number.EPSILON),t.y===e.y&&(e.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera)o.copy(t),o.x=Math.min(t.x,e.x),o.y=Math.max(t.y,e.y),e.x=Math.max(t.x,e.x),e.y=Math.min(t.y,e.y),a.setFromMatrixPosition(this.camera.matrixWorld),h.copy(o),A.set(e.x,o.y,0),c.copy(e),l.set(o.x,e.y,0),h.unproject(this.camera),A.unproject(this.camera),c.unproject(this.camera),l.unproject(this.camera),g.copy(h).sub(a),m.copy(A).sub(a),C.copy(c).sub(a),g.normalize(),m.normalize(),C.normalize(),g.multiplyScalar(this.deep),m.multiplyScalar(this.deep),C.multiplyScalar(this.deep),g.add(a),m.add(a),C.add(a),(i=s.planes)[0].setFromCoplanarPoints(a,h,A),i[1].setFromCoplanarPoints(a,A,c),i[2].setFromCoplanarPoints(c,l,a),i[3].setFromCoplanarPoints(l,h,a),i[4].setFromCoplanarPoints(A,c,l),i[5].setFromCoplanarPoints(C,m,g),i[5].normal.multiplyScalar(-1);else if(this.camera.isOrthographicCamera){const n=Math.min(t.x,e.x),r=Math.max(t.y,e.y),o=Math.max(t.x,e.x),a=Math.min(t.y,e.y);var i;h.set(n,r,-1),A.set(o,r,-1),c.set(o,a,-1),l.set(n,a,-1),u.set(n,r,1),d.set(o,r,1),p.set(o,a,1),f.set(n,a,1),h.unproject(this.camera),A.unproject(this.camera),c.unproject(this.camera),l.unproject(this.camera),u.unproject(this.camera),d.unproject(this.camera),p.unproject(this.camera),f.unproject(this.camera),(i=s.planes)[0].setFromCoplanarPoints(h,u,d),i[1].setFromCoplanarPoints(A,d,p),i[2].setFromCoplanarPoints(p,f,l),i[3].setFromCoplanarPoints(f,u,h),i[4].setFromCoplanarPoints(A,c,l),i[5].setFromCoplanarPoints(p,d,u),i[5].normal.multiplyScalar(-1)}}searchChildInFrustum(t,e){if((e.isMesh||e.isLine||e.isPoints)&&void 0!==e.material&&(null===e.geometry.boundingSphere&&e.geometry.computeBoundingSphere(),r.copy(e.geometry.boundingSphere.center),r.applyMatrix4(e.matrixWorld),t.containsPoint(r)&&this.collection.push(e)),e.children.length>0)for(let i=0;i<e.children.length;i++)this.searchChildInFrustum(t,e.children[i])}}},p0GV:(t,e,i)=>{"use strict";i.d(e,{a:()=>xi,zh:()=>vi});var n=i("1a1p"),s=B(),r=t=>g(t,s),o=B();r.write=t=>g(t,o);var a=B();r.onStart=t=>g(t,a);var h=B();r.onFrame=t=>g(t,h);var A=B();r.onFinish=t=>g(t,A);var c=[];r.setTimeout=(t,e)=>{const i=r.now()+e,n=()=>{const t=c.findIndex((t=>t.cancel==n));~t&&c.splice(t,1),p-=~t?1:0},s={time:i,handler:t,cancel:n};return c.splice(l(i),0,s),p+=1,m(),s};var l=t=>~(~c.findIndex((e=>e.time>t))||~c.length);r.cancel=t=>{a.delete(t),h.delete(t),A.delete(t),s.delete(t),o.delete(t)},r.sync=t=>{f=!0,r.batchedUpdates(t),f=!1},r.throttle=t=>{let e;function i(){try{t(...e)}finally{e=null}}function n(...t){e=t,r.onStart(i)}return n.handler=t,n.cancel=()=>{a.delete(i),e=null},n};var u="undefined"!=typeof window?window.requestAnimationFrame:()=>{};r.use=t=>u=t,r.now="undefined"!=typeof performance?()=>performance.now():Date.now,r.batchedUpdates=t=>t(),r.catch=console.error,r.frameLoop="always",r.advance=()=>{"demand"!==r.frameLoop||v()};var d=-1,p=0,f=!1;function g(t,e){f?(e.delete(t),t(0)):(e.add(t),m())}function m(){d<0&&(d=0,"demand"!==r.frameLoop&&u(C))}function C(){~d&&(u(C),r.batchedUpdates(v))}function v(){const t=d;d=r.now();const e=l(d);e&&(E(c.splice(0,e),(t=>t.handler())),p-=e),p?(a.flush(),s.flush(t?Math.min(64,d-t):16.667),h.flush(),o.flush(),A.flush()):d=-1}function B(){let t=new Set,e=t;return{add(i){p+=e!=t||t.has(i)?0:1,t.add(i)},delete:i=>(p-=e==t&&t.has(i)?1:0,t.delete(i)),flush(i){e.size&&(t=new Set,p-=e.size,E(e,(e=>e(i)&&t.add(e))),p+=t.size,e=t)}}}function E(t,e){t.forEach((t=>{try{e(t)}catch(i){r.catch(i)}}))}var y=i("q1tI"),I=Object.defineProperty,_={};function w(){}((t,e)=>{for(var i in e)I(t,i,{get:e[i],enumerable:!0})})(_,{assign:()=>k,colors:()=>U,createStringInterpolator:()=>T,skipAnimation:()=>O,to:()=>F,willAdvance:()=>G});var b={arr:Array.isArray,obj:t=>!!t&&"Object"===t.constructor.name,fun:t=>"function"===typeof t,str:t=>"string"===typeof t,num:t=>"number"===typeof t,und:t=>void 0===t};function x(t,e){if(b.arr(t)){if(!b.arr(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}return t===e}var S=(t,e)=>t.forEach(e);function M(t,e,i){if(b.arr(t))for(let n=0;n<t.length;n++)e.call(i,t[n],`${n}`);else for(const n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n)}var Q=t=>b.und(t)?[]:b.arr(t)?t:[t];function D(t,e){if(t.size){const i=Array.from(t);t.clear(),S(i,e)}}var T,F,R=(t,...e)=>D(t,(t=>t(...e))),P=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),U=null,O=!1,G=w,k=t=>{t.to&&(F=t.to),t.now&&(r.now=t.now),void 0!==t.colors&&(U=t.colors),null!=t.skipAnimation&&(O=t.skipAnimation),t.createStringInterpolator&&(T=t.createStringInterpolator),t.requestAnimationFrame&&r.use(t.requestAnimationFrame),t.batchedUpdates&&(r.batchedUpdates=t.batchedUpdates),t.willAdvance&&(G=t.willAdvance),t.frameLoop&&(r.frameLoop=t.frameLoop)},L=new Set,N=[],H=[],z=0,V={get idle(){return!L.size&&!N.length},start(t){z>t.priority?(L.add(t),r.onStart(J)):(j(t),r(K))},advance:K,sort(t){if(z)r.onFrame((()=>V.sort(t)));else{const e=N.indexOf(t);~e&&(N.splice(e,1),Y(t))}},clear(){N=[],L.clear()}};function J(){L.forEach(j),L.clear(),r(K)}function j(t){N.includes(t)||Y(t)}function Y(t){N.splice(function(e){const i=e.findIndex((e=>e.priority>t.priority));return i<0?e.length:i}(N),0,t)}function K(t){const e=H;for(let i=0;i<N.length;i++){const n=N[i];z=n.priority,n.idle||(G(n),n.advance(t),n.idle||e.push(n))}return z=0,(H=N).length=0,(N=e).length>0}var q="[-+]?\\d*\\.?\\d+",X=q+"%";function W(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Z=new RegExp("rgb"+W(q,q,q)),$=new RegExp("rgba"+W(q,q,q,q)),tt=new RegExp("hsl"+W(q,X,X)),et=new RegExp("hsla"+W(q,X,X,q)),it=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,nt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,st=/^#([0-9a-fA-F]{6})$/,rt=/^#([0-9a-fA-F]{8})$/;function ot(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function at(t,e,i){const n=i<.5?i*(1+e):i+e-i*e,s=2*i-n,r=ot(s,n,t+1/3),o=ot(s,n,t),a=ot(s,n,t-1/3);return Math.round(255*r)<<24|Math.round(255*o)<<16|Math.round(255*a)<<8}function ht(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function At(t){return(parseFloat(t)%360+360)%360/360}function ct(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(255*e)}function lt(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function ut(t){let e=function(t){let e;return"number"===typeof t?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=st.exec(t))?parseInt(e[1]+"ff",16)>>>0:U&&void 0!==U[t]?U[t]:(e=Z.exec(t))?(ht(e[1])<<24|ht(e[2])<<16|ht(e[3])<<8|255)>>>0:(e=$.exec(t))?(ht(e[1])<<24|ht(e[2])<<16|ht(e[3])<<8|ct(e[4]))>>>0:(e=it.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=rt.exec(t))?parseInt(e[1],16)>>>0:(e=nt.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=tt.exec(t))?(255|at(At(e[1]),lt(e[2]),lt(e[3])))>>>0:(e=et.exec(t))?(at(At(e[1]),lt(e[2]),lt(e[3]))|ct(e[4]))>>>0:null}(t);return null===e?t:(e=e||0,`rgba(${(4278190080&e)>>>24}, ${(16711680&e)>>>16}, ${(65280&e)>>>8}, ${(255&e)/255})`)}var dt=(t,e,i)=>{if(b.fun(t))return t;if(b.arr(t))return dt({range:t,output:e,extrapolate:i});if(b.str(t.output[0]))return T(t);const n=t,s=n.output,r=n.range||[0,1],o=n.extrapolateLeft||n.extrapolate||"extend",a=n.extrapolateRight||n.extrapolate||"extend",h=n.easing||(t=>t);return t=>{const e=function(t,e){for(var i=1;i<e.length-1&&!(e[i]>=t);++i);return i-1}(t,r);return function(t,e,i,n,s,r,o,a,h){let A=h?h(t):t;if(A<e){if("identity"===o)return A;"clamp"===o&&(A=e)}if(A>i){if("identity"===a)return A;"clamp"===a&&(A=i)}return n===s?n:e===i?t<=e?n:s:(e===-1/0?A=-A:i===1/0?A-=e:A=(A-e)/(i-e),A=r(A),n===-1/0?A=-A:s===1/0?A+=n:A=A*(s-n)+n,A)}(t,r[e],r[e+1],s[e],s[e+1],h,o,a,n.map)}},pt=1.70158,ft=1.525*pt,gt=pt+1,mt=2*Math.PI/3,Ct=2*Math.PI/4.5,vt=t=>{const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},Bt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>0===t?0:Math.pow(2,10*t-10),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>gt*t*t*t-pt*t*t,easeOutBack:t=>1+gt*Math.pow(t-1,3)+pt*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*(7.189819*t-ft)/2:(Math.pow(2*t-2,2)*((ft+1)*(2*t-2)+ft)+2)/2,easeInElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*mt),easeOutElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*mt)+1,easeInOutElastic:t=>0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Ct)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Ct)/2+1,easeInBounce:t=>1-vt(1-t),easeOutBounce:vt,easeInOutBounce:t=>t<.5?(1-vt(1-2*t))/2:(1+vt(2*t-1))/2,steps:(t,e="end")=>i=>{const n=(i="end"===e?Math.min(i,.999):Math.max(i,.001))*t;return s=("end"===e?Math.floor(n):Math.ceil(n))/t,Math.min(Math.max(s,0),1);var s}},Et=Symbol.for("FluidValue.get"),yt=Symbol.for("FluidValue.observers"),It=t=>Boolean(t&&t[Et]),_t=t=>t&&t[Et]?t[Et]():t,wt=t=>t[yt]||null;function bt(t,e){const i=t[yt];i&&i.forEach((t=>{!function(t,e){t.eventObserved?t.eventObserved(e):t(e)}(t,e)}))}var xt=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");St(this,t)}},St=(t,e)=>Tt(t,Et,e);function Mt(t,e){if(t[Et]){let i=t[yt];i||Tt(t,yt,i=new Set),i.has(e)||(i.add(e),t.observerAdded&&t.observerAdded(i.size,e))}return e}function Qt(t,e){const i=t[yt];if(i&&i.has(e)){const n=i.size-1;n?i.delete(e):t[yt]=null,t.observerRemoved&&t.observerRemoved(n,e)}}var Dt,Tt=(t,e,i)=>Object.defineProperty(t,e,{value:i,writable:!0,configurable:!0}),Ft=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Rt=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Pt=new RegExp(`(${Ft.source})(%|[a-z]+)`,"i"),Ut=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ot=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Gt=t=>{const[e,i]=kt(t);if(!e||P())return t;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);return n?n.trim():i&&i.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(i)||t:i&&Ot.test(i)?Gt(i):i||t},kt=t=>{const e=Ot.exec(t);if(!e)return[,];const[,i,n]=e;return[i,n]},Lt=(t,e,i,n,s)=>`rgba(${Math.round(e)}, ${Math.round(i)}, ${Math.round(n)}, ${s})`,Nt=t=>{Dt||(Dt=U?new RegExp(`(${Object.keys(U).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map((t=>_t(t).replace(Ot,Gt).replace(Rt,ut).replace(Dt,ut))),i=e.map((t=>t.match(Ft).map(Number))),n=i[0].map(((t,e)=>i.map((t=>{if(!(e in t))throw Error('The arity of each "output" value must be equal');return t[e]})))).map((e=>dt({...t,output:e})));return t=>{const i=!Pt.test(e[0])&&e.find((t=>Pt.test(t)))?.replace(Ft,"");let s=0;return e[0].replace(Ft,(()=>`${n[s++](t)}${i||""}`)).replace(Ut,Lt)}},Ht="react-spring: ",zt=t=>{const e=t;let i=!1;if("function"!=typeof e)throw new TypeError(`${Ht}once requires a function parameter`);return(...t)=>{i||(e(...t),i=!0)}},Vt=zt(console.warn),Jt=zt(console.warn);function jt(t){return b.str(t)&&("#"==t[0]||/\d/.test(t)||!P()&&Ot.test(t)||t in(U||{}))}var Yt=P()?y.useEffect:y.useLayoutEffect,Kt=()=>{const t=(0,y.useRef)(!1);return Yt((()=>(t.current=!0,()=>{t.current=!1})),[]),t};function qt(){const t=(0,y.useState)()[1],e=Kt();return()=>{e.current&&t(Math.random())}}var Xt=t=>(0,y.useEffect)(t,Wt),Wt=[];function Zt(t){const e=(0,y.useRef)();return(0,y.useEffect)((()=>{e.current=t})),e.current}var $t=Symbol.for("Animated:node"),te=t=>t&&t[$t],ee=(t,e)=>{return i=t,n=$t,s=e,Object.defineProperty(i,n,{value:s,writable:!0,configurable:!0});var i,n,s},ie=t=>t&&t[$t]&&t[$t].getPayload(),ne=class{constructor(){ee(this,this)}getPayload(){return this.payload||[]}},se=class extends ne{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,b.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new se(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return b.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value!==t&&(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,b.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},re=class extends se{constructor(t){super(0),this._string=null,this._toString=dt({output:[t,t]})}static create(t){return new re(t)}getValue(){const t=this._string;return null==t?this._string=this._toString(this._value):t}setValue(t){if(b.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else{if(!super.setValue(t))return!1;this._string=null}return!0}reset(t){t&&(this._toString=dt({output:[this.getValue(),t]})),this._value=0,super.reset()}},oe={dependencies:null},ae=class extends ne{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return M(this.source,((i,n)=>{var s;(s=i)&&s[$t]===s?e[n]=i.getValue(t):It(i)?e[n]=_t(i):t||(e[n]=i)})),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&S(this.payload,(t=>t.reset()))}_makePayload(t){if(t){const e=new Set;return M(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){oe.dependencies&&It(t)&&oe.dependencies.add(t);const e=ie(t);e&&S(e,(t=>this.add(t)))}},he=class extends ae{constructor(t){super(t)}static create(t){return new he(t)}getValue(){return this.source.map((t=>t.getValue()))}setValue(t){const e=this.getPayload();return t.length==e.length?e.map(((e,i)=>e.setValue(t[i]))).some(Boolean):(super.setValue(t.map(Ae)),!0)}};function Ae(t){return(jt(t)?re:se).create(t)}function ce(t){const e=te(t);return e?e.constructor:b.arr(t)?he:jt(t)?re:se}var le=(t,e)=>{const i=!b.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,y.forwardRef)(((n,s)=>{const o=(0,y.useRef)(null),a=i&&(0,y.useCallback)((t=>{o.current=function(t,e){return t&&(b.fun(t)?t(e):t.current=e),e}(s,t)}),[s]),[h,A]=function(t,e){const i=new Set;return oe.dependencies=i,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new ae(t),oe.dependencies=null,[t,i]}(n,e),c=qt(),l=()=>{const t=o.current;i&&!t||!1===(!!t&&e.applyAnimatedValues(t,h.getValue(!0)))&&c()},u=new ue(l,A),d=(0,y.useRef)();Yt((()=>(d.current=u,S(A,(t=>Mt(t,u))),()=>{d.current&&(S(d.current.deps,(t=>Qt(t,d.current))),r.cancel(d.current.update))}))),(0,y.useEffect)(l,[]),Xt((()=>()=>{const t=d.current;S(t.deps,(e=>Qt(e,t)))}));const p=e.getComponentProps(h.getValue());return y.createElement(t,{...p,ref:a})}))},ue=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){"change"==t.type&&r.write(this.update)}},de=Symbol.for("AnimatedComponent"),pe=t=>b.str(t)?t:t&&b.str(t.displayName)?t.displayName:b.fun(t)&&t.name||null;function fe(t,...e){return b.fun(t)?t(...e):t}var ge=(t,e)=>!0===t||!!(e&&t&&(b.fun(t)?t(e):Q(t).includes(e))),me=(t,e)=>b.obj(t)?e&&t[e]:t,Ce=(t,e)=>!0===t.default?t[e]:t.default?t.default[e]:void 0,ve=t=>t,Be=(t,e=ve)=>{let i=Ee;t.default&&!0!==t.default&&(t=t.default,i=Object.keys(t));const n={};for(const s of i){const i=e(t[s],s);b.und(i)||(n[s]=i)}return n},Ee=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ye={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ie(t){const e=function(t){const e={};let i=0;if(M(t,((t,n)=>{ye[n]||(e[n]=t,i++)})),i)return e}(t);if(e){const i={to:e};return M(t,((t,n)=>n in e||(i[n]=t))),i}return{...t}}function _e(t){return t=_t(t),b.arr(t)?t.map(_e):jt(t)?_.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function we(t){return b.fun(t)||b.arr(t)&&b.obj(t[0])}var be={tension:170,friction:26,mass:1,damping:1,easing:Bt.linear,clamp:!1},xe=class{constructor(){this.velocity=0,Object.assign(this,be)}};function Se(t,e){if(b.und(e.decay)){const i=!b.und(e.tension)||!b.und(e.friction);!i&&b.und(e.frequency)&&b.und(e.damping)&&b.und(e.mass)||(t.duration=void 0,t.decay=void 0),i&&(t.frequency=void 0)}else t.duration=void 0}var Me=[],Qe=class{constructor(){this.changed=!1,this.values=Me,this.toValues=null,this.fromValues=Me,this.config=new xe,this.immediate=!1}};function De(t,{key:e,props:i,defaultProps:n,state:s,actions:o}){return new Promise(((a,h)=>{let A,c,l=ge(i.cancel??n?.cancel,e);if(l)p();else{b.und(i.pause)||(s.paused=ge(i.pause,e));let t=n?.pause;!0!==t&&(t=s.paused||ge(t,e)),A=fe(i.delay||0,e),t?(s.resumeQueue.add(d),o.pause()):(o.resume(),d())}function u(){s.resumeQueue.add(d),s.timeouts.delete(c),c.cancel(),A=c.time-r.now()}function d(){A>0&&!_.skipAnimation?(s.delayed=!0,c=r.setTimeout(p,A),s.pauseQueue.add(u),s.timeouts.add(c)):p()}function p(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(u),s.timeouts.delete(c),t<=(s.cancelId||0)&&(l=!0);try{o.start({...i,callId:t,cancel:l},a)}catch(e){h(e)}}}))}var Te=(t,e)=>1==e.length?e[0]:e.some((t=>t.cancelled))?Pe(t.get()):e.every((t=>t.noop))?Fe(t.get()):Re(t.get(),e.every((t=>t.finished))),Fe=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Re=(t,e,i=!1)=>({value:t,finished:e,cancelled:i}),Pe=t=>({value:t,cancelled:!0,finished:!1});function Ue(t,e,i,n){const{callId:s,parentId:o,onRest:a}=e,{asyncTo:h,promise:A}=i;return o||t!==h||e.reset?i.promise=(async()=>{i.asyncId=s,i.asyncTo=t;const c=Be(e,((t,e)=>"onRest"===e?void 0:t));let l,u;const d=new Promise(((t,e)=>(l=t,u=e))),p=t=>{const e=s<=(i.cancelId||0)&&Pe(n)||s!==i.asyncId&&Re(n,!1);if(e)throw t.result=e,u(t),t},f=(t,e)=>{const r=new Ge,o=new ke;return(async()=>{if(_.skipAnimation)throw Oe(i),o.result=Re(n,!1),u(o),o;p(r);const a=b.obj(t)?{...t}:{...e,to:t};a.parentId=s,M(c,((t,e)=>{b.und(a[e])&&(a[e]=t)}));const h=await n.start(a);return p(r),i.paused&&await new Promise((t=>{i.resumeQueue.add(t)})),h})()};let g;if(_.skipAnimation)return Oe(i),Re(n,!1);try{let e;e=b.arr(t)?(async t=>{for(const e of t)await f(e)})(t):Promise.resolve(t(f,n.stop.bind(n))),await Promise.all([e.then(l),d]),g=Re(n.get(),!0,!1)}catch(m){if(m instanceof Ge)g=m.result;else{if(!(m instanceof ke))throw m;g=m.result}}finally{s==i.asyncId&&(i.asyncId=o,i.asyncTo=o?h:void 0,i.promise=o?A:void 0)}return b.fun(a)&&r.batchedUpdates((()=>{a(g,n,n.item)})),g})():A}function Oe(t,e){D(t.timeouts,(t=>t.cancel())),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Ge=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},ke=class extends Error{constructor(){super("SkipAnimationSignal")}},Le=t=>t instanceof He,Ne=1,He=class extends xt{constructor(){super(...arguments),this.id=Ne++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=te(this);return t&&t.getValue()}to(...t){return _.to(this,t)}interpolate(...t){return Vt(`${Ht}The "interpolate" function is deprecated in v9 (use "to" instead)`),_.to(this,t)}toJSON(){return this.get()}observerAdded(t){1==t&&this._attach()}observerRemoved(t){0==t&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){bt(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||V.sort(this),bt(this,{type:"priority",parent:this,priority:t})}},ze=Symbol.for("SpringPhase"),Ve=t=>(1&t[ze])>0,Je=t=>(2&t[ze])>0,je=t=>(4&t[ze])>0,Ye=(t,e)=>e?t[ze]|=3:t[ze]&=-3,Ke=(t,e)=>e?t[ze]|=4:t[ze]&=-5,qe=class extends He{constructor(t,e){if(super(),this.animation=new Qe,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!b.und(t)||!b.und(e)){const i=b.obj(t)?{...t}:{...e,from:t};b.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Je(this)||this._state.asyncTo)||je(this)}get goal(){return _t(this.animation.to)}get velocity(){const t=te(this);return t instanceof se?t.lastVelocity||0:t.getPayload().map((t=>t.lastVelocity||0))}get hasAnimated(){return Ve(this)}get isAnimating(){return Je(this)}get isPaused(){return je(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,i=!1;const n=this.animation;let{toValues:s}=n;const{config:r}=n,o=ie(n.to);!o&&It(n.to)&&(s=Q(_t(n.to))),n.values.forEach(((a,h)=>{if(a.done)return;const A=a.constructor==re?1:o?o[h].lastPosition:s[h];let c=n.immediate,l=A;if(!c){if(l=a.lastPosition,r.tension<=0)return void(a.done=!0);let e=a.elapsedTime+=t;const i=n.fromValues[h],s=null!=a.v0?a.v0:a.v0=b.arr(r.velocity)?r.velocity[h]:r.velocity;let o;const u=r.precision||(i==A?.005:Math.min(1,.001*Math.abs(A-i)));if(b.und(r.duration))if(r.decay){const t=!0===r.decay?.998:r.decay,n=Math.exp(-(1-t)*e);l=i+s/(1-t)*(1-n),c=Math.abs(a.lastPosition-l)<=u,o=s*n}else{o=null==a.lastVelocity?s:a.lastVelocity;const e=r.restVelocity||u/10,n=r.clamp?0:r.bounce,h=!b.und(n),d=i==A?a.v0>0:i<A;let p,f=!1;const g=1,m=Math.ceil(t/g);for(let t=0;t<m&&(p=Math.abs(o)>e,p||(c=Math.abs(A-l)<=u,!c));++t)h&&(f=l==A||l>A==d,f&&(o=-o*n,l=A)),o+=(1e-6*-r.tension*(l-A)+.001*-r.friction*o)/r.mass*g,l+=o*g}else{let n=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,a.durationProgress>0&&(a.elapsedTime=r.duration*a.durationProgress,e=a.elapsedTime+=t)),n=(r.progress||0)+e/this._memoizedDuration,n=n>1?1:n<0?0:n,a.durationProgress=n),l=i+r.easing(n)*(A-i),o=(l-a.lastPosition)/t,c=1==n}a.lastVelocity=o,Number.isNaN(l)&&(c=!0)}o&&!o[h].done&&(c=!1),c?a.done=!0:e=!1,a.setValue(l,r.round)&&(i=!0)}));const a=te(this),h=a.getValue();if(e){const t=_t(n.to);h===t&&!i||r.decay?i&&r.decay&&this._onChange(h):(a.setValue(t),this._onChange(t)),this._stop()}else i&&this._onChange(h)}set(t){return r.batchedUpdates((()=>{this._stop(),this._focus(t),this._set(t)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Je(this)){const{to:t,config:e}=this.animation;r.batchedUpdates((()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()}))}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let i;return b.und(t)?(i=this.queue||[],this.queue=[]):i=[b.obj(t)?t:{...e,to:t}],Promise.all(i.map((t=>this._update(t)))).then((t=>Te(this,t)))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Oe(this._state,t&&this._lastCallId),r.batchedUpdates((()=>this._stop(e,t))),this}reset(){this._update({reset:!0})}eventObserved(t){"change"==t.type?this._start():"priority"==t.type&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:i,from:n}=t;i=b.obj(i)?i[e]:i,(null==i||we(i))&&(i=void 0),n=b.obj(n)?n[e]:n,null==n&&(n=void 0);const s={to:i,from:n};return Ve(this)||(t.reverse&&([i,n]=[n,i]),n=_t(n),b.und(n)?te(this)||this._set(i):this._set(n)),s}_update({...t},e){const{key:i,defaultProps:n}=this;t.default&&Object.assign(n,Be(t,((t,e)=>/^on/.test(e)?me(t,i):t))),ii(this,t,"onProps"),ni(this,"onProps",t,this);const s=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const r=this._state;return De(++this._lastCallId,{key:i,props:t,defaultProps:n,state:r,actions:{pause:()=>{je(this)||(Ke(this,!0),R(r.pauseQueue),ni(this,"onPause",Re(this,Xe(this,this.animation.to)),this))},resume:()=>{je(this)&&(Ke(this,!1),Je(this)&&this._resume(),R(r.resumeQueue),ni(this,"onResume",Re(this,Xe(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then((i=>{if(t.loop&&i.finished&&(!e||!i.noop)){const e=We(t);if(e)return this._update(e,!0)}return i}))}_merge(t,e,i){if(e.cancel)return this.stop(!0),i(Pe(this));const n=!b.und(t.to),s=!b.und(t.from);if(n||s){if(!(e.callId>this._lastToId))return i(Pe(this));this._lastToId=e.callId}const{key:o,defaultProps:a,animation:h}=this,{to:A,from:c}=h;let{to:l=A,from:u=c}=t;!s||n||e.default&&!b.und(l)||(l=u),e.reverse&&([l,u]=[u,l]);const d=!x(u,c);d&&(h.from=u),u=_t(u);const p=!x(l,A);p&&this._focus(l);const f=we(e.to),{config:g}=h,{decay:m,velocity:C}=g;(n||s)&&(g.velocity=0),e.config&&!f&&function(t,e,i){i&&(Se(i={...i},e),e={...i,...e}),Se(t,e),Object.assign(t,e);for(const o in be)null==t[o]&&(t[o]=be[o]);let{frequency:n,damping:s}=t;const{mass:r}=t;b.und(n)||(n<.01&&(n=.01),s<0&&(s=0),t.tension=Math.pow(2*Math.PI/n,2)*r,t.friction=4*Math.PI*s*r/n)}(g,fe(e.config,o),e.config!==a.config?fe(a.config,o):void 0);let v=te(this);if(!v||b.und(l))return i(Re(this,!0));const B=b.und(e.reset)?s&&!e.default:!b.und(u)&&ge(e.reset,o),E=B?u:this.get(),y=_e(l),I=b.num(y)||b.arr(y)||jt(y),_=!f&&(!I||ge(a.immediate||e.immediate,o));if(p){const t=ce(l);if(t!==v.constructor){if(!_)throw Error(`Cannot animate between ${v.constructor.name} and ${t.name}, as the "to" prop suggests`);v=this._set(y)}}const w=v.constructor;let M=It(l),D=!1;if(!M){const t=B||!Ve(this)&&d;(p||t)&&(D=x(_e(E),y),M=!D),(x(h.immediate,_)||_)&&x(g.decay,m)&&x(g.velocity,C)||(M=!0)}if(D&&Je(this)&&(h.changed&&!B?M=!0:M||this._stop(A)),!f&&((M||It(A))&&(h.values=v.getPayload(),h.toValues=It(l)?null:w==re?[1]:Q(y)),h.immediate!=_&&(h.immediate=_,_||B||this._set(A)),M)){const{onRest:t}=h;S(ei,(t=>ii(this,e,t)));const n=Re(this,Xe(this,A));R(this._pendingCalls,n),this._pendingCalls.add(i),h.changed&&r.batchedUpdates((()=>{h.changed=!B,t?.(n,this),B?fe(a.onRest,n):h.onStart?.(n,this)}))}B&&this._set(E),f?i(Ue(e.to,e,this._state,this)):M?this._start():Je(this)&&!p?this._pendingCalls.add(i):i(Fe(E))}_focus(t){const e=this.animation;t!==e.to&&(wt(this)&&this._detach(),e.to=t,wt(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;It(e)&&(Mt(e,this),Le(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;It(t)&&Qt(t,this)}_set(t,e=!0){const i=_t(t);if(!b.und(i)){const t=te(this);if(!t||!x(i,t.getValue())){const n=ce(i);t&&t.constructor==n?t.setValue(i):ee(this,n.create(i)),t&&r.batchedUpdates((()=>{this._onChange(i,e)}))}}return te(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,ni(this,"onStart",Re(this,Xe(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),fe(this.animation.onChange,t,this)),fe(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;te(this).reset(_t(t.to)),t.immediate||(t.fromValues=t.values.map((t=>t.lastPosition))),Je(this)||(Ye(this,!0),je(this)||this._resume())}_resume(){_.skipAnimation?this.finish():V.start(this)}_stop(t,e){if(Je(this)){Ye(this,!1);const i=this.animation;S(i.values,(t=>{t.done=!0})),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),bt(this,{type:"idle",parent:this});const n=e?Pe(this.get()):Re(this.get(),Xe(this,t??i.to));R(this._pendingCalls,n),i.changed&&(i.changed=!1,ni(this,"onRest",n,this))}}};function Xe(t,e){const i=_e(e);return x(_e(t.get()),i)}function We(t,e=t.loop,i=t.to){const n=fe(e);if(n){const s=!0!==n&&Ie(n),r=(s||t).reverse,o=!s||s.reset;return Ze({...t,loop:e,default:!1,pause:void 0,to:!r||we(i)?i:void 0,from:o?t.from:void 0,reset:o,...s})}}function Ze(t){const{to:e,from:i}=t=Ie(t),n=new Set;return b.obj(e)&&ti(e,n),b.obj(i)&&ti(i,n),t.keys=n.size?Array.from(n):null,t}function $e(t){const e=Ze(t);return b.und(e.default)&&(e.default=Be(e)),e}function ti(t,e){M(t,((t,i)=>null!=t&&e.add(i)))}var ei=["onStart","onRest","onChange","onPause","onResume"];function ii(t,e,i){t.animation[i]=e[i]!==Ce(e,i)?me(e[i],t.key):void 0}function ni(t,e,...i){t.animation[e]?.(...i),t.defaultProps[e]?.(...i)}var si=["onStart","onChange","onRest"],ri=1,oi=class{constructor(t,e){this.id=ri++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((t=>t.idle&&!t.isDelayed&&!t.isPaused))}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each(((e,i)=>t[i]=e.get())),t}set(t){for(const e in t){const i=t[e];b.und(i)||this.springs[e].set(i)}}update(t){return t&&this.queue.push(Ze(t)),this}start(t){let{queue:e}=this;return t?e=Q(t).map(Ze):this.queue=[],this._flush?this._flush(this,e):(di(this,e),ai(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const i=this.springs;S(Q(e),(e=>i[e].stop(!!t)))}else Oe(this._state,this._lastAsyncId),this.each((e=>e.stop(!!t)));return this}pause(t){if(b.und(t))this.start({pause:!0});else{const e=this.springs;S(Q(t),(t=>e[t].pause()))}return this}resume(t){if(b.und(t))this.start({pause:!1});else{const e=this.springs;S(Q(t),(t=>e[t].resume()))}return this}each(t){M(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:i}=this._events,n=this._active.size>0,s=this._changed.size>0;(n&&!this._started||s&&!this._started)&&(this._started=!0,D(t,(([t,e])=>{e.value=this.get(),t(e,this,this._item)})));const r=!n&&this._started,o=s||r&&i.size?this.get():null;s&&e.size&&D(e,(([t,e])=>{e.value=o,t(e,this,this._item)})),r&&(this._started=!1,D(i,(([t,e])=>{e.value=o,t(e,this,this._item)})))}eventObserved(t){if("change"==t.type)this._changed.add(t.parent),t.idle||this._active.add(t.parent);else{if("idle"!=t.type)return;this._active.delete(t.parent)}r.onFrame(this._onFrame)}};function ai(t,e){return Promise.all(e.map((e=>hi(t,e)))).then((e=>Te(t,e)))}async function hi(t,e,i){const{keys:n,to:s,from:o,loop:a,onRest:h,onResolve:A}=e,c=b.obj(e.default)&&e.default;a&&(e.loop=!1),!1===s&&(e.to=null),!1===o&&(e.from=null);const l=b.arr(s)||b.fun(s)?s:void 0;l?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):S(si,(i=>{const n=e[i];if(b.fun(n)){const s=t._events[i];e[i]=({finished:t,cancelled:e})=>{const i=s.get(n);i?(t||(i.finished=!1),e&&(i.cancelled=!0)):s.set(n,{value:null,finished:t||!1,cancelled:e||!1})},c&&(c[i]=e[i])}}));const u=t._state;e.pause===!u.paused?(u.paused=e.pause,R(e.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(e.pause=!0);const d=(n||Object.keys(t.springs)).map((i=>t.springs[i].start(e))),p=!0===e.cancel||!0===Ce(e,"cancel");(l||p&&u.asyncId)&&d.push(De(++t._lastAsyncId,{props:e,state:u,actions:{pause:w,resume:w,start(e,i){p?(Oe(u,t._lastAsyncId),i(Pe(t))):(e.onRest=h,i(Ue(l,e,u,t)))}}})),u.paused&&await new Promise((t=>{u.resumeQueue.add(t)}));const f=Te(t,await Promise.all(d));if(a&&f.finished&&(!i||!f.noop)){const i=We(e,a,s);if(i)return di(t,[i]),hi(t,i,!0)}return A&&r.batchedUpdates((()=>A(f,t,t.item))),f}function Ai(t,e){const i={...t.springs};return e&&S(Q(e),(t=>{b.und(t.keys)&&(t=Ze(t)),b.obj(t.to)||(t={...t,to:void 0}),ui(i,t,(t=>li(t)))})),ci(t,i),i}function ci(t,e){M(e,((e,i)=>{t.springs[i]||(t.springs[i]=e,Mt(e,t))}))}function li(t,e){const i=new qe;return i.key=t,e&&Mt(i,e),i}function ui(t,e,i){e.keys&&S(e.keys,(n=>{(t[n]||(t[n]=i(n)))._prepareNode(e)}))}function di(t,e){S(e,(e=>{ui(t.springs,e,(e=>li(e,t)))}))}var pi,fi,gi=({children:t,...e})=>{const i=(0,y.useContext)(mi),n=e.pause||!!i.pause,s=e.immediate||!!i.immediate;e=function(t,e){const[i]=(0,y.useState)((()=>({inputs:e,result:t()}))),n=(0,y.useRef)(),s=n.current;let r=s;return r?Boolean(e&&r.inputs&&function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(e,r.inputs))||(r={inputs:e,result:t()}):r=i,(0,y.useEffect)((()=>{n.current=r,s==i&&(i.inputs=i.result=void 0)}),[r]),r.result}((()=>({pause:n,immediate:s})),[n,s]);const{Provider:r}=mi;return y.createElement(r,{value:e},t)},mi=(pi=gi,fi={},Object.assign(pi,y.createContext(fi)),pi.Provider._context=pi,pi.Consumer._context=pi,pi);gi.Provider=mi.Provider,gi.Consumer=mi.Consumer;var Ci=()=>{const t=[],e=function(e){Jt(`${Ht}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const n=[];return S(t,((t,s)=>{if(b.und(e))n.push(t.start());else{const r=i(e,t,s);r&&n.push(t.start(r))}})),n};e.current=t,e.add=function(e){t.includes(e)||t.push(e)},e.delete=function(e){const i=t.indexOf(e);~i&&t.splice(i,1)},e.pause=function(){return S(t,(t=>t.pause(...arguments))),this},e.resume=function(){return S(t,(t=>t.resume(...arguments))),this},e.set=function(e){S(t,((t,i)=>{const n=b.fun(e)?e(i,t):e;n&&t.set(n)}))},e.start=function(e){const i=[];return S(t,((t,n)=>{if(b.und(e))i.push(t.start());else{const s=this._getProps(e,t,n);s&&i.push(t.start(s))}})),i},e.stop=function(){return S(t,(t=>t.stop(...arguments))),this},e.update=function(e){return S(t,((t,i)=>t.update(this._getProps(e,t,i)))),this};const i=function(t,e,i){return b.fun(t)?t(i,e):t};return e._getProps=i,e};function vi(t,e){const i=b.fun(t),[[n],s]=function(t,e,i){const n=b.fun(e)&&e;n&&!i&&(i=[]);const s=(0,y.useMemo)((()=>n||3==arguments.length?Ci():void 0),[]),r=(0,y.useRef)(0),o=qt(),a=(0,y.useMemo)((()=>({ctrls:[],queue:[],flush(t,e){const i=Ai(t,e);return r.current>0&&!a.queue.length&&!Object.keys(i).some((e=>!t.springs[e]))?ai(t,e):new Promise((n=>{ci(t,i),a.queue.push((()=>{n(ai(t,e))})),o()}))}})),[]),h=(0,y.useRef)([...a.ctrls]),A=[],c=Zt(t)||0;function l(t,i){for(let s=t;s<i;s++){const t=h.current[s]||(h.current[s]=new oi(null,a.flush)),i=n?n(s,t):e[s];i&&(A[s]=$e(i))}}(0,y.useMemo)((()=>{S(h.current.slice(t,c),(t=>{(function(t,e){t.ref?.delete(t),e?.delete(t)})(t,s),t.stop(!0)})),h.current.length=t,l(c,t)}),[t]),(0,y.useMemo)((()=>{l(0,Math.min(c,t))}),i);const u=h.current.map(((t,e)=>Ai(t,A[e]))),d=(0,y.useContext)(gi),p=Zt(d),f=d!==p&&function(t){for(const e in t)return!0;return!1}(d);Yt((()=>{r.current++,a.ctrls=h.current;const{queue:t}=a;t.length&&(a.queue=[],S(t,(t=>t()))),S(h.current,((t,e)=>{s?.add(t),f&&t.start({default:d});const i=A[e];i&&(function(t,e){e&&t.ref!==e&&(t.ref?.delete(t),e.add(t),t.ref=e)}(t,i.ref),t.ref?t.queue.push(i):t.start(i))}))})),Xt((()=>()=>{S(a.ctrls,(t=>t.stop(!0)))}));const g=u.map((t=>({...t})));return s?[g,s]:g}(1,i?t:[t],i?e||[]:e);return i||2==arguments.length?[n,s]:n}var Bi=class extends He{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=dt(...e);const i=this._get(),n=ce(i);ee(this,n.create(i))}advance(t){const e=this._get();x(e,this.get())||(te(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&yi(this._active)&&Ii(this)}_get(){const t=b.arr(this.source)?this.source.map(_t):Q(_t(this.source));return this.calc(...t)}_start(){this.idle&&!yi(this._active)&&(this.idle=!1,S(ie(this),(t=>{t.done=!1})),_.skipAnimation?(r.batchedUpdates((()=>this.advance())),Ii(this)):V.start(this))}_attach(){let t=1;S(Q(this.source),(e=>{It(e)&&Mt(e,this),Le(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))})),this.priority=t,this._start()}_detach(){S(Q(this.source),(t=>{It(t)&&Qt(t,this)})),this._active.clear(),Ii(this)}eventObserved(t){"change"==t.type?t.idle?this.advance():(this._active.add(t.parent),this._start()):"idle"==t.type?this._active.delete(t.parent):"priority"==t.type&&(this.priority=Q(this.source).reduce(((t,e)=>Math.max(t,(Le(e)?e.priority:0)+1)),0))}};function Ei(t){return!1!==t.idle}function yi(t){return!t.size||Array.from(t).every(Ei)}function Ii(t){t.idle||(t.idle=!0,S(ie(t),(t=>{t.done=!0})),bt(t,{type:"idle",parent:t}))}_.assign({createStringInterpolator:Nt,to:(t,e)=>new Bi(t,e)}),V.advance;var _i=i("jBc9"),wi=["primitive"].concat(Object.keys(_i).filter((t=>/^[A-Z]/.test(t))).map((t=>t[0].toLowerCase()+t.slice(1))));_.assign({createStringInterpolator:Nt,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),(0,n.o)((()=>{r.advance()}));var bi=((t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:i=t=>new ae(t),getComponentProps:n=t=>t}={})=>{const s={applyAnimatedValues:e,createAnimatedStyle:i,getComponentProps:n},r=t=>{const e=pe(t)||"Anonymous";return(t=b.str(t)?r[t]||(r[t]=le(t,s)):t[de]||(t[de]=le(t,s))).displayName=`Animated(${e})`,t};return M(t,((e,i)=>{b.arr(t)&&(i=pe(e)),r[i]=r(e)})),{animated:r}})(wi,{applyAnimatedValues:n.k}),xi=bi.animated},pBfW:(t,e,i)=>{"use strict";i.d(e,{EY:()=>yt,PY:()=>X});var n=i("jBc9");function s(){var t=Object.create(null);function e(n,s){var r=n.id,o=n.name,a=n.dependencies;void 0===a&&(a=[]);var h=n.init;void 0===h&&(h=function(){});var A=n.getTransferables;if(void 0===A&&(A=null),!t[r])try{a=a.map((function(i){return i&&i.isWorkerModule&&(e(i,(function(t){if(t instanceof Error)throw t})),i=t[i.id].value),i})),h=i("<"+o+">.init",h),A&&(A=i("<"+o+">.getTransferables",A));var c=null;"function"===typeof h&&(c=h.apply(void 0,a)),t[r]={id:r,value:c,getTransferables:A},s(c)}catch(l){!l||l.noLog,s(l)}}function i(t,e){var i=void 0;self.troikaDefine=function(t){return i=t};var n=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+e+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(s){}return URL.revokeObjectURL(n),delete self.troikaDefine,i}self.addEventListener("message",(function(i){var n=i.data,s=n.messageId,r=n.action,o=n.data;try{"registerModule"===r&&e(o,(function(t){t instanceof Error?postMessage({messageId:s,success:!1,error:t.message}):postMessage({messageId:s,success:!0,result:{isCallable:"function"===typeof t}})})),"callModule"===r&&function(e,i){var n,s=e.id,r=e.args;t[s]&&"function"===typeof t[s].value||i(new Error("Worker module "+s+": not found or its 'init' did not return a function"));try{var o=(n=t[s]).value.apply(n,r);o&&"function"===typeof o.then?o.then(a,(function(t){return i(t instanceof Error?t:new Error(""+t))})):a(o)}catch(h){i(h)}function a(e){try{var n=t[s].getTransferables&&t[s].getTransferables(e);n&&Array.isArray(n)&&n.length||(n=void 0),i(e,n)}catch(h){i(h)}}}(o,(function(t,e){t instanceof Error?postMessage({messageId:s,success:!1,error:t.message}):postMessage({messageId:s,success:!0,result:t},e||void 0)}))}catch(a){postMessage({messageId:s,success:!1,error:a.stack})}}))}var r=function(){var t=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),t=!0}catch(e){}return r=function(){return t},t},o=0,a=0,h=!1,A=Object.create(null),c=Object.create(null),l=Object.create(null);function u(t){if((!t||"function"!==typeof t.init)&&!h)throw new Error("requires `options.init` function");var e=t.dependencies,i=t.init,n=t.getTransferables,s=t.workerId,a=function(t){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then((function(e){if("function"===typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return e._getInitResult=function(){var i=t.dependencies,n=t.init;i=Array.isArray(i)?i.map((function(t){return t&&(t=t.onMainThread||t)._getInitResult&&(t=t._getInitResult()),t})):[];var s=Promise.all(i).then((function(t){return n.apply(null,t)}));return e._getInitResult=function(){return s},s},e}(t);null==s&&(s="#default");var A="workerModule"+ ++o,l=t.name||A,f=null;function g(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(!r())return a.apply(void 0,t);if(!f){f=p(s,"registerModule",g.workerModuleData);var i=function(){f=null,c[s].delete(i)};(c[s]||(c[s]=new Set)).add(i)}return f.then((function(e){if(e.isCallable)return p(s,"callModule",{id:A,args:t});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return e=e&&e.map((function(t){return"function"!==typeof t||t.workerModuleData||(h=!0,t=u({workerId:s,name:"<"+l+"> function dependency: "+t.name,init:"function(){return (\n"+d(t)+"\n)}"}),h=!1),t&&t.workerModuleData&&(t=t.workerModuleData),t})),g.workerModuleData={isWorkerModule:!0,id:A,name:l,dependencies:e,init:d(i),getTransferables:n&&d(n)},g.onMainThread=a,g}function d(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function p(t,e,i){return new Promise((function(n,r){var o=++a;l[o]=function(t){t.success?n(t.result):r(new Error("Error in worker "+e+" call: "+t.error))},function(t){var e=A[t];if(!e){var i=d(s);(e=A[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+" **/\n\n;("+i+")()"],{type:"application/javascript"})))).onmessage=function(t){var e=t.data,i=e.messageId,n=l[i];if(!n)throw new Error("WorkerModule response with empty or unknown messageId");delete l[i],n(e)}}return e}(t).postMessage({messageId:o,action:e,data:i})}))}function f(){var t=function(t){function e(t,e,i,n,s,r,o,a){var h=1-o;a.x=h*h*t+2*h*o*i+o*o*s,a.y=h*h*e+2*h*o*n+o*o*r}function i(t,e,i,n,s,r,o,a,h,A){var c=1-h;A.x=c*c*c*t+3*c*c*h*i+3*c*h*h*s+h*h*h*o,A.y=c*c*c*e+3*c*c*h*n+3*c*h*h*r+h*h*h*a}function n(t,e){for(var i,n,s,r,o,a=/([MLQCZ])([^MLQCZ]*)/g;i=a.exec(t);){var h=i[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(t){return parseFloat(t)}));switch(i[1]){case"M":r=n=h[0],o=s=h[1];break;case"L":h[0]===r&&h[1]===o||e("L",r,o,r=h[0],o=h[1]);break;case"Q":e("Q",r,o,r=h[2],o=h[3],h[0],h[1]);break;case"C":e("C",r,o,r=h[4],o=h[5],h[0],h[1],h[2],h[3]);break;case"Z":r===n&&o===s||e("L",r,o,n,s)}}}function s(t,s,r){void 0===r&&(r=16);var o={x:0,y:0};n(t,(function(t,n,a,h,A,c,l,u,d){switch(t){case"L":s(n,a,h,A);break;case"Q":for(var p=n,f=a,g=1;g<r;g++)e(n,a,c,l,h,A,g/(r-1),o),s(p,f,o.x,o.y),p=o.x,f=o.y;break;case"C":for(var m=n,C=a,v=1;v<r;v++)i(n,a,c,l,u,d,h,A,v/(r-1),o),s(m,C,o.x,o.y),m=o.x,C=o.y}}))}var r="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(t,e){var i=t.getContext?t.getContext("webgl",a):t,n=o.get(i);if(!n){var s="undefined"!==typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext,r={},h={},A={},c=-1,l=[];function u(t){var e=r[t];if(!e&&!(e=r[t]=i.getExtension(t)))throw new Error(t+" not supported");return e}function d(t,e){var n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}function p(t,e,n,r){if(!h[t]){var o={},a={},A=i.createProgram();i.attachShader(A,d(e,i.VERTEX_SHADER)),i.attachShader(A,d(n,i.FRAGMENT_SHADER)),i.linkProgram(A),h[t]={program:A,transaction:function(t){i.useProgram(A),t({setUniform:function(t,e){for(var n=[],s=arguments.length-2;s-- >0;)n[s]=arguments[s+2];var r=a[e]||(a[e]=i.getUniformLocation(A,e));i["uniform"+t].apply(i,[r].concat(n))},setAttribute:function(t,e,n,r,a){var h=o[t];h||(h=o[t]={buf:i.createBuffer(),loc:i.getAttribLocation(A,t),data:null}),i.bindBuffer(i.ARRAY_BUFFER,h.buf),i.vertexAttribPointer(h.loc,e,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h.loc),s?i.vertexAttribDivisor(h.loc,r):u("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(h.loc,r),a!==h.data&&(i.bufferData(i.ARRAY_BUFFER,a,n),h.data=a)}})}}}h[t].transaction(r)}function f(t,e){c++;try{i.activeTexture(i.TEXTURE0+c);var n=A[t];n||(n=A[t]=i.createTexture(),i.bindTexture(i.TEXTURE_2D,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.bindTexture(i.TEXTURE_2D,n),e(n,c)}finally{c--}}function g(t,e,n){var s=i.createFramebuffer();l.push(s),i.bindFramebuffer(i.FRAMEBUFFER,s),i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0);try{n(s)}finally{i.deleteFramebuffer(s),i.bindFramebuffer(i.FRAMEBUFFER,l[--l.length-1]||null)}}function m(){r={},h={},A={},c=-1,l.length=0}i.canvas.addEventListener("webglcontextlost",(function(t){m(),t.preventDefault()}),!1),o.set(i,n={gl:i,isWebGL2:s,getExtension:u,withProgram:p,withTexture:f,withTextureFramebuffer:g,handleContextLoss:m})}e(n)}function A(t,e,i,n,s,o,a,A){void 0===a&&(a=15),void 0===A&&(A=null),h(t,(function(t){var h=t.gl,c=t.withProgram;(0,t.withTexture)("copy",(function(t,l){h.texImage2D(h.TEXTURE_2D,0,h.RGBA,s,o,0,h.RGBA,h.UNSIGNED_BYTE,e),c("copy",r,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(t){var e=t.setUniform;(0,t.setAttribute)("aUV",2,h.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),e("1i","image",l),h.bindFramebuffer(h.FRAMEBUFFER,A||null),h.disable(h.BLEND),h.colorMask(8&a,4&a,2&a,1&a),h.viewport(i,n,s,o),h.scissor(i,n,s,o),h.drawArrays(h.TRIANGLES,0,3)}))}))}))}var c=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:A,resizeWebGLCanvasWithoutClearing:function(t,e,i){var n=t.width,s=t.height;h(t,(function(r){var o=r.gl,a=new Uint8Array(n*s*4);o.readPixels(0,0,n,s,o.RGBA,o.UNSIGNED_BYTE,a),t.width=e,t.height=i,A(o,a,0,0,n,s)}))}});function l(t,e,i,n,r,o){void 0===o&&(o=1);var a=new Uint8Array(t*e),h=n[2]-n[0],A=n[3]-n[1],c=[];s(i,(function(t,e,i,n){c.push({x1:t,y1:e,x2:i,y2:n,minX:Math.min(t,i),minY:Math.min(e,n),maxX:Math.max(t,i),maxY:Math.max(e,n)})})),c.sort((function(t,e){return t.maxX-e.maxX}));for(var l=0;l<t;l++)for(var u=0;u<e;u++){var d=g(n[0]+h*(l+.5)/t,n[1]+A*(u+.5)/e),f=Math.pow(1-Math.abs(d)/r,o)/2;d<0&&(f=1-f),f=Math.max(0,Math.min(255,Math.round(255*f))),a[u*t+l]=f}return a;function g(t,e){for(var i=1/0,n=1/0,s=c.length;s--;){var r=c[s];if(r.maxX+n<=t)break;if(t+n>r.minX&&e-n<r.maxY&&e+n>r.minY){var o=p(t,e,r.x1,r.y1,r.x2,r.y2);o<i&&(i=o,n=Math.sqrt(i))}}return function(t,e){for(var i=0,n=c.length;n--;){var s=c[n];if(s.maxX<=t)break;s.y1>e!==s.y2>e&&t<(s.x2-s.x1)*(e-s.y1)/(s.y2-s.y1)+s.x1&&(i+=s.y1<s.y2?1:-1)}return 0!==i}(t,e)&&(n=-n),n}}function u(t,e,i,n,s,r,o,a,h,A){void 0===r&&(r=1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===A&&(A=0),d(t,e,i,n,s,r,o,null,a,h,A)}function d(t,e,i,n,s,r,o,a,h,c,u){void 0===r&&(r=1),void 0===h&&(h=0),void 0===c&&(c=0),void 0===u&&(u=0);for(var d=l(t,e,i,n,s,r),p=new Uint8Array(4*d.length),f=0;f<d.length;f++)p[4*f+u]=d[f];A(o,p,h,c,t,e,1<<3-u,a)}function p(t,e,i,n,s,r){var o=s-i,a=r-n,h=o*o+a*a,A=h?Math.max(0,Math.min(1,((t-i)*o+(e-n)*a)/h)):0,c=t-(i+A*o),l=e-(n+A*a);return c*c+l*l}var f=Object.freeze({__proto__:null,generate:l,generateIntoCanvas:u,generateIntoFramebuffer:d}),g=new Float32Array([0,0,2,0,0,2]),m=null,C=!1,v={},B=new WeakMap;function E(t){if(!C&&!w(t))throw new Error("WebGL generation not supported")}function y(t,e,i,n,s,r,o){if(void 0===r&&(r=1),void 0===o&&(o=null),!o&&!(o=m)){var a="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!a)throw new Error("OffscreenCanvas or DOM canvas not supported");o=m=a.getContext("webgl",{depth:!1})}E(o);var A=new Uint8Array(t*e*4);h(o,(function(o){var a=o.gl,h=o.withTexture,c=o.withTextureFramebuffer;h("readable",(function(o,h){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t,e,0,a.RGBA,a.UNSIGNED_BYTE,null),c(o,h,(function(o){_(t,e,i,n,s,r,a,o,0,0,0),a.readPixels(0,0,t,e,a.RGBA,a.UNSIGNED_BYTE,A)}))}))}));for(var c=new Uint8Array(t*e),l=0,u=0;l<A.length;l+=4)c[u++]=A[l];return c}function I(t,e,i,n,s,r,o,a,h,A){void 0===r&&(r=1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===A&&(A=0),_(t,e,i,n,s,r,o,null,a,h,A)}function _(t,e,i,n,o,a,A,c,l,u,d){void 0===a&&(a=1),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0),E(A);var p=[];s(i,(function(t,e,i,n){p.push(t,e,i,n)})),p=new Float32Array(p),h(A,(function(i){var s=i.gl,h=i.isWebGL2,A=i.getExtension,f=i.withProgram,m=i.withTexture,C=i.withTextureFramebuffer,v=i.handleContextLoss;if(m("rawDistances",(function(i,m){t===i._lastWidth&&e===i._lastHeight||s.texImage2D(s.TEXTURE_2D,0,s.RGBA,i._lastWidth=t,i._lastHeight=e,0,s.RGBA,s.UNSIGNED_BYTE,null),f("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(r){var c=r.setAttribute,l=r.setUniform,u=!h&&A("ANGLE_instanced_arrays"),d=!h&&A("EXT_blend_minmax");c("aUV",2,s.STATIC_DRAW,0,g),c("aLineSegment",4,s.DYNAMIC_DRAW,1,p),l.apply(void 0,["4f","uGlyphBounds"].concat(n)),l("1f","uMaxDistance",o),l("1f","uExponent",a),C(i,m,(function(i){s.enable(s.BLEND),s.colorMask(!0,!0,!0,!0),s.viewport(0,0,t,e),s.scissor(0,0,t,e),s.blendFunc(s.ONE,s.ONE),s.blendEquationSeparate(s.FUNC_ADD,h?s.MAX:d.MAX_EXT),s.clear(s.COLOR_BUFFER_BIT),h?s.drawArraysInstanced(s.TRIANGLES,0,3,p.length/4):u.drawArraysInstancedANGLE(s.TRIANGLES,0,3,p.length/4)}))})),f("post",r,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(i){i.setAttribute("aUV",2,s.STATIC_DRAW,0,g),i.setUniform("1i","tex",m),s.bindFramebuffer(s.FRAMEBUFFER,c),s.disable(s.BLEND),s.colorMask(0===d,1===d,2===d,3===d),s.viewport(l,u,t,e),s.scissor(l,u,t,e),s.drawArrays(s.TRIANGLES,0,3)}))})),s.isContextLost())throw v(),new Error("webgl context lost")}))}function w(t){var e=t&&t!==m?t.canvas||t:v,i=B.get(e);if(void 0===i){C=!0;try{var n=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],s=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,t);i=s&&n.length===s.length&&s.every((function(t,e){return t===n[e]}))}catch(r){i=!1,r.message}C=!1,B.set(e,i)}return i}var b=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:I,generateIntoFramebuffer:_,isSupported:w});return t.forEachPathCommand=n,t.generate=function(t,e,i,n,s,r){void 0===s&&(s=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===r&&(r=1);try{return y.apply(b,arguments)}catch(o){return l.apply(f,arguments)}},t.generateIntoCanvas=function(t,e,i,n,s,r,o,a,h,A){void 0===s&&(s=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===r&&(r=1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===A&&(A=0);try{return I.apply(b,arguments)}catch(c){return u.apply(f,arguments)}},t.javascript=f,t.pathToLineSegments=s,t.webgl=b,t.webglUtils=c,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return t}const g=/\bvoid\s+main\s*\(\s*\)\s*{/g;function m(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){let i=n.ShaderChunk[e];return i?m(i):t}))}const C=[];for(let It=0;It<256;It++)C[It]=(It<16?"0":"")+It.toString(16);const v=Object.assign||function(){let t=arguments[0];for(let e=1,i=arguments.length;e<i;e++){let i=arguments[e];if(i)for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},B=Date.now(),E=new WeakMap,y=new Map;let I=1e10;function _(t,e){const i=function(t){const e=JSON.stringify(t,b);let i=S.get(e);return null==i&&S.set(e,i=++x),i}(e);let s=E.get(t);if(s||E.set(t,s=Object.create(null)),s[i])return new s[i];const r=`_onBeforeCompile${i}`,o=function(n,s){t.onBeforeCompile.call(this,n,s);const o=this.customProgramCacheKey()+"|"+n.vertexShader+"|"+n.fragmentShader;let a=y[o];if(!a){const t=function(t,{vertexShader:e,fragmentShader:i},n,s){let{vertexDefs:r,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:h,fragmentDefs:A,fragmentMainIntro:c,fragmentMainOutro:l,fragmentColorTransform:u,customRewriter:d,timeUniform:p}=n;if(r=r||"",o=o||"",a=a||"",A=A||"",c=c||"",l=l||"",(h||d)&&(e=m(e)),(u||d)&&(i=m(i=i.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),d){let t=d({vertexShader:e,fragmentShader:i});e=t.vertexShader,i=t.fragmentShader}if(u){let t=[];i=i.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(e=>(t.push(e),""))),l=`${u}\n${t.join("\n")}\n${l}`}if(p){const t=`\nuniform float ${p};\n`;r=t+r,A=t+A}return h&&(r=`${r}\nvoid troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${h}\n}\n`,o=`\ntroika_position_${s} = vec3(position);\ntroika_normal_${s} = vec3(normal);\ntroika_uv_${s} = vec2(uv);\ntroikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});\n${o}\n`,e=(e=`vec3 troika_position_${s};\nvec3 troika_normal_${s};\nvec2 troika_uv_${s};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((t,e,i,n)=>/\battribute\s+vec[23]\s+$/.test(n.substr(0,i))?e:`troika_${e}_${s}`)),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),{vertexShader:e=w(e,s,r,o,a),fragmentShader:i=w(i,s,A,c,l)}}(this,n,e,i);a=y[o]=t}n.vertexShader=a.vertexShader,n.fragmentShader=a.fragmentShader,v(n.uniforms,this.uniforms),e.timeUniform&&(n.uniforms[e.timeUniform]={get value(){return Date.now()-B}}),this[r]&&this[r](n)},a=function(){return h(e.chained?t:t.clone())},h=function(n){const s=Object.create(n,A);return Object.defineProperty(s,"baseMaterial",{value:t}),Object.defineProperty(s,"id",{value:I++}),s.uuid=function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(C[255&t]+C[t>>8&255]+C[t>>16&255]+C[t>>24&255]+"-"+C[255&e]+C[e>>8&255]+"-"+C[e>>16&15|64]+C[e>>24&255]+"-"+C[63&i|128]+C[i>>8&255]+"-"+C[i>>16&255]+C[i>>24&255]+C[255&n]+C[n>>8&255]+C[n>>16&255]+C[n>>24&255]).toUpperCase()}(),s.uniforms=v({},n.uniforms,e.uniforms),s.defines=v({},n.defines,e.defines),s.defines[`TROIKA_DERIVED_MATERIAL_${i}`]="",s.extensions=v({},n.extensions,e.extensions),s._listeners=void 0,s},A={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>t.type,set:e=>{t.type=e}},isDerivedFrom:{writable:!0,configurable:!0,value:function(t){const e=this.baseMaterial;return t===e||e.isDerivedMaterial&&e.isDerivedFrom(t)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+i}},onBeforeCompile:{get:()=>o,set(t){this[r]=t}},copy:{writable:!0,configurable:!0,value:function(e){return t.copy.call(this,e),t.isShaderMaterial||t.isDerivedMaterial||(v(this.extensions,e.extensions),v(this.defines,e.defines),v(this.uniforms,n.UniformsUtils.clone(e.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const e=new t.constructor;return h(e).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let i=this._depthMaterial;return i||(i=this._depthMaterial=_(t.isDerivedMaterial?t.getDepthMaterial():new n.MeshDepthMaterial({depthPacking:n.RGBADepthPacking}),e),i.defines.IS_DEPTH_MATERIAL="",i.uniforms=this.uniforms),i}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let i=this._distanceMaterial;return i||(i=this._distanceMaterial=_(t.isDerivedMaterial?t.getDistanceMaterial():new n.MeshDistanceMaterial,e),i.defines.IS_DISTANCE_MATERIAL="",i.uniforms=this.uniforms),i}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:e,_distanceMaterial:i}=this;e&&e.dispose(),i&&i.dispose(),t.dispose.call(this)}}};return s[i]=a,new a}function w(t,e,i,n,s){return(n||s||i)&&(t=t.replace(g,`\n${i}\nvoid troikaOrigMain${e}() {`),t+=`\nvoid main() {\n  ${n}\n  troikaOrigMain${e}();\n  ${s}\n}`),t}function b(t,e){return"uniforms"===t?void 0:"function"===typeof e?e.toString():e}let x=0;const S=new Map;n.DoubleSide,n.Mesh;const M=u({name:"FontResolver",dependencies:[function(t,e){const i=Object.create(null),n=Object.create(null);function s(e,s){let r=i[e];r?s(r):n[e]?n[e].push(s):(n[e]=[s],function(s){const r=t=>{};try{const o=new XMLHttpRequest;o.open("get",s,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>=400)new Error(o.statusText);else if(o.status>0)try{const r=t(o.response);r.src=s,(t=>{t.src=e,i[e]=t,n[e].forEach((e=>e(t))),delete n[e]})(r)}catch(r){}},o.onerror=r,o.send()}catch(o){}}(e))}return function(t,n,{lang:r,fonts:o=[],style:a="normal",weight:h="normal",unicodeFontsURL:A}={}){const c=new Uint8Array(t.length),l=[];t.length||f();const u=new Map,d=[];if("italic"!==a&&(a="normal"),"number"!==typeof h&&(h="bold"===h?700:400),o&&!Array.isArray(o)&&(o=[o]),(o=o.slice().filter((t=>!t.lang||t.lang.test(r))).reverse()).length){const e=1,n=2;let r=0;!function a(h=0){for(let A=h,p=t.length;A<p;A++){const h=t.codePointAt(A);if(r===e&&l[c[A-1]].supportsCodePoint(h)||A>0&&/\s/.test(t[A]))c[A]=c[A-1],r===n&&(d[d.length-1][1]=A);else for(let t=c[A],p=o.length;t<=p;t++)if(t===p)(r===n?d[d.length-1]:d[d.length]=[A,A])[1]=A,r=n;else{c[A]=t;const{src:n,unicodeRange:d}=o[t];if(!d||g(h,d)){const t=i[n];if(!t)return void s(n,(()=>{a(A)}));if(t.supportsCodePoint(h)){let i=u.get(t);"number"!==typeof i&&(i=l.length,l.push(t),u.set(t,i)),c[A]=i,r=e;break}}}h>65535&&A+1<p&&(c[A+1]=c[A],A++,r===n&&(d[d.length-1][1]=A))}p()}()}else d.push([0,t.length-1]),p();function p(){if(d.length){const i=d.map((e=>t.substring(e[0],e[1]+1))).join("\n");e.getFontsForString(i,{lang:r||void 0,style:a,weight:h,dataUrl:A}).then((({fontUrls:t,chars:e})=>{const i=l.length;let n=0;d.forEach((t=>{for(let s=0,r=t[1]-t[0];s<=r;s++)c[t[0]+s]=e[n++]+i;n++}));let r=0;t.forEach(((e,n)=>{s(e,(e=>{l[n+i]=e,++r===t.length&&f()}))}))}))}else f()}function f(){n({chars:c,fonts:l})}function g(t,e){for(let i=0;i<e.length;i++){const[n,s=n]=e[i];if(n<=t&&t<=s)return!0}return!1}}},u({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(t){var e={parse:function(t){var i=e._bin,n=new Uint8Array(t);if("ttcf"==i.readASCII(n,0,4)){var s=4;i.readUshort(n,s),s+=2,i.readUshort(n,s),s+=2;var r=i.readUint(n,s);s+=4;for(var o=[],a=0;a<r;a++){var h=i.readUint(n,s);s+=4,o.push(e._readFont(n,h))}return o}return[e._readFont(n,0)]},_readFont:function(t,i){var n=e._bin,s=i;n.readFixed(t,i),i+=4;var r=n.readUshort(t,i);i+=2,n.readUshort(t,i),i+=2,n.readUshort(t,i),i+=2,n.readUshort(t,i),i+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],a={_data:t,_offset:s},h={},A=0;A<r;A++){var c=n.readASCII(t,i,4);i+=4,n.readUint(t,i),i+=4;var l=n.readUint(t,i);i+=4;var u=n.readUint(t,i);i+=4,h[c]={offset:l,length:u}}for(A=0;A<o.length;A++){var d=o[A];h[d]&&(a[d.trim()]=e[d.trim()].parse(t,h[d].offset,h[d].length,a))}return a},_tabOffset:function(t,i,n){for(var s=e._bin,r=s.readUshort(t,n+4),o=n+12,a=0;a<r;a++){var h=s.readASCII(t,o,4);o+=4,s.readUint(t,o),o+=4;var A=s.readUint(t,o);if(o+=4,s.readUint(t,o),o+=4,h==i)return A}return 0}};e._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,i){return e._bin.readShort(t,i)/16384},readInt:function(t,i){return e._bin._view(t).getInt32(i)},readInt8:function(t,i){return e._bin._view(t).getInt8(i)},readShort:function(t,i){return e._bin._view(t).getInt16(i)},readUshort:function(t,i){return e._bin._view(t).getUint16(i)},readUshorts:function(t,i,n){for(var s=[],r=0;r<n;r++)s.push(e._bin.readUshort(t,i+2*r));return s},readUint:function(t,i){return e._bin._view(t).getUint32(i)},readUint64:function(t,i){return 4294967296*e._bin.readUint(t,i)+e._bin.readUint(t,i+4)},readASCII:function(t,e,i){for(var n="",s=0;s<i;s++)n+=String.fromCharCode(t[e+s]);return n},readUnicode:function(t,e,i){for(var n="",s=0;s<i;s++){var r=t[e++]<<8|t[e++];n+=String.fromCharCode(r)}return n},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,i,n){var s=e._bin._tdec;return s&&0==i&&n==t.length?s.decode(t):e._bin.readASCII(t,i,n)},readBytes:function(t,e,i){for(var n=[],s=0;s<i;s++)n.push(t[e+s]);return n},readASCIIArray:function(t,e,i){for(var n=[],s=0;s<i;s++)n.push(String.fromCharCode(t[e+s]));return n},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},e._lctf={},e._lctf.parse=function(t,i,n,s,r){var o=e._bin,a={},h=i;o.readFixed(t,i),i+=4;var A=o.readUshort(t,i);i+=2;var c=o.readUshort(t,i);i+=2;var l=o.readUshort(t,i);return i+=2,a.scriptList=e._lctf.readScriptList(t,h+A),a.featureList=e._lctf.readFeatureList(t,h+c),a.lookupList=e._lctf.readLookupList(t,h+l,r),a},e._lctf.readLookupList=function(t,i,n){var s=e._bin,r=i,o=[],a=s.readUshort(t,i);i+=2;for(var h=0;h<a;h++){var A=s.readUshort(t,i);i+=2;var c=e._lctf.readLookupTable(t,r+A,n);o.push(c)}return o},e._lctf.readLookupTable=function(t,i,n){var s=e._bin,r=i,o={tabs:[]};o.ltype=s.readUshort(t,i),i+=2,o.flag=s.readUshort(t,i),i+=2;var a=s.readUshort(t,i);i+=2;for(var h=o.ltype,A=0;A<a;A++){var c=s.readUshort(t,i);i+=2;var l=n(t,h,r+c,o);o.tabs.push(l)}return o},e._lctf.numOfOnes=function(t){for(var e=0,i=0;i<32;i++)0!=(t>>>i&1)&&e++;return e},e._lctf.readClassDef=function(t,i){var n=e._bin,s=[],r=n.readUshort(t,i);if(i+=2,1==r){var o=n.readUshort(t,i);i+=2;var a=n.readUshort(t,i);i+=2;for(var h=0;h<a;h++)s.push(o+h),s.push(o+h),s.push(n.readUshort(t,i)),i+=2}if(2==r){var A=n.readUshort(t,i);for(i+=2,h=0;h<A;h++)s.push(n.readUshort(t,i)),i+=2,s.push(n.readUshort(t,i)),i+=2,s.push(n.readUshort(t,i)),i+=2}return s},e._lctf.getInterval=function(t,e){for(var i=0;i<t.length;i+=3){var n=t[i],s=t[i+1];if(t[i+2],n<=e&&e<=s)return i}return-1},e._lctf.readCoverage=function(t,i){var n=e._bin,s={};s.fmt=n.readUshort(t,i),i+=2;var r=n.readUshort(t,i);return i+=2,1==s.fmt&&(s.tab=n.readUshorts(t,i,r)),2==s.fmt&&(s.tab=n.readUshorts(t,i,3*r)),s},e._lctf.coverageIndex=function(t,i){var n=t.tab;if(1==t.fmt)return n.indexOf(i);if(2==t.fmt){var s=e._lctf.getInterval(n,i);if(-1!=s)return n[s+2]+(i-n[s])}return-1},e._lctf.readFeatureList=function(t,i){var n=e._bin,s=i,r=[],o=n.readUshort(t,i);i+=2;for(var a=0;a<o;a++){var h=n.readASCII(t,i,4);i+=4;var A=n.readUshort(t,i);i+=2;var c=e._lctf.readFeatureTable(t,s+A);c.tag=h.trim(),r.push(c)}return r},e._lctf.readFeatureTable=function(t,i){var n=e._bin,s=i,r={},o=n.readUshort(t,i);i+=2,o>0&&(r.featureParams=s+o);var a=n.readUshort(t,i);i+=2,r.tab=[];for(var h=0;h<a;h++)r.tab.push(n.readUshort(t,i+2*h));return r},e._lctf.readScriptList=function(t,i){var n=e._bin,s=i,r={},o=n.readUshort(t,i);i+=2;for(var a=0;a<o;a++){var h=n.readASCII(t,i,4);i+=4;var A=n.readUshort(t,i);i+=2,r[h.trim()]=e._lctf.readScriptTable(t,s+A)}return r},e._lctf.readScriptTable=function(t,i){var n=e._bin,s=i,r={},o=n.readUshort(t,i);i+=2,o>0&&(r.default=e._lctf.readLangSysTable(t,s+o));var a=n.readUshort(t,i);i+=2;for(var h=0;h<a;h++){var A=n.readASCII(t,i,4);i+=4;var c=n.readUshort(t,i);i+=2,r[A.trim()]=e._lctf.readLangSysTable(t,s+c)}return r},e._lctf.readLangSysTable=function(t,i){var n=e._bin,s={};n.readUshort(t,i),i+=2,s.reqFeature=n.readUshort(t,i),i+=2;var r=n.readUshort(t,i);return i+=2,s.features=n.readUshorts(t,i,r),s},e.CFF={},e.CFF.parse=function(t,i,n){var s=e._bin;(t=new Uint8Array(t.buffer,i,n))[i=0],t[++i],t[++i],t[++i],i++;var r=[];i=e.CFF.readIndex(t,i,r);for(var o=[],a=0;a<r.length-1;a++)o.push(s.readASCII(t,i+r[a],r[a+1]-r[a]));i+=r[r.length-1];var h=[];i=e.CFF.readIndex(t,i,h);var A=[];for(a=0;a<h.length-1;a++)A.push(e.CFF.readDict(t,i+h[a],i+h[a+1]));i+=h[h.length-1];var c=A[0],l=[];i=e.CFF.readIndex(t,i,l);var u=[];for(a=0;a<l.length-1;a++)u.push(s.readASCII(t,i+l[a],l[a+1]-l[a]));if(i+=l[l.length-1],e.CFF.readSubrs(t,i,c),c.CharStrings){i=c.CharStrings,l=[],i=e.CFF.readIndex(t,i,l);var d=[];for(a=0;a<l.length-1;a++)d.push(s.readBytes(t,i+l[a],l[a+1]-l[a]));c.CharStrings=d}if(c.ROS){i=c.FDArray;var p=[];for(i=e.CFF.readIndex(t,i,p),c.FDArray=[],a=0;a<p.length-1;a++){var f=e.CFF.readDict(t,i+p[a],i+p[a+1]);e.CFF._readFDict(t,f,u),c.FDArray.push(f)}i+=p[p.length-1],i=c.FDSelect,c.FDSelect=[];var g=t[i];if(i++,3!=g)throw g;var m=s.readUshort(t,i);for(i+=2,a=0;a<m+1;a++)c.FDSelect.push(s.readUshort(t,i),t[i+2]),i+=3}return c.Encoding&&(c.Encoding=e.CFF.readEncoding(t,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=e.CFF.readCharset(t,c.charset,c.CharStrings.length)),e.CFF._readFDict(t,c,u),c},e.CFF._readFDict=function(t,i,n){var s;for(var r in i.Private&&(s=i.Private[1],i.Private=e.CFF.readDict(t,s,s+i.Private[0]),i.Private.Subrs&&e.CFF.readSubrs(t,s+i.Private.Subrs,i.Private)),i)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(r)&&(i[r]=n[i[r]-426+35])},e.CFF.readSubrs=function(t,i,n){var s=e._bin,r=[];i=e.CFF.readIndex(t,i,r);var o,a=r.length;o=a<1240?107:a<33900?1131:32768,n.Bias=o,n.Subrs=[];for(var h=0;h<r.length-1;h++)n.Subrs.push(s.readBytes(t,i+r[h],r[h+1]-r[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(t,e){for(var i=0;i<t.charset.length;i++)if(t.charset[i]==e)return i;return-1},e.CFF.glyphBySE=function(t,i){return i<0||i>255?-1:e.CFF.glyphByUnicode(t,e.CFF.tableSE[i])},e.CFF.readEncoding=function(t,i,n){e._bin;var s=[".notdef"],r=t[i];if(i++,0!=r)throw"error: unknown encoding format: "+r;var o=t[i];i++;for(var a=0;a<o;a++)s.push(t[i+a]);return s},e.CFF.readCharset=function(t,i,n){var s=e._bin,r=[".notdef"],o=t[i];if(i++,0==o)for(var a=0;a<n;a++){var h=s.readUshort(t,i);i+=2,r.push(h)}else{if(1!=o&&2!=o)throw"error: format: "+o;for(;r.length<n;){h=s.readUshort(t,i),i+=2;var A=0;for(1==o?(A=t[i],i++):(A=s.readUshort(t,i),i+=2),a=0;a<=A;a++)r.push(h),h++}}return r},e.CFF.readIndex=function(t,i,n){var s=e._bin,r=s.readUshort(t,i)+1,o=t[i+=2];if(i++,1==o)for(var a=0;a<r;a++)n.push(t[i+a]);else if(2==o)for(a=0;a<r;a++)n.push(s.readUshort(t,i+2*a));else if(3==o)for(a=0;a<r;a++)n.push(16777215&s.readUint(t,i+3*a-1));else if(1!=r)throw"unsupported offset size: "+o+", count: "+r;return(i+=r*o)-1},e.CFF.getCharString=function(t,i,n){var s=e._bin,r=t[i],o=t[i+1];t[i+2],t[i+3],t[i+4];var a=1,h=null,A=null;r<=20&&(h=r,a=1),12==r&&(h=100*r+o,a=2),21<=r&&r<=27&&(h=r,a=1),28==r&&(A=s.readShort(t,i+1),a=3),29<=r&&r<=31&&(h=r,a=1),32<=r&&r<=246&&(A=r-139,a=1),247<=r&&r<=250&&(A=256*(r-247)+o+108,a=2),251<=r&&r<=254&&(A=256*-(r-251)-o-108,a=2),255==r&&(A=s.readInt(t,i+1)/65535,a=5),n.val=null!=A?A:"o"+h,n.size=a},e.CFF.readCharString=function(t,i,n){for(var s=i+n,r=e._bin,o=[];i<s;){var a=t[i],h=t[i+1];t[i+2],t[i+3],t[i+4];var A=1,c=null,l=null;a<=20&&(c=a,A=1),12==a&&(c=100*a+h,A=2),19!=a&&20!=a||(c=a,A=2),21<=a&&a<=27&&(c=a,A=1),28==a&&(l=r.readShort(t,i+1),A=3),29<=a&&a<=31&&(c=a,A=1),32<=a&&a<=246&&(l=a-139,A=1),247<=a&&a<=250&&(l=256*(a-247)+h+108,A=2),251<=a&&a<=254&&(l=256*-(a-251)-h-108,A=2),255==a&&(l=r.readInt(t,i+1)/65535,A=5),o.push(null!=l?l:"o"+c),i+=A}return o},e.CFF.readDict=function(t,i,n){for(var s=e._bin,r={},o=[];i<n;){var a=t[i],h=t[i+1];t[i+2],t[i+3],t[i+4];var A=1,c=null,l=null;if(28==a&&(l=s.readShort(t,i+1),A=3),29==a&&(l=s.readInt(t,i+1),A=5),32<=a&&a<=246&&(l=a-139,A=1),247<=a&&a<=250&&(l=256*(a-247)+h+108,A=2),251<=a&&a<=254&&(l=256*-(a-251)-h-108,A=2),255==a)throw l=s.readInt(t,i+1)/65535,A=5,"unknown number";if(30==a){var u=[];for(A=1;;){var d=t[i+A];A++;var p=d>>4,f=15&d;if(15!=p&&u.push(p),15!=f&&u.push(f),15==f)break}for(var g="",m=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],C=0;C<u.length;C++)g+=m[u[C]];l=parseFloat(g)}a<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][a],A=1,12==a&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],A=2)),null!=c?(r[c]=1==o.length?o[0]:o,o=[]):o.push(l),i+=A}return r},e.cmap={},e.cmap.parse=function(t,i,n){t=new Uint8Array(t.buffer,i,n),i=0;var s=e._bin,r={};s.readUshort(t,i),i+=2;var o=s.readUshort(t,i);i+=2;var a=[];r.tables=[];for(var h=0;h<o;h++){var A=s.readUshort(t,i);i+=2;var c=s.readUshort(t,i);i+=2;var l=s.readUint(t,i);i+=4;var u="p"+A+"e"+c,d=a.indexOf(l);if(-1==d){var p;d=r.tables.length,a.push(l);var f=s.readUshort(t,l);0==f?p=e.cmap.parse0(t,l):4==f?p=e.cmap.parse4(t,l):6==f?p=e.cmap.parse6(t,l):12==f&&(p=e.cmap.parse12(t,l)),r.tables.push(p)}if(null!=r[u])throw"multiple tables for one platform+encoding";r[u]=d}return r},e.cmap.parse0=function(t,i){var n=e._bin,s={};s.format=n.readUshort(t,i),i+=2;var r=n.readUshort(t,i);i+=2,n.readUshort(t,i),i+=2,s.map=[];for(var o=0;o<r-6;o++)s.map.push(t[i+o]);return s},e.cmap.parse4=function(t,i){var n=e._bin,s=i,r={};r.format=n.readUshort(t,i),i+=2;var o=n.readUshort(t,i);i+=2,n.readUshort(t,i),i+=2;var a=n.readUshort(t,i);i+=2;var h=a/2;r.searchRange=n.readUshort(t,i),i+=2,r.entrySelector=n.readUshort(t,i),i+=2,r.rangeShift=n.readUshort(t,i),i+=2,r.endCount=n.readUshorts(t,i,h),i+=2*h,i+=2,r.startCount=n.readUshorts(t,i,h),i+=2*h,r.idDelta=[];for(var A=0;A<h;A++)r.idDelta.push(n.readShort(t,i)),i+=2;for(r.idRangeOffset=n.readUshorts(t,i,h),i+=2*h,r.glyphIdArray=[];i<s+o;)r.glyphIdArray.push(n.readUshort(t,i)),i+=2;return r},e.cmap.parse6=function(t,i){var n=e._bin,s={};s.format=n.readUshort(t,i),i+=2,n.readUshort(t,i),i+=2,n.readUshort(t,i),i+=2,s.firstCode=n.readUshort(t,i),i+=2;var r=n.readUshort(t,i);i+=2,s.glyphIdArray=[];for(var o=0;o<r;o++)s.glyphIdArray.push(n.readUshort(t,i)),i+=2;return s},e.cmap.parse12=function(t,i){var n=e._bin,s={};s.format=n.readUshort(t,i),i+=2,i+=2,n.readUint(t,i),i+=4,n.readUint(t,i),i+=4;var r=n.readUint(t,i);i+=4,s.groups=[];for(var o=0;o<r;o++){var a=i+12*o,h=n.readUint(t,a+0),A=n.readUint(t,a+4),c=n.readUint(t,a+8);s.groups.push([h,A,c])}return s},e.glyf={},e.glyf.parse=function(t,e,i,n){for(var s=[],r=0;r<n.maxp.numGlyphs;r++)s.push(null);return s},e.glyf._parseGlyf=function(t,i){var n=e._bin,s=t._data,r=e._tabOffset(s,"glyf",t._offset)+t.loca[i];if(t.loca[i]==t.loca[i+1])return null;var o={};if(o.noc=n.readShort(s,r),r+=2,o.xMin=n.readShort(s,r),r+=2,o.yMin=n.readShort(s,r),r+=2,o.xMax=n.readShort(s,r),r+=2,o.yMax=n.readShort(s,r),r+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var a=0;a<o.noc;a++)o.endPts.push(n.readUshort(s,r)),r+=2;var h=n.readUshort(s,r);if(r+=2,s.length-r<h)return null;o.instructions=n.readBytes(s,r,h),r+=h;var A=o.endPts[o.noc-1]+1;for(o.flags=[],a=0;a<A;a++){var c=s[r];if(r++,o.flags.push(c),0!=(8&c)){var l=s[r];r++;for(var u=0;u<l;u++)o.flags.push(c),a++}}for(o.xs=[],a=0;a<A;a++){var d=0!=(2&o.flags[a]),p=0!=(16&o.flags[a]);d?(o.xs.push(p?s[r]:-s[r]),r++):p?o.xs.push(0):(o.xs.push(n.readShort(s,r)),r+=2)}for(o.ys=[],a=0;a<A;a++)d=0!=(4&o.flags[a]),p=0!=(32&o.flags[a]),d?(o.ys.push(p?s[r]:-s[r]),r++):p?o.ys.push(0):(o.ys.push(n.readShort(s,r)),r+=2);var f=0,g=0;for(a=0;a<A;a++)f+=o.xs[a],g+=o.ys[a],o.xs[a]=f,o.ys[a]=g}else{var m;o.parts=[];do{m=n.readUshort(s,r),r+=2;var C={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(C),C.glyphIndex=n.readUshort(s,r),r+=2,1&m){var v=n.readShort(s,r);r+=2;var B=n.readShort(s,r);r+=2}else v=n.readInt8(s,r),r++,B=n.readInt8(s,r),r++;2&m?(C.m.tx=v,C.m.ty=B):(C.p1=v,C.p2=B),8&m?(C.m.a=C.m.d=n.readF2dot14(s,r),r+=2):64&m?(C.m.a=n.readF2dot14(s,r),r+=2,C.m.d=n.readF2dot14(s,r),r+=2):128&m&&(C.m.a=n.readF2dot14(s,r),r+=2,C.m.b=n.readF2dot14(s,r),r+=2,C.m.c=n.readF2dot14(s,r),r+=2,C.m.d=n.readF2dot14(s,r),r+=2)}while(32&m);if(256&m){var E=n.readUshort(s,r);for(r+=2,o.instr=[],a=0;a<E;a++)o.instr.push(s[r]),r++}}return o},e.GDEF={},e.GDEF.parse=function(t,i,n,s){var r=i;i+=4;var o=e._bin.readUshort(t,i);return{glyphClassDef:0===o?null:e._lctf.readClassDef(t,r+o)}},e.GPOS={},e.GPOS.parse=function(t,i,n,s){return e._lctf.parse(t,i,n,s,e.GPOS.subt)},e.GPOS.subt=function(t,i,n,s){var r=e._bin,o=n,a={};if(a.fmt=r.readUshort(t,n),n+=2,1==i||2==i||3==i||7==i||8==i&&a.fmt<=2){var h=r.readUshort(t,n);n+=2,a.coverage=e._lctf.readCoverage(t,h+o)}if(1==i&&1==a.fmt){var A=r.readUshort(t,n);n+=2,0!=A&&(a.pos=e.GPOS.readValueRecord(t,n,A))}else if(2==i&&a.fmt>=1&&a.fmt<=2){A=r.readUshort(t,n),n+=2;var c=r.readUshort(t,n);n+=2;var l=e._lctf.numOfOnes(A),u=e._lctf.numOfOnes(c);if(1==a.fmt){a.pairsets=[];var d=r.readUshort(t,n);n+=2;for(var p=0;p<d;p++){var f=o+r.readUshort(t,n);n+=2;var g=r.readUshort(t,f);f+=2;for(var m=[],C=0;C<g;C++){var v=r.readUshort(t,f);f+=2,0!=A&&(w=e.GPOS.readValueRecord(t,f,A),f+=2*l),0!=c&&(b=e.GPOS.readValueRecord(t,f,c),f+=2*u),m.push({gid2:v,val1:w,val2:b})}a.pairsets.push(m)}}if(2==a.fmt){var B=r.readUshort(t,n);n+=2;var E=r.readUshort(t,n);n+=2;var y=r.readUshort(t,n);n+=2;var I=r.readUshort(t,n);for(n+=2,a.classDef1=e._lctf.readClassDef(t,o+B),a.classDef2=e._lctf.readClassDef(t,o+E),a.matrix=[],p=0;p<y;p++){var _=[];for(C=0;C<I;C++){var w=null,b=null;0!=A&&(w=e.GPOS.readValueRecord(t,n,A),n+=2*l),0!=c&&(b=e.GPOS.readValueRecord(t,n,c),n+=2*u),_.push({val1:w,val2:b})}a.matrix.push(_)}}}else if(4==i&&1==a.fmt)a.markCoverage=e._lctf.readCoverage(t,r.readUshort(t,n)+o),a.baseCoverage=e._lctf.readCoverage(t,r.readUshort(t,n+2)+o),a.markClassCount=r.readUshort(t,n+4),a.markArray=e.GPOS.readMarkArray(t,r.readUshort(t,n+6)+o),a.baseArray=e.GPOS.readBaseArray(t,r.readUshort(t,n+8)+o,a.markClassCount);else if(6==i&&1==a.fmt)a.mark1Coverage=e._lctf.readCoverage(t,r.readUshort(t,n)+o),a.mark2Coverage=e._lctf.readCoverage(t,r.readUshort(t,n+2)+o),a.markClassCount=r.readUshort(t,n+4),a.mark1Array=e.GPOS.readMarkArray(t,r.readUshort(t,n+6)+o),a.mark2Array=e.GPOS.readBaseArray(t,r.readUshort(t,n+8)+o,a.markClassCount);else if(9==i&&1==a.fmt){var x=r.readUshort(t,n);n+=2;var S=r.readUint(t,n);if(n+=4,9==s.ltype)s.ltype=x;else if(s.ltype!=x)throw"invalid extension substitution";return e.GPOS.subt(t,s.ltype,o+S)}return a},e.GPOS.readValueRecord=function(t,i,n){var s=e._bin,r=[];return r.push(1&n?s.readShort(t,i):0),i+=1&n?2:0,r.push(2&n?s.readShort(t,i):0),i+=2&n?2:0,r.push(4&n?s.readShort(t,i):0),i+=4&n?2:0,r.push(8&n?s.readShort(t,i):0),i+=8&n?2:0,r},e.GPOS.readBaseArray=function(t,i,n){var s=e._bin,r=[],o=i,a=s.readUshort(t,i);i+=2;for(var h=0;h<a;h++){for(var A=[],c=0;c<n;c++)A.push(e.GPOS.readAnchorRecord(t,o+s.readUshort(t,i))),i+=2;r.push(A)}return r},e.GPOS.readMarkArray=function(t,i){var n=e._bin,s=[],r=i,o=n.readUshort(t,i);i+=2;for(var a=0;a<o;a++){var h=e.GPOS.readAnchorRecord(t,n.readUshort(t,i+2)+r);h.markClass=n.readUshort(t,i),s.push(h),i+=4}return s},e.GPOS.readAnchorRecord=function(t,i){var n=e._bin,s={};return s.fmt=n.readUshort(t,i),s.x=n.readShort(t,i+2),s.y=n.readShort(t,i+4),s},e.GSUB={},e.GSUB.parse=function(t,i,n,s){return e._lctf.parse(t,i,n,s,e.GSUB.subt)},e.GSUB.subt=function(t,i,n,s){var r=e._bin,o=n,a={};if(a.fmt=r.readUshort(t,n),n+=2,1!=i&&2!=i&&4!=i&&5!=i&&6!=i)return null;if(1==i||2==i||4==i||5==i&&a.fmt<=2||6==i&&a.fmt<=2){var h=r.readUshort(t,n);n+=2,a.coverage=e._lctf.readCoverage(t,o+h)}if(1==i&&a.fmt>=1&&a.fmt<=2){if(1==a.fmt)a.delta=r.readShort(t,n),n+=2;else if(2==a.fmt){var A=r.readUshort(t,n);n+=2,a.newg=r.readUshorts(t,n,A),n+=2*a.newg.length}}else if(2==i&&1==a.fmt){A=r.readUshort(t,n),n+=2,a.seqs=[];for(var c=0;c<A;c++){var l=r.readUshort(t,n)+o;n+=2;var u=r.readUshort(t,l);a.seqs.push(r.readUshorts(t,l+2,u))}}else if(4==i)for(a.vals=[],A=r.readUshort(t,n),n+=2,c=0;c<A;c++){var d=r.readUshort(t,n);n+=2,a.vals.push(e.GSUB.readLigatureSet(t,o+d))}else if(5==i&&2==a.fmt){if(2==a.fmt){var p=r.readUshort(t,n);n+=2,a.cDef=e._lctf.readClassDef(t,o+p),a.scset=[];var f=r.readUshort(t,n);for(n+=2,c=0;c<f;c++){var g=r.readUshort(t,n);n+=2,a.scset.push(0==g?null:e.GSUB.readSubClassSet(t,o+g))}}}else if(6==i&&3==a.fmt){if(3==a.fmt){for(c=0;c<3;c++){A=r.readUshort(t,n),n+=2;for(var m=[],C=0;C<A;C++)m.push(e._lctf.readCoverage(t,o+r.readUshort(t,n+2*C)));n+=2*A,0==c&&(a.backCvg=m),1==c&&(a.inptCvg=m),2==c&&(a.ahedCvg=m)}A=r.readUshort(t,n),n+=2,a.lookupRec=e.GSUB.readSubstLookupRecords(t,n,A)}}else if(7==i&&1==a.fmt){var v=r.readUshort(t,n);n+=2;var B=r.readUint(t,n);if(n+=4,9==s.ltype)s.ltype=v;else if(s.ltype!=v)throw"invalid extension substitution";return e.GSUB.subt(t,s.ltype,o+B)}return a},e.GSUB.readSubClassSet=function(t,i){var n=e._bin.readUshort,s=i,r=[],o=n(t,i);i+=2;for(var a=0;a<o;a++){var h=n(t,i);i+=2,r.push(e.GSUB.readSubClassRule(t,s+h))}return r},e.GSUB.readSubClassRule=function(t,i){var n=e._bin.readUshort,s={},r=n(t,i),o=n(t,i+=2);i+=2,s.input=[];for(var a=0;a<r-1;a++)s.input.push(n(t,i)),i+=2;return s.substLookupRecords=e.GSUB.readSubstLookupRecords(t,i,o),s},e.GSUB.readSubstLookupRecords=function(t,i,n){for(var s=e._bin.readUshort,r=[],o=0;o<n;o++)r.push(s(t,i),s(t,i+2)),i+=4;return r},e.GSUB.readChainSubClassSet=function(t,i){var n=e._bin,s=i,r=[],o=n.readUshort(t,i);i+=2;for(var a=0;a<o;a++){var h=n.readUshort(t,i);i+=2,r.push(e.GSUB.readChainSubClassRule(t,s+h))}return r},e.GSUB.readChainSubClassRule=function(t,i){for(var n=e._bin,s={},r=["backtrack","input","lookahead"],o=0;o<r.length;o++){var a=n.readUshort(t,i);i+=2,1==o&&a--,s[r[o]]=n.readUshorts(t,i,a),i+=2*s[r[o]].length}return a=n.readUshort(t,i),i+=2,s.subst=n.readUshorts(t,i,2*a),i+=2*s.subst.length,s},e.GSUB.readLigatureSet=function(t,i){var n=e._bin,s=i,r=[],o=n.readUshort(t,i);i+=2;for(var a=0;a<o;a++){var h=n.readUshort(t,i);i+=2,r.push(e.GSUB.readLigature(t,s+h))}return r},e.GSUB.readLigature=function(t,i){var n=e._bin,s={chain:[]};s.nglyph=n.readUshort(t,i),i+=2;var r=n.readUshort(t,i);i+=2;for(var o=0;o<r-1;o++)s.chain.push(n.readUshort(t,i)),i+=2;return s},e.head={},e.head.parse=function(t,i,n){var s=e._bin,r={};return s.readFixed(t,i),i+=4,r.fontRevision=s.readFixed(t,i),i+=4,s.readUint(t,i),i+=4,s.readUint(t,i),i+=4,r.flags=s.readUshort(t,i),i+=2,r.unitsPerEm=s.readUshort(t,i),i+=2,r.created=s.readUint64(t,i),i+=8,r.modified=s.readUint64(t,i),i+=8,r.xMin=s.readShort(t,i),i+=2,r.yMin=s.readShort(t,i),i+=2,r.xMax=s.readShort(t,i),i+=2,r.yMax=s.readShort(t,i),i+=2,r.macStyle=s.readUshort(t,i),i+=2,r.lowestRecPPEM=s.readUshort(t,i),i+=2,r.fontDirectionHint=s.readShort(t,i),i+=2,r.indexToLocFormat=s.readShort(t,i),i+=2,r.glyphDataFormat=s.readShort(t,i),i+=2,r},e.hhea={},e.hhea.parse=function(t,i,n){var s=e._bin,r={};return s.readFixed(t,i),i+=4,r.ascender=s.readShort(t,i),i+=2,r.descender=s.readShort(t,i),i+=2,r.lineGap=s.readShort(t,i),i+=2,r.advanceWidthMax=s.readUshort(t,i),i+=2,r.minLeftSideBearing=s.readShort(t,i),i+=2,r.minRightSideBearing=s.readShort(t,i),i+=2,r.xMaxExtent=s.readShort(t,i),i+=2,r.caretSlopeRise=s.readShort(t,i),i+=2,r.caretSlopeRun=s.readShort(t,i),i+=2,r.caretOffset=s.readShort(t,i),i+=2,i+=8,r.metricDataFormat=s.readShort(t,i),i+=2,r.numberOfHMetrics=s.readUshort(t,i),i+=2,r},e.hmtx={},e.hmtx.parse=function(t,i,n,s){for(var r=e._bin,o={aWidth:[],lsBearing:[]},a=0,h=0,A=0;A<s.maxp.numGlyphs;A++)A<s.hhea.numberOfHMetrics&&(a=r.readUshort(t,i),i+=2,h=r.readShort(t,i),i+=2),o.aWidth.push(a),o.lsBearing.push(h);return o},e.kern={},e.kern.parse=function(t,i,n,s){var r=e._bin,o=r.readUshort(t,i);if(i+=2,1==o)return e.kern.parseV1(t,i-2,n,s);var a=r.readUshort(t,i);i+=2;for(var h={glyph1:[],rval:[]},A=0;A<a;A++){i+=2,n=r.readUshort(t,i),i+=2;var c=r.readUshort(t,i);i+=2;var l=c>>>8;if(0!=(l&=15))throw"unknown kern table format: "+l;i=e.kern.readFormat0(t,i,h)}return h},e.kern.parseV1=function(t,i,n,s){var r=e._bin;r.readFixed(t,i),i+=4;var o=r.readUint(t,i);i+=4;for(var a={glyph1:[],rval:[]},h=0;h<o;h++){r.readUint(t,i),i+=4;var A=r.readUshort(t,i);i+=2,r.readUshort(t,i),i+=2;var c=A>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;i=e.kern.readFormat0(t,i,a)}return a},e.kern.readFormat0=function(t,i,n){var s=e._bin,r=-1,o=s.readUshort(t,i);i+=2,s.readUshort(t,i),i+=2,s.readUshort(t,i),i+=2,s.readUshort(t,i),i+=2;for(var a=0;a<o;a++){var h=s.readUshort(t,i);i+=2;var A=s.readUshort(t,i);i+=2;var c=s.readShort(t,i);i+=2,h!=r&&(n.glyph1.push(h),n.rval.push({glyph2:[],vals:[]}));var l=n.rval[n.rval.length-1];l.glyph2.push(A),l.vals.push(c),r=h}return i},e.loca={},e.loca.parse=function(t,i,n,s){var r=e._bin,o=[],a=s.head.indexToLocFormat,h=s.maxp.numGlyphs+1;if(0==a)for(var A=0;A<h;A++)o.push(r.readUshort(t,i+(A<<1))<<1);if(1==a)for(A=0;A<h;A++)o.push(r.readUint(t,i+(A<<2)));return o},e.maxp={},e.maxp.parse=function(t,i,n){var s=e._bin,r={},o=s.readUint(t,i);return i+=4,r.numGlyphs=s.readUshort(t,i),i+=2,65536==o&&(r.maxPoints=s.readUshort(t,i),i+=2,r.maxContours=s.readUshort(t,i),i+=2,r.maxCompositePoints=s.readUshort(t,i),i+=2,r.maxCompositeContours=s.readUshort(t,i),i+=2,r.maxZones=s.readUshort(t,i),i+=2,r.maxTwilightPoints=s.readUshort(t,i),i+=2,r.maxStorage=s.readUshort(t,i),i+=2,r.maxFunctionDefs=s.readUshort(t,i),i+=2,r.maxInstructionDefs=s.readUshort(t,i),i+=2,r.maxStackElements=s.readUshort(t,i),i+=2,r.maxSizeOfInstructions=s.readUshort(t,i),i+=2,r.maxComponentElements=s.readUshort(t,i),i+=2,r.maxComponentDepth=s.readUshort(t,i),i+=2),r},e.name={},e.name.parse=function(t,i,n){var s=e._bin,r={};s.readUshort(t,i),i+=2;var o=s.readUshort(t,i);i+=2,s.readUshort(t,i);for(var a,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],A=i+=2,c=0;c<o;c++){var l=s.readUshort(t,i);i+=2;var u=s.readUshort(t,i);i+=2;var d=s.readUshort(t,i);i+=2;var p=s.readUshort(t,i);i+=2;var f=s.readUshort(t,i);i+=2;var g=s.readUshort(t,i);i+=2;var m,C=h[p],v=A+12*o+g;if(0==l)m=s.readUnicode(t,v,f/2);else if(3==l&&0==u)m=s.readUnicode(t,v,f/2);else if(0==u)m=s.readASCII(t,v,f);else if(1==u)m=s.readUnicode(t,v,f/2);else if(3==u)m=s.readUnicode(t,v,f/2);else{if(1!=l)throw"unknown encoding "+u+", platformID: "+l;m=s.readASCII(t,v,f)}var B="p"+l+","+d.toString(16);null==r[B]&&(r[B]={}),r[B][void 0!==C?C:p]=m,r[B]._lang=d}for(var E in r)if(null!=r[E].postScriptName&&1033==r[E]._lang)return r[E];for(var E in r)if(null!=r[E].postScriptName&&0==r[E]._lang)return r[E];for(var E in r)if(null!=r[E].postScriptName&&3084==r[E]._lang)return r[E];for(var E in r)if(null!=r[E].postScriptName)return r[E];for(var E in r){a=E;break}return r[a]},e["OS/2"]={},e["OS/2"].parse=function(t,i,n){var s=e._bin.readUshort(t,i);i+=2;var r={};if(0==s)e["OS/2"].version0(t,i,r);else if(1==s)e["OS/2"].version1(t,i,r);else if(2==s||3==s||4==s)e["OS/2"].version2(t,i,r);else{if(5!=s)throw"unknown OS/2 table version: "+s;e["OS/2"].version5(t,i,r)}return r},e["OS/2"].version0=function(t,i,n){var s=e._bin;return n.xAvgCharWidth=s.readShort(t,i),i+=2,n.usWeightClass=s.readUshort(t,i),i+=2,n.usWidthClass=s.readUshort(t,i),i+=2,n.fsType=s.readUshort(t,i),i+=2,n.ySubscriptXSize=s.readShort(t,i),i+=2,n.ySubscriptYSize=s.readShort(t,i),i+=2,n.ySubscriptXOffset=s.readShort(t,i),i+=2,n.ySubscriptYOffset=s.readShort(t,i),i+=2,n.ySuperscriptXSize=s.readShort(t,i),i+=2,n.ySuperscriptYSize=s.readShort(t,i),i+=2,n.ySuperscriptXOffset=s.readShort(t,i),i+=2,n.ySuperscriptYOffset=s.readShort(t,i),i+=2,n.yStrikeoutSize=s.readShort(t,i),i+=2,n.yStrikeoutPosition=s.readShort(t,i),i+=2,n.sFamilyClass=s.readShort(t,i),i+=2,n.panose=s.readBytes(t,i,10),i+=10,n.ulUnicodeRange1=s.readUint(t,i),i+=4,n.ulUnicodeRange2=s.readUint(t,i),i+=4,n.ulUnicodeRange3=s.readUint(t,i),i+=4,n.ulUnicodeRange4=s.readUint(t,i),i+=4,n.achVendID=[s.readInt8(t,i),s.readInt8(t,i+1),s.readInt8(t,i+2),s.readInt8(t,i+3)],i+=4,n.fsSelection=s.readUshort(t,i),i+=2,n.usFirstCharIndex=s.readUshort(t,i),i+=2,n.usLastCharIndex=s.readUshort(t,i),i+=2,n.sTypoAscender=s.readShort(t,i),i+=2,n.sTypoDescender=s.readShort(t,i),i+=2,n.sTypoLineGap=s.readShort(t,i),i+=2,n.usWinAscent=s.readUshort(t,i),i+=2,n.usWinDescent=s.readUshort(t,i),i+2},e["OS/2"].version1=function(t,i,n){var s=e._bin;return i=e["OS/2"].version0(t,i,n),n.ulCodePageRange1=s.readUint(t,i),i+=4,n.ulCodePageRange2=s.readUint(t,i),i+4},e["OS/2"].version2=function(t,i,n){var s=e._bin;return i=e["OS/2"].version1(t,i,n),n.sxHeight=s.readShort(t,i),i+=2,n.sCapHeight=s.readShort(t,i),i+=2,n.usDefault=s.readUshort(t,i),i+=2,n.usBreak=s.readUshort(t,i),i+=2,n.usMaxContext=s.readUshort(t,i),i+2},e["OS/2"].version5=function(t,i,n){var s=e._bin;return i=e["OS/2"].version2(t,i,n),n.usLowerOpticalPointSize=s.readUshort(t,i),i+=2,n.usUpperOpticalPointSize=s.readUshort(t,i),i+2},e.post={},e.post.parse=function(t,i,n){var s=e._bin,r={};return r.version=s.readFixed(t,i),i+=4,r.italicAngle=s.readFixed(t,i),i+=4,r.underlinePosition=s.readShort(t,i),i+=2,r.underlineThickness=s.readShort(t,i),i+=2,r},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(t,e){var i=t.cmap,n=-1;if(null!=i.p0e4?n=i.p0e4:null!=i.p3e1?n=i.p3e1:null!=i.p1e0?n=i.p1e0:null!=i.p0e3&&(n=i.p0e3),-1==n)throw"no familiar platform and encoding!";var s=i.tables[n];if(0==s.format)return e>=s.map.length?0:s.map[e];if(4==s.format){for(var r=-1,o=0;o<s.endCount.length;o++)if(e<=s.endCount[o]){r=o;break}return-1==r||s.startCount[r]>e?0:65535&(0!=s.idRangeOffset[r]?s.glyphIdArray[e-s.startCount[r]+(s.idRangeOffset[r]>>1)-(s.idRangeOffset.length-r)]:e+s.idDelta[r])}if(12==s.format){if(e>s.groups[s.groups.length-1][1])return 0;for(o=0;o<s.groups.length;o++){var a=s.groups[o];if(a[0]<=e&&e<=a[1])return a[2]+(e-a[0])}return 0}throw"unknown cmap table format "+s.format},e.U.glyphToPath=function(t,i){var n={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[i]){var s=t.SVG.entries[i];return null==s?n:("string"==typeof s&&(s=e.SVG.toPath(s),t.SVG.entries[i]=s),s)}if(t.CFF){var r={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},o=t.CFF,a=t.CFF.Private;if(o.ROS){for(var h=0;o.FDSelect[h+2]<=i;)h+=2;a=o.FDArray[o.FDSelect[h+1]].Private}e.U._drawCFF(t.CFF.CharStrings[i],r,o,a,n)}else t.glyf&&e.U._drawGlyf(i,t,n);return n},e.U._drawGlyf=function(t,i,n){var s=i.glyf[t];null==s&&(s=i.glyf[t]=e.glyf._parseGlyf(i,t)),null!=s&&(s.noc>-1?e.U._simpleGlyph(s,n):e.U._compoGlyph(s,i,n))},e.U._simpleGlyph=function(t,i){for(var n=0;n<t.noc;n++){for(var s=0==n?0:t.endPts[n-1]+1,r=t.endPts[n],o=s;o<=r;o++){var a=o==s?r:o-1,h=o==r?s:o+1,A=1&t.flags[o],c=1&t.flags[a],l=1&t.flags[h],u=t.xs[o],d=t.ys[o];if(o==s)if(A){if(!c){e.U.P.moveTo(i,u,d);continue}e.U.P.moveTo(i,t.xs[a],t.ys[a])}else c?e.U.P.moveTo(i,t.xs[a],t.ys[a]):e.U.P.moveTo(i,(t.xs[a]+u)/2,(t.ys[a]+d)/2);A?c&&e.U.P.lineTo(i,u,d):l?e.U.P.qcurveTo(i,u,d,t.xs[h],t.ys[h]):e.U.P.qcurveTo(i,u,d,(u+t.xs[h])/2,(d+t.ys[h])/2)}e.U.P.closePath(i)}},e.U._compoGlyph=function(t,i,n){for(var s=0;s<t.parts.length;s++){var r={cmds:[],crds:[]},o=t.parts[s];e.U._drawGlyf(o.glyphIndex,i,r);for(var a=o.m,h=0;h<r.crds.length;h+=2){var A=r.crds[h],c=r.crds[h+1];n.crds.push(A*a.a+c*a.b+a.tx),n.crds.push(A*a.c+c*a.d+a.ty)}for(h=0;h<r.cmds.length;h++)n.cmds.push(r.cmds[h])}},e.U._getGlyphClass=function(t,i){var n=e._lctf.getInterval(i,t);return-1==n?0:i[n+2]},e.U._applySubs=function(t,i,n,s){for(var r=t.length-i-1,o=0;o<n.tabs.length;o++)if(null!=n.tabs[o]){var a,h=n.tabs[o];if(!h.coverage||-1!=(a=e._lctf.coverageIndex(h.coverage,t[i])))if(1==n.ltype)t[i],1==h.fmt?t[i]=t[i]+h.delta:t[i]=h.newg[a];else if(4==n.ltype)for(var A=h.vals[a],c=0;c<A.length;c++){var l=A[c],u=l.chain.length;if(!(u>r)){for(var d=!0,p=0,f=0;f<u;f++){for(;-1==t[i+p+(1+f)];)p++;l.chain[f]!=t[i+p+(1+f)]&&(d=!1)}if(d){for(t[i]=l.nglyph,f=0;f<u+p;f++)t[i+f+1]=-1;break}}}else if(5==n.ltype&&2==h.fmt)for(var g=e._lctf.getInterval(h.cDef,t[i]),m=h.cDef[g+2],C=h.scset[m],v=0;v<C.length;v++){var B=C[v],E=B.input;if(!(E.length>r)){for(d=!0,f=0;f<E.length;f++){var y=e._lctf.getInterval(h.cDef,t[i+1+f]);if(-1==g&&h.cDef[y+2]!=E[f]){d=!1;break}}if(d){var I=B.substLookupRecords;for(c=0;c<I.length;c+=2)I[c],I[c+1]}}}else if(6==n.ltype&&3==h.fmt){if(!e.U._glsCovered(t,h.backCvg,i-h.backCvg.length))continue;if(!e.U._glsCovered(t,h.inptCvg,i))continue;if(!e.U._glsCovered(t,h.ahedCvg,i+h.inptCvg.length))continue;var _=h.lookupRec;for(v=0;v<_.length;v+=2){g=_[v];var w=s[_[v+1]];e.U._applySubs(t,i+g,w,s)}}}},e.U._glsCovered=function(t,i,n){for(var s=0;s<i.length;s++)if(-1==e._lctf.coverageIndex(i[s],t[n+s]))return!1;return!0},e.U.glyphsToPath=function(t,i,n){for(var s={cmds:[],crds:[]},r=0,o=0;o<i.length;o++){var a=i[o];if(-1!=a){for(var h=o<i.length-1&&-1!=i[o+1]?i[o+1]:0,A=e.U.glyphToPath(t,a),c=0;c<A.crds.length;c+=2)s.crds.push(A.crds[c]+r),s.crds.push(A.crds[c+1]);for(n&&s.cmds.push(n),c=0;c<A.cmds.length;c++)s.cmds.push(A.cmds[c]);n&&s.cmds.push("X"),r+=t.hmtx.aWidth[a],o<i.length-1&&(r+=e.U.getPairAdjustment(t,a,h))}}return s},e.U.P={},e.U.P.moveTo=function(t,e,i){t.cmds.push("M"),t.crds.push(e,i)},e.U.P.lineTo=function(t,e,i){t.cmds.push("L"),t.crds.push(e,i)},e.U.P.curveTo=function(t,e,i,n,s,r,o){t.cmds.push("C"),t.crds.push(e,i,n,s,r,o)},e.U.P.qcurveTo=function(t,e,i,n,s){t.cmds.push("Q"),t.crds.push(e,i,n,s)},e.U.P.closePath=function(t){t.cmds.push("Z")},e.U._drawCFF=function(t,i,n,s,r){for(var o=i.stack,a=i.nStems,h=i.haveWidth,A=i.width,c=i.open,l=0,u=i.x,d=i.y,p=0,f=0,g=0,m=0,C=0,v=0,B=0,E=0,y=0,I=0,_={val:0,size:0};l<t.length;){e.CFF.getCharString(t,l,_);var w=_.val;if(l+=_.size,"o1"==w||"o18"==w)o.length%2!=0&&!h&&(A=o.shift()+s.nominalWidthX),a+=o.length>>1,o.length=0,h=!0;else if("o3"==w||"o23"==w)o.length%2!=0&&!h&&(A=o.shift()+s.nominalWidthX),a+=o.length>>1,o.length=0,h=!0;else if("o4"==w)o.length>1&&!h&&(A=o.shift()+s.nominalWidthX,h=!0),c&&e.U.P.closePath(r),d+=o.pop(),e.U.P.moveTo(r,u,d),c=!0;else if("o5"==w)for(;o.length>0;)u+=o.shift(),d+=o.shift(),e.U.P.lineTo(r,u,d);else if("o6"==w||"o7"==w)for(var b=o.length,x="o6"==w,S=0;S<b;S++){var M=o.shift();x?u+=M:d+=M,x=!x,e.U.P.lineTo(r,u,d)}else if("o8"==w||"o24"==w){b=o.length;for(var Q=0;Q+6<=b;)p=u+o.shift(),f=d+o.shift(),g=p+o.shift(),m=f+o.shift(),u=g+o.shift(),d=m+o.shift(),e.U.P.curveTo(r,p,f,g,m,u,d),Q+=6;"o24"==w&&(u+=o.shift(),d+=o.shift(),e.U.P.lineTo(r,u,d))}else{if("o11"==w)break;if("o1234"==w||"o1235"==w||"o1236"==w||"o1237"==w)"o1234"==w&&(f=d,g=(p=u+o.shift())+o.shift(),I=m=f+o.shift(),v=m,E=d,u=(B=(C=(y=g+o.shift())+o.shift())+o.shift())+o.shift(),e.U.P.curveTo(r,p,f,g,m,y,I),e.U.P.curveTo(r,C,v,B,E,u,d)),"o1235"==w&&(p=u+o.shift(),f=d+o.shift(),g=p+o.shift(),m=f+o.shift(),y=g+o.shift(),I=m+o.shift(),C=y+o.shift(),v=I+o.shift(),B=C+o.shift(),E=v+o.shift(),u=B+o.shift(),d=E+o.shift(),o.shift(),e.U.P.curveTo(r,p,f,g,m,y,I),e.U.P.curveTo(r,C,v,B,E,u,d)),"o1236"==w&&(p=u+o.shift(),f=d+o.shift(),g=p+o.shift(),I=m=f+o.shift(),v=m,B=(C=(y=g+o.shift())+o.shift())+o.shift(),E=v+o.shift(),u=B+o.shift(),e.U.P.curveTo(r,p,f,g,m,y,I),e.U.P.curveTo(r,C,v,B,E,u,d)),"o1237"==w&&(p=u+o.shift(),f=d+o.shift(),g=p+o.shift(),m=f+o.shift(),y=g+o.shift(),I=m+o.shift(),C=y+o.shift(),v=I+o.shift(),B=C+o.shift(),E=v+o.shift(),Math.abs(B-u)>Math.abs(E-d)?u=B+o.shift():d=E+o.shift(),e.U.P.curveTo(r,p,f,g,m,y,I),e.U.P.curveTo(r,C,v,B,E,u,d));else if("o14"==w){if(o.length>0&&!h&&(A=o.shift()+n.nominalWidthX,h=!0),4==o.length){var D=o.shift(),T=o.shift(),F=o.shift(),R=o.shift(),P=e.CFF.glyphBySE(n,F),U=e.CFF.glyphBySE(n,R);e.U._drawCFF(n.CharStrings[P],i,n,s,r),i.x=D,i.y=T,e.U._drawCFF(n.CharStrings[U],i,n,s,r)}c&&(e.U.P.closePath(r),c=!1)}else if("o19"==w||"o20"==w)o.length%2!=0&&!h&&(A=o.shift()+s.nominalWidthX),a+=o.length>>1,o.length=0,h=!0,l+=a+7>>3;else if("o21"==w)o.length>2&&!h&&(A=o.shift()+s.nominalWidthX,h=!0),d+=o.pop(),u+=o.pop(),c&&e.U.P.closePath(r),e.U.P.moveTo(r,u,d),c=!0;else if("o22"==w)o.length>1&&!h&&(A=o.shift()+s.nominalWidthX,h=!0),u+=o.pop(),c&&e.U.P.closePath(r),e.U.P.moveTo(r,u,d),c=!0;else if("o25"==w){for(;o.length>6;)u+=o.shift(),d+=o.shift(),e.U.P.lineTo(r,u,d);p=u+o.shift(),f=d+o.shift(),g=p+o.shift(),m=f+o.shift(),u=g+o.shift(),d=m+o.shift(),e.U.P.curveTo(r,p,f,g,m,u,d)}else if("o26"==w)for(o.length%2&&(u+=o.shift());o.length>0;)p=u,f=d+o.shift(),u=g=p+o.shift(),d=(m=f+o.shift())+o.shift(),e.U.P.curveTo(r,p,f,g,m,u,d);else if("o27"==w)for(o.length%2&&(d+=o.shift());o.length>0;)f=d,g=(p=u+o.shift())+o.shift(),m=f+o.shift(),u=g+o.shift(),d=m,e.U.P.curveTo(r,p,f,g,m,u,d);else if("o10"==w||"o29"==w){var O="o10"==w?s:n;if(0==o.length);else{var G=o.pop(),k=O.Subrs[G+O.Bias];i.x=u,i.y=d,i.nStems=a,i.haveWidth=h,i.width=A,i.open=c,e.U._drawCFF(k,i,n,s,r),u=i.x,d=i.y,a=i.nStems,h=i.haveWidth,A=i.width,c=i.open}}else if("o30"==w||"o31"==w){var L=o.length,N=(Q=0,"o31"==w);for(Q+=L-(b=-3&L);Q<b;)N?(f=d,g=(p=u+o.shift())+o.shift(),d=(m=f+o.shift())+o.shift(),b-Q==5?(u=g+o.shift(),Q++):u=g,N=!1):(p=u,f=d+o.shift(),g=p+o.shift(),m=f+o.shift(),u=g+o.shift(),b-Q==5?(d=m+o.shift(),Q++):d=m,N=!0),e.U.P.curveTo(r,p,f,g,m,u,d),Q+=4}else{if("o"==(w+"").charAt(0))throw w;o.push(w)}}}i.x=u,i.y=d,i.nStems=a,i.haveWidth=h,i.width=A,i.open=c};var i=e,n={Typr:i};return t.Typr=i,t.default=n,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr},function(){return function(t){var e=Uint8Array,i=Uint16Array,n=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var s=new i(31),r=0;r<31;++r)s[r]=e+=1<<t[r-1];var o=new n(s[30]);for(r=1;r<30;++r)for(var a=s[r];a<s[r+1];++a)o[a]=a-s[r]<<5|r;return[s,o]},h=a(s,2),A=h[0],c=h[1];A[28]=258,c[258]=28;for(var l=a(r,0)[0],u=new i(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,u[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var f=function(t,e,n){for(var s=t.length,r=0,o=new i(e);r<s;++r)++o[t[r]-1];var a,h=new i(e);for(r=0;r<e;++r)h[r]=h[r-1]+o[r-1]<<1;if(n){a=new i(1<<e);var A=15-e;for(r=0;r<s;++r)if(t[r])for(var c=r<<4|t[r],l=e-t[r],d=h[t[r]-1]++<<l,p=d|(1<<l)-1;d<=p;++d)a[u[d]>>>A]=c}else for(a=new i(s),r=0;r<s;++r)t[r]&&(a[r]=u[h[t[r]-1]++]>>>15-t[r]);return a},g=new e(288);for(d=0;d<144;++d)g[d]=8;for(d=144;d<256;++d)g[d]=9;for(d=256;d<280;++d)g[d]=7;for(d=280;d<288;++d)g[d]=8;var m=new e(32);for(d=0;d<32;++d)m[d]=5;var C=f(g,9,1),v=f(m,5,1),B=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},E=function(t,e,i){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&i},y=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},I=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_=function(t,e,i){var n=new Error(e||I[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,_),!i)throw n;return n},w=function(t,a,h){var c=t.length;if(!c||h&&!h.l&&c<5)return a||new e(0);var u=!a||h,d=!h||h.i;h||(h={}),a||(a=new e(3*c));var p,g=function(t){var i=a.length;if(t>i){var n=new e(Math.max(2*i,t));n.set(a),a=n}},m=h.f||0,I=h.p||0,w=h.b||0,b=h.l,x=h.d,S=h.m,M=h.n,Q=8*c;do{if(!b){h.f=m=E(t,I,1);var D=E(t,I+1,3);if(I+=3,!D){var T=t[(z=((p=I)/8|0)+(7&p&&1)+4)-4]|t[z-3]<<8,F=z+T;if(F>c){d&&_(0);break}u&&g(w+T),a.set(t.subarray(z,F),w),h.b=w+=T,h.p=I=8*F;continue}if(1==D)b=C,x=v,S=9,M=5;else if(2==D){var R=E(t,I,31)+257,P=E(t,I+10,15)+4,U=R+E(t,I+5,31)+1;I+=14;for(var O=new e(U),G=new e(19),k=0;k<P;++k)G[o[k]]=E(t,I+3*k,7);I+=3*P;var L=B(G),N=(1<<L)-1,H=f(G,L,1);for(k=0;k<U;){var z,V=H[E(t,I,N)];if(I+=15&V,(z=V>>>4)<16)O[k++]=z;else{var J=0,j=0;for(16==z?(j=3+E(t,I,3),I+=2,J=O[k-1]):17==z?(j=3+E(t,I,7),I+=3):18==z&&(j=11+E(t,I,127),I+=7);j--;)O[k++]=J}}var Y=O.subarray(0,R),K=O.subarray(R);S=B(Y),M=B(K),b=f(Y,S,1),x=f(K,M,1)}else _(1);if(I>Q){d&&_(0);break}}u&&g(w+131072);for(var q=(1<<S)-1,X=(1<<M)-1,W=I;;W=I){var Z=(J=b[y(t,I)&q])>>>4;if((I+=15&J)>Q){d&&_(0);break}if(J||_(2),Z<256)a[w++]=Z;else{if(256==Z){W=I,b=null;break}var $=Z-254;if(Z>264){var tt=s[k=Z-257];$=E(t,I,(1<<tt)-1)+A[k],I+=tt}var et=x[y(t,I)&X],it=et>>>4;if(et||_(3),I+=15&et,K=l[it],it>3&&(tt=r[it],K+=y(t,I)&(1<<tt)-1,I+=tt),I>Q){d&&_(0);break}u&&g(w+131072);for(var nt=w+$;w<nt;w+=4)a[w]=a[w-K],a[w+1]=a[w+1-K],a[w+2]=a[w+2-K],a[w+3]=a[w+3-K];w=nt}}h.l=b,h.p=W,h.b=w,b&&(m=1,h.m=S,h.d=x,h.n=M)}while(!m);return w==a.length?a:function(t,s,r){(null==s||s<0)&&(s=0),(null==r||r>t.length)&&(r=t.length);var o=new(t instanceof i?i:t instanceof n?n:e)(r-s);return o.set(t.subarray(s,r)),o}(a,0,w)},b=new e(0),x="undefined"!=typeof TextDecoder&&new TextDecoder;try{x.decode(b,{stream:!0})}catch(t){}return t.convert_streams=function(t){var e=new DataView(t),i=0;function n(){var t=e.getUint16(i);return i+=2,t}function s(){var t=e.getUint32(i);return i+=4,t}function r(t){m.setUint16(C,t),C+=2}function o(t){m.setUint32(C,t),C+=4}for(var a={signature:s(),flavor:s(),length:s(),numTables:n(),reserved:n(),totalSfntSize:s(),majorVersion:n(),minorVersion:n(),metaOffset:s(),metaLength:s(),metaOrigLength:s(),privOffset:s(),privLength:s()},h=0;Math.pow(2,h)<=a.numTables;)h++;h--;for(var A=16*Math.pow(2,h),c=16*a.numTables-A,l=12,u=[],d=0;d<a.numTables;d++)u.push({tag:s(),offset:s(),compLength:s(),origLength:s(),origChecksum:s()}),l+=16;var p,f=new Uint8Array(12+16*u.length+u.reduce((function(t,e){return t+e.origLength+4}),0)),g=f.buffer,m=new DataView(g),C=0;return o(a.flavor),r(a.numTables),r(A),r(h),r(c),u.forEach((function(t){o(t.tag),o(t.origChecksum),o(l),o(t.origLength),t.outOffset=l,(l+=t.origLength)%4!=0&&(l+=4-l%4)})),u.forEach((function(e){var i,n=t.slice(e.offset,e.offset+e.compLength);if(e.compLength!=e.origLength){var s=new Uint8Array(e.origLength);i=new Uint8Array(n,2),w(i,s)}else s=new Uint8Array(n);f.set(s,e.outOffset);var r=0;(l=e.outOffset+e.origLength)%4!=0&&(r=4-l%4),f.set(new Uint8Array(r).buffer,e.outOffset+e.origLength),p=l+r})),g.slice(0,p)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams},function(t,e){const i={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let s;function r(t){if(!s){const t={R:2,L:1,D:4,C:16,U:32,T:8};s=new Map;for(let e in n){let i=0;n[e].split(",").forEach((n=>{let[r,o]=n.split("+");r=parseInt(r,36),o=o?parseInt(o,36):0,s.set(i+=r,t[e]);for(let a=o;a--;)s.set(++i,t[e])}))}}return s.get(t)||32}const o=[null,"isol","init","fina","medi"];function a(t){const e=new Uint8Array(t.length);let i=32,n=1,s=-1;for(let o=0;o<t.length;o++){const a=t.codePointAt(o);let h=0|r(a),A=1;8&h||(21&i?22&h?(A=3,1!==n&&3!==n||e[s]++):33&h&&(2!==n&&4!==n||e[s]--):34&i&&(2!==n&&4!==n||e[s]--),n=e[o]=A,i=h,s=o,a>65535&&o++)}return e}function h(e,i){const n=e.GDEF&&e.GDEF.glyphClassDef;return n?t.U._getGlyphClass(i,n):0}function A(...t){for(let e=0;e<t.length;e++)if("number"===typeof t[e])return t[e]}return function(n){const s=new Uint8Array(n,0,4),r=t._bin.readASCII(s,0,4);if("wOFF"===r)n=e(n);else if("wOF2"===r)throw new Error("woff2 fonts not supported");return function(e){const n=Object.create(null),s=e["OS/2"],r=e.hhea,c=e.head.unitsPerEm,l=A(s&&s.sTypoAscender,r&&r.ascender,c),u={unitsPerEm:c,ascender:l,descender:A(s&&s.sTypoDescender,r&&r.descender,0),capHeight:A(s&&s.sCapHeight,l),xHeight:A(s&&s.sxHeight,l),lineGap:A(s&&s.sTypoLineGap,r&&r.lineGap),supportsCodePoint:i=>t.U.codeToGlyph(e,i)>0,forEachGlyph(s,r,A,c){let l=0;const d=1/u.unitsPerEm*r,p=function(e,i){const n=[];for(let r=0;r<i.length;r++){const s=i.codePointAt(r);s>65535&&r++,n.push(t.U.codeToGlyph(e,s))}const s=e.GSUB;if(s){const{lookupList:e,featureList:r}=s;let h;const A=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,c=[];r.forEach((s=>{if(A.test(s.tag))for(let r=0;r<s.tab.length;r++){if(c[s.tab[r]])continue;c[s.tab[r]]=!0;const A=e[s.tab[r]],l=/^(isol|init|fina|medi)$/.test(s.tag);l&&!h&&(h=a(i));for(let i=0;i<n.length;i++)h&&l&&o[h[i]]!==s.tag||t.U._applySubs(n,i,A,e)}}))}return n}(e,s);let f=0;const g=function(e,i){const n=new Int16Array(3*i.length);let s=0;for(;s<i.length;s++){const A=i[s];if(-1===A)continue;n[3*s+2]=e.hmtx.aWidth[A];const c=e.GPOS;if(c){const l=c.lookupList;for(let c=0;c<l.length;c++){const u=l[c];for(let c=0;c<u.tabs.length;c++){const l=u.tabs[c];if(1===u.ltype){if(-1!==t._lctf.coverageIndex(l.coverage,A)&&l.pos){a(l.pos,s);break}}else if(2===u.ltype){let e=null,n=r();if(-1!==n){const r=t._lctf.coverageIndex(l.coverage,i[n]);if(-1!==r){if(1===l.fmt){const t=l.pairsets[r];for(let i=0;i<t.length;i++)t[i].gid2===A&&(e=t[i])}else if(2===l.fmt){const s=t.U._getGlyphClass(i[n],l.classDef1),r=t.U._getGlyphClass(A,l.classDef2);e=l.matrix[s][r]}if(e){e.val1&&a(e.val1,n),e.val2&&a(e.val2,s);break}}}}else if(4===u.ltype){const e=t._lctf.coverageIndex(l.markCoverage,A);if(-1!==e){const a=r(o),h=-1===a?-1:t._lctf.coverageIndex(l.baseCoverage,i[a]);if(-1!==h){const t=l.markArray[e],i=l.baseArray[h][t.markClass];n[3*s]=i.x-t.x+n[3*a]-n[3*a+2],n[3*s+1]=i.y-t.y+n[3*a+1];break}}}else if(6===u.ltype){const o=t._lctf.coverageIndex(l.mark1Coverage,A);if(-1!==o){const a=r();if(-1!==a){const r=i[a];if(3===h(e,r)){const e=t._lctf.coverageIndex(l.mark2Coverage,r);if(-1!==e){const t=l.mark1Array[o],i=l.mark2Array[e][t.markClass];n[3*s]=i.x-t.x+n[3*a]-n[3*a+2],n[3*s+1]=i.y-t.y+n[3*a+1];break}}}}}}}}else if(e.kern&&!e.cff){const t=r();if(-1!==t){const s=e.kern.glyph1.indexOf(i[t]);if(-1!==s){const i=e.kern.rval[s].glyph2.indexOf(A);-1!==i&&(n[3*t+2]+=e.kern.rval[s].vals[i])}}}}return n;function r(t){for(let e=s-1;e>=0;e--)if(-1!==i[e]&&(!t||t(i[e])))return e;return-1}function o(t){return 1===h(e,t)}function a(t,e){for(let i=0;i<3;i++)n[3*e+i]+=t[i]||0}}(e,p);return p.forEach(((o,a)=>{if(-1!==o){let s=n[o];if(!s){const{cmds:r,crds:a}=t.U.glyphToPath(e,o);let h,A,c,l,u="",d=0;for(let t=0,e=r.length;t<e;t++){const e=i[r[t]];u+=r[t];for(let t=1;t<=e;t++)u+=(t>1?",":"")+a[d++]}if(a.length){h=A=1/0,c=l=-1/0;for(let t=0,e=a.length;t<e;t+=2){let e=a[t],i=a[t+1];e<h&&(h=e),i<A&&(A=i),e>c&&(c=e),i>l&&(l=i)}}else h=c=A=l=0;s=n[o]={index:o,advanceWidth:e.hmtx.aWidth[o],xMin:h,yMin:A,xMax:c,yMax:l,path:u}}c.call(null,s,l+g[3*a]*d,g[3*a+1]*d,f),l+=g[3*a+2]*d,A&&(l+=A*r)}f+=s.codePointAt(f)>65535?2:1})),l}};return u}(t.parse(n)[0])}}],init:(t,e,i)=>i(t(),e())}),function(){return function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(t){var e=t>>5;this.buckets.set(e,(this.buckets.get(e)||0)|1<<(31&t))},e.prototype.has=function(t){var e=this.buckets.get(t>>5);return void 0!==e&&0!=(e&1<<(31&t))},e.prototype.serialize=function(){var t=[];return this.buckets.forEach((function(e,i){t.push((+i).toString(36)+":"+e.toString(36))})),t.join(",")},e.prototype.deserialize=function(t){var e=this;this.buckets.clear(),t.split(",").forEach((function(t){var i=t.split(":");e.buckets.set(parseInt(i[0],36),parseInt(i[1],36))}))};var i=Math.pow(2,8),n=i-1,s=~n;function r(t){var e=function(t){return t&s}(t).toString(16),n=function(t){return(t&s)+i-1}(t).toString(16);return"codepoint-index/plane"+(t>>16)+"/"+e+"-"+n+".json"}function o(t,e){var i=t&n,s=e.codePointAt(i/6|0);return 0!=((s=(s||48)-48)&1<<i%6)}function a(t,e){!function(t,e){var i;(i=t,i.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(t){return t.split("-").map((function(t){return parseInt(t.trim(),16)}))}))).forEach((function(t){var i=t[0],n=t[1];void 0===n&&(n=i),e(i,n)}))}(t,(function(t,i){for(var n=t;n<=i;n++)e(n)}))}var h={},A={},c=new WeakMap,l="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function u(t){var i=c.get(t);return i||(i=new e,a(t.ranges,(function(t){return i.add(t)})),c.set(t,i)),i}var d,p=new Map;function f(t,e,i){return t[e]?e:t[i]?i:function(t){for(var e in t)return e}(t)}function g(t,e){var i=e;if(!t.includes(i)){i=1/0;for(var n=0;n<t.length;n++)Math.abs(t[n]-e)<Math.abs(i-e)&&(i=t[n])}return i}function m(t){return d||(d=new Set,a("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(t){d.add(t)}))),d.has(t)}return t.CodePointSet=e,t.clearCache=function(){h={},A={}},t.getFontsForString=function(t,e){void 0===e&&(e={});var i,n=e.lang;void 0===n&&(n=/\p{Script=Hangul}/u.test(i=t)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(i)?"ja":"en");var s=e.category;void 0===s&&(s="sans-serif");var a=e.style;void 0===a&&(a="normal");var c=e.weight;void 0===c&&(c=400);var d=(e.dataUrl||l).replace(/\/$/g,""),C=new Map,v=new Uint8Array(t.length),B={},E={},y=new Array(t.length),I=new Map,_=!1;function w(t){var e=p.get(t);return e||(e=fetch(d+"/"+t).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.json().then((function(t){if(!Array.isArray(t)||1!==t[0])throw new Error("Incorrect schema version; need 1, got "+t[0]);return t[1]}))})).catch((function(e){if(d!==l)return _||(_=!0),d=l,p.delete(t),w(t);throw e})),p.set(t,e)),e}for(var b=function(e){var i=t.codePointAt(e),n=r(i);y[e]=n,h[n]||I.has(n)||I.set(n,w(n).then((function(t){h[n]=t}))),i>65535&&(e++,x=e)},x=0;x<t.length;x++)b(x);return Promise.all(I.values()).then((function(){I.clear();for(var e=function(e){var s=t.codePointAt(e),r=null,a=h[y[e]],c=void 0;for(var l in a){var u=E[l];if(void 0===u&&(u=E[l]=new RegExp(l).test(n||"en")),u){for(var d in c=l,a[l])if(o(s,a[l][d])){r=d;break}break}}if(!r)t:for(var p in a)if(p!==c)for(var f in a[p])if(o(s,a[p][f])){r=f;break t}r||(r="latin"),y[e]=r,A[r]||I.has(r)||I.set(r,w("font-meta/"+r+".json").then((function(t){A[r]=t}))),s>65535&&(e++,i=e)},i=0;i<t.length;i++)e(i);return Promise.all(I.values())})).then((function(){for(var e,i=null,n=0;n<t.length;n++){var r=t.codePointAt(n);if(i&&(m(r)||u(i).has(r)))v[n]=v[n-1];else{i=A[y[n]];var o=B[i.id];if(!o){var h=i.typeforms,l=f(h,s,"sans-serif"),p=f(h[l],a,"normal"),E=g(null===(e=h[l])||void 0===e?void 0:e[p],c);o=B[i.id]=d+"/font-files/"+i.id+"/"+l+"."+p+"."+E+".woff"}var I=C.get(o);null==I&&(I=C.size,C.set(o,I)),v[n]=I}r>65535&&(n++,v[n]=v[n-1])}return{fontUrls:Array.from(C.keys()),chars:v}}))},Object.defineProperty(t,"__esModule",{value:!0}),t}({})}],init:(t,e,i)=>t(e,i())}),Q=()=>(self.performance||Date).now(),D=f();let T;const F=[];let R=0;function P(){const t=Q();for(;F.length&&Q()-t<5;)F.shift()();R=F.length?setTimeout(P,0):0}const U=(...t)=>new Promise(((e,i)=>{F.push((()=>{const n=Q();try{D.webgl.generateIntoCanvas(...t),e({timing:Q()-n})}catch(s){i(s)}})),R||(R=setTimeout(P,0))})),O=4,G=2e3,k={};let L=0;function N(t,e,i,n,s,r,o,a,h,l){const d="TroikaTextSDFGenerator_JS_"+L++%O;let p=k[d];return p||(p=k[d]={workerModule:u({name:d,workerId:d,dependencies:[f,Q],init(t,e){const i=t().javascript.generate;return function(...t){const n=e();return{textureData:i(...t),timing:e()-n}}},getTransferables:t=>[t.textureData.buffer]}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(t,e,i,n,s,r).then((({textureData:i,timing:n})=>{const s=Q(),r=new Uint8Array(4*i.length);for(let t=0;t<i.length;t++)r[4*t+l]=i[t];return D.webglUtils.renderImageData(o,r,a,h,t,e,1<<3-l),n+=Q()-s,0===--p.requests&&(p.idleTimer=setTimeout((()=>{!function(t){c[t]&&c[t].forEach((function(t){t()})),A[t]&&(A[t].terminate(),delete A[t])}(d)}),G)),{timing:n}}))}const H=D.webglUtils.resizeWebGLCanvasWithoutClearing,z={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},V=new n.Color;let J=!1;function j(){return(self.performance||Date).now()}const Y=Object.create(null);function K(t,e){J=!0,t=function(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}({},t);const i=j(),{defaultFontURL:s}=z,r=[];if(s&&r.push({label:"default",src:Z(s)}),t.font&&r.push({label:"user",src:Z(t.font)}),t.font=r,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||z.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||z.unicodeFontsURL,null!=t.colorRanges){let e={};for(let i in t.colorRanges)if(t.colorRanges.hasOwnProperty(i)){let n=t.colorRanges[i];"number"!==typeof n&&(n=V.set(n).getHex()),e[i]=n}t.colorRanges=e}Object.freeze(t);const{textureWidth:o,sdfExponent:a}=z,{sdfGlyphSize:h}=t,A=o/h*4;let c=Y[h];if(!c){const t=document.createElement("canvas");t.width=o,t.height=256*h/A,c=Y[h]={glyphCount:0,sdfGlyphSize:h,sdfCanvas:t,sdfTexture:new n.Texture(t,void 0,void 0,void 0,n.LinearFilter,n.LinearFilter),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,function(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",(e=>{e.preventDefault(),t.contextLost=!0})),e.addEventListener("webglcontextrestored",(e=>{t.contextLost=!1;const i=[];t.glyphsByFont.forEach((e=>{e.forEach((e=>{i.push(q(e,t,!0))}))})),Promise.all(i).then((()=>{$(t),t.sdfTexture.needsUpdate=!0}))}))}(c)}const{sdfTexture:l,sdfCanvas:u}=c;(z.useWorker?et:it)(t).then((n=>{const{glyphIds:s,glyphFontIndices:r,fontData:d,glyphPositions:p,fontSize:f,timings:g}=n,m=[],C=new Float32Array(4*s.length);let v=0,B=0;const E=j(),y=d.map((t=>{let e=c.glyphsByFont.get(t.src);return e||c.glyphsByFont.set(t.src,e=new Map),e}));s.forEach(((t,e)=>{const i=r[e],{src:o,unitsPerEm:a}=d[i];let A=y[i].get(t);if(!A){const{path:e,pathBounds:s}=n.glyphData[o][t],r=Math.max(s[2]-s[0],s[3]-s[1])/h*(z.sdfMargin*h+.5),a=c.glyphCount++,l=[s[0]-r,s[1]-r,s[2]+r,s[3]+r];y[i].set(t,A={path:e,atlasIndex:a,sdfViewBox:l}),m.push(A)}const{sdfViewBox:l}=A,u=p[B++],g=p[B++],E=f/a;C[v++]=u+l[0]*E,C[v++]=g+l[1]*E,C[v++]=u+l[2]*E,C[v++]=g+l[3]*E,s[e]=A.atlasIndex})),g.quads=(g.quads||0)+(j()-E);const I=j();g.sdf={};const _=u.height,w=Math.ceil(c.glyphCount/A),b=Math.pow(2,Math.ceil(Math.log2(w*h)));b>_&&(H(u,o,b),l.dispose()),Promise.all(m.map((e=>q(e,c,t.gpuAccelerateSDF).then((({timing:t})=>{g.sdf[e.atlasIndex]=t}))))).then((()=>{m.length&&!c.contextLost&&($(c),l.needsUpdate=!0),g.sdfTotal=j()-I,g.total=j()-i,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:h,sdfExponent:a,glyphBounds:C,glyphAtlasIndices:s,glyphColors:n.glyphColors,caretPositions:n.caretPositions,chunkedBounds:n.chunkedBounds,ascender:n.ascender,descender:n.descender,lineHeight:n.lineHeight,capHeight:n.capHeight,xHeight:n.xHeight,topBaseline:n.topBaseline,blockBounds:n.blockBounds,visibleBounds:n.visibleBounds,timings:n.timings}))}))})),Promise.resolve().then((()=>{var t;c.contextLost||(t=u)._warm||(D.webgl.isSupported(t),t._warm=!0)}))}function q({path:t,atlasIndex:e,sdfViewBox:i},{sdfGlyphSize:n,sdfCanvas:s,contextLost:r},o){if(r)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:h}=z,A=Math.max(i[2]-i[0],i[3]-i[1]),c=Math.floor(e/4);return function(t,e,i,n,s,r,o,a,h,A,c=!0){return c?U(t,e,i,n,s,r,o,a,h,A).then(null,(c=>(T||(T=!0),N(t,e,i,n,s,r,o,a,h,A)))):N(t,e,i,n,s,r,o,a,h,A)}(n,n,t,i,A,h,s,c%(a/n)*n,Math.floor(c/(a/n))*n,e%4,o)}function X({font:t,characters:e,sdfGlyphSize:i},n){K({font:t,sdfGlyphSize:i,text:Array.isArray(e)?e.join("\n"):""+e},n)}let W;function Z(t){return W||(W="undefined"===typeof document?{}:document.createElement("a")),W.href=t,W.href}function $(t){if("function"!==typeof createImageBitmap){const{sdfCanvas:e,sdfTexture:i}=t,{width:n,height:s}=e,r=t.sdfCanvas.getContext("webgl");let o=i.image.data;o&&o.length===n*s*4||(o=new Uint8Array(n*s*4),i.image={width:n,height:s,data:o},i.flipY=!1,i.isDataTexture=!0),r.readPixels(0,0,n,s,r.RGBA,r.UNSIGNED_BYTE,o)}}const tt=u({name:"Typesetter",dependencies:[function(t,e){const i=1/0,n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",r=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:o="",font:l,lang:u,sdfGlyphSize:d=64,fontSize:p=400,fontWeight:f=1,fontStyle:g="normal",letterSpacing:m=0,lineHeight:C="normal",maxWidth:v=i,direction:B,textAlign:E="left",textIndent:y=0,whiteSpace:I="normal",overflowWrap:_="normal",anchorX:w=0,anchorY:b=0,metricsOnly:x=!1,unicodeFontsURL:S,preResolvedFonts:M=null,includeCaretPositions:Q=!1,chunkedBoundsSize:D=8192,colorRanges:T=null},F){const R=A(),P={fontLoad:0,typesetting:0};o.indexOf("\r")>-1&&(o=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),p=+p,m=+m,v=+v,C=C||"normal",y=+y,function({text:e,lang:i,fonts:n,style:s,weight:r,preResolvedFonts:o,unicodeFontsURL:a},h){const A=({chars:t,fonts:e})=>{let i,n;const s=[];for(let r=0;r<t.length;r++)t[r]!==n?(n=t[r],s.push(i={start:r,end:r,fontObj:e[t[r]]})):i.end=r;h(s)};o?A(o):t(e,A,{lang:i,fonts:n,style:s,weight:r,unicodeFontsURL:a})}({text:o,lang:u,style:g,weight:f,fonts:"string"===typeof l?[{src:l}]:l,unicodeFontsURL:S,preResolvedFonts:M},(t=>{P.fontLoad=A()-R;const l=isFinite(v);let u=null,d=null,f=null,g=null,S=null,M=null,U=null,O=null,G=0,k=0,L="nowrap"!==I;const N=new Map,H=A();let z=y,V=0,J=new c;const j=[J];t.forEach((t=>{const{fontObj:e}=t,{ascender:i,descender:a,unitsPerEm:h,lineGap:A,capHeight:u,xHeight:d}=e;let f=N.get(e);if(!f){const t=p/h,n="normal"===C?(i-a+A)*t:C*p,s=(n-(i-a)*t)/2,r=Math.min(n,(i-a)*t),o=(i+a)/2*t+r/2;f={index:N.size,src:e.src,fontObj:e,fontSizeMult:t,unitsPerEm:h,ascender:i*t,descender:a*t,capHeight:u*t,xHeight:d*t,lineHeight:n,baseline:-s-i*t,caretTop:o,caretBottom:o-r},N.set(e,f)}const{fontSizeMult:g}=f,B=o.slice(t.start,t.end+1);let E,I;e.forEachGlyph(B,p,m,((e,i,a,h)=>{i+=V,h+=t.start,E=i,I=e;const A=o.charAt(h),u=e.advanceWidth*g,d=J.count;let C;if("isEmpty"in e||(e.isWhitespace=!!A&&new RegExp(s).test(A),e.canBreakAfter=!!A&&r.test(A),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax||n.test(A)),e.isWhitespace||e.isEmpty||k++,L&&l&&!e.isWhitespace&&i+u+z>v&&d){if(J.glyphAt(d-1).glyphObj.canBreakAfter)C=new c,z=-i;else for(let t=d;t--;){if(0===t&&"break-word"===_){C=new c,z=-i;break}if(J.glyphAt(t).glyphObj.canBreakAfter){C=J.splitAt(t+1);const e=C.glyphAt(0).x;z-=e;for(let t=C.count;t--;)C.glyphAt(t).x-=e;break}}C&&(J.isSoftWrapped=!0,J=C,j.push(J),G=v)}let B=J.glyphAt(J.count);B.glyphObj=e,B.x=i+z,B.y=a,B.width=u,B.charIndex=h,B.fontData=f,"\n"===A&&(J=new c,j.push(J),z=-(i+u+m*p)+y)})),V=E+I.advanceWidth*g+m*p}));let Y=0;j.forEach((t=>{let e=!0;for(let i=t.count;i--;){const n=t.glyphAt(i);e&&!n.glyphObj.isWhitespace&&(t.width=n.x+n.width,t.width>G&&(G=t.width),e=!1);let{lineHeight:s,capHeight:r,xHeight:o,baseline:a}=n.fontData;s>t.lineHeight&&(t.lineHeight=s);const h=a-t.baseline;h<0&&(t.baseline+=h,t.cap+=h,t.ex+=h),t.cap=Math.max(t.cap,t.baseline+r),t.ex=Math.max(t.ex,t.baseline+o)}t.baseline-=Y,t.cap-=Y,t.ex-=Y,Y+=t.lineHeight}));let K=0,q=0;if(w&&("number"===typeof w?K=-w:"string"===typeof w&&(K=-G*("left"===w?0:"center"===w?.5:"right"===w?1:a(w)))),b&&("number"===typeof b?q=-b:"string"===typeof b&&(q="top"===b?0:"top-baseline"===b?-j[0].baseline:"top-cap"===b?-j[0].cap:"top-ex"===b?-j[0].ex:"middle"===b?Y/2:"bottom"===b?Y:"bottom-baseline"===b?-j[j.length-1].baseline:a(b)*Y)),!x){const t=e.getEmbeddingLevels(o,B);u=new Uint16Array(k),d=new Uint8Array(k),f=new Float32Array(2*k),g={},U=[i,i,-1/0,-1/0],O=[],Q&&(M=new Float32Array(4*o.length)),T&&(S=new Uint8Array(3*k));let n,s,r=0,a=-1,A=-1;if(j.forEach(((c,l)=>{let{count:p,width:m}=c;if(p>0){let l=0;for(let t=p;t--&&c.glyphAt(t).glyphObj.isWhitespace;)l++;let C=0,v=0;if("center"===E)C=(G-m)/2;else if("right"===E)C=G-m;else if("justify"===E&&c.isSoftWrapped){let t=0;for(let e=p-l;e--;)c.glyphAt(e).glyphObj.isWhitespace&&t++;v=(G-m)/t}if(v||C){let t=0;for(let e=0;e<p;e++){let i=c.glyphAt(e);const n=i.glyphObj;i.x+=C+t,0!==v&&n.isWhitespace&&e<p-l&&(t+=v,i.width+=v)}}const B=e.getReorderSegments(o,t,c.glyphAt(0).charIndex,c.glyphAt(c.count-1).charIndex);for(let t=0;t<B.length;t++){const[e,i]=B[t];let n=1/0,s=-1/0;for(let t=0;t<p;t++)if(c.glyphAt(t).charIndex>=e){let e=t,r=t;for(;r<p;r++){let t=c.glyphAt(r);if(t.charIndex>i)break;r<p-l&&(n=Math.min(n,t.x),s=Math.max(s,t.x+t.width))}for(let t=e;t<r;t++){const e=c.glyphAt(t);e.x=s-(e.x+e.width-n)}break}}let y;const I=t=>y=t;for(let m=0;m<p;m++){const l=c.glyphAt(m);y=l.glyphObj;const p=y.index,C=1&t.levels[l.charIndex];if(C){const t=e.getMirroredCharacter(o[l.charIndex]);t&&l.fontData.fontObj.forEachGlyph(t,0,0,I)}if(Q){const{charIndex:t,fontData:e}=l,i=l.x+K,n=l.x+l.width+K;M[4*t]=C?n:i,M[4*t+1]=C?i:n,M[4*t+2]=c.baseline+e.caretBottom+q,M[4*t+3]=c.baseline+e.caretTop+q;const s=t-a;s>1&&h(M,a,s),a=t}if(T){const{charIndex:t}=l;for(;t>A;)A++,T.hasOwnProperty(A)&&(s=T[A])}if(!y.isWhitespace&&!y.isEmpty){const t=r++,{fontSizeMult:e,src:o,index:a}=l.fontData,h=g[o]||(g[o]={});h[p]||(h[p]={path:y.path,pathBounds:[y.xMin,y.yMin,y.xMax,y.yMax]});const A=l.x+K,m=l.y+c.baseline+q;f[2*t]=A,f[2*t+1]=m;const C=A+y.xMin*e,v=m+y.yMin*e,B=A+y.xMax*e,E=m+y.yMax*e;C<U[0]&&(U[0]=C),v<U[1]&&(U[1]=v),B>U[2]&&(U[2]=B),E>U[3]&&(U[3]=E),t%D===0&&(n={start:t,end:t,rect:[i,i,-1/0,-1/0]},O.push(n)),n.end++;const I=n.rect;if(C<I[0]&&(I[0]=C),v<I[1]&&(I[1]=v),B>I[2]&&(I[2]=B),E>I[3]&&(I[3]=E),u[t]=p,d[t]=a,T){const e=3*t;S[e]=s>>16&255,S[e+1]=s>>8&255,S[e+2]=255&s}}}}})),M){const t=o.length-a;t>1&&h(M,a,t)}}const X=[];N.forEach((({index:t,src:e,unitsPerEm:i,ascender:n,descender:s,lineHeight:r,capHeight:o,xHeight:a})=>{X[t]={src:e,unitsPerEm:i,ascender:n,descender:s,lineHeight:r,capHeight:o,xHeight:a}})),P.typesetting=A()-H,F({glyphIds:u,glyphFontIndices:d,glyphPositions:f,glyphData:g,fontData:X,caretPositions:M,glyphColors:S,chunkedBounds:O,fontSize:p,topBaseline:q+j[0].baseline,blockBounds:[K,q-Y,K+G,q],visibleBounds:U,timings:P})}))}function a(t){let e=t.match(/^([\d.]+)%$/),i=e?parseFloat(e[1]):NaN;return isNaN(i)?0:i/100}function h(t,e,i){const n=t[4*e],s=t[4*e+1],r=t[4*e+2],o=t[4*e+3],a=(s-n)/i;for(let h=0;h<i;h++){const i=4*(e+h);t[i]=n+a*h,t[i+1]=n+a*(h+1),t[i+2]=r,t[i+3]=o}}function A(){return(self.performance||Date).now()}function c(){this.data=[]}const l=["glyphObj","x","y","width","charIndex","fontData"];return c.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/l.length)},glyphAt(t){let e=c.flyweight;return e.data=this.data,e.index=t,e},splitAt(t){let e=new c;return e.data=this.data.splice(t*l.length),e}},c.flyweight=l.reduce(((t,e,i,n)=>(Object.defineProperty(t,e,{get(){return this.data[this.index*l.length+i]},set(t){this.data[this.index*l.length+i]=t}}),t)),{data:null,index:0}),{typeset:o,measure:function(t,e){o({...t,metricsOnly:!0},(t=>{const[i,n,s,r]=t.blockBounds;e({width:s-i,height:r-n})}))}}},M,function(){return function(t){var e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},n={};i.L=1,n[1]="L",Object.keys(e).forEach((function(t,e){i[t]=1<<e+1,n[i[t]]=t})),Object.freeze(i);var s,r,o,a=i.LRI|i.RLI|i.FSI,h=i.L|i.R|i.AL,A=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,c=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,l=i.S|i.WS|i.B|a|i.PDI|c,u=null;function d(t){return function(){if(!u){u=new Map;var t=function(t){if(e.hasOwnProperty(t)){var n=0;e[t].split(",").forEach((function(e){var s=e.split("+"),r=s[0],o=s[1];r=parseInt(r,36),o=o?parseInt(o,36):0,u.set(n+=r,i[t]);for(var a=0;a<o;a++)u.set(++n,i[t])}))}};for(var n in e)t(n)}}(),u.get(t.codePointAt(0))||i.L}function p(t,e){var i,n=0,s=new Map,r=e&&new Map;return t.split(",").forEach((function t(o){if(-1!==o.indexOf("+"))for(var a=+o;a--;)t(i);else{i=o;var h=o.split(">"),A=h[0],c=h[1];A=String.fromCodePoint(n+=parseInt(A,36)),c=String.fromCodePoint(n+=parseInt(c,36)),s.set(A,c),e&&r.set(c,A)}})),{map:s,reverseMap:r}}function f(){if(!s){var t=p("14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",!0),e=t.map,i=t.reverseMap;s=e,r=i,o=p("6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye",!1).map}}function g(t){return f(),s.get(t)||null}function m(t){return f(),r.get(t)||null}function C(t){return f(),o.get(t)||null}var v,B=i.L,E=i.R,y=i.EN,I=i.ES,_=i.ET,w=i.AN,b=i.CS,x=i.B,S=i.S,M=i.ON,Q=i.BN,D=i.NSM,T=i.AL,F=i.LRO,R=i.RLO,P=i.LRE,U=i.RLE,O=i.PDF,G=i.LRI,k=i.RLI,L=i.FSI,N=i.PDI;function H(t){return function(){if(!v){var t=p("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),e=t.map;t.reverseMap.forEach((function(t,i){e.set(i,t)})),v=e}}(),v.get(t)||null}function z(t,e,i,n){var s=t.length;i=Math.max(0,null==i?0:+i),n=Math.min(s-1,null==n?s-1:+n);var r=[];return e.paragraphs.forEach((function(s){var o=Math.max(i,s.start),a=Math.min(n,s.end);if(o<a){for(var h=e.levels.slice(o,a+1),A=a;A>=o&&d(t[A])&l;A--)h[A]=s.level;for(var c=s.level,u=1/0,p=0;p<h.length;p++){var f=h[p];f>c&&(c=f),f<u&&(u=1|f)}for(var g=c;g>=u;g--)for(var m=0;m<h.length;m++)if(h[m]>=g){for(var C=m;m+1<h.length&&h[m+1]>=g;)m++;m>C&&r.push([C+o,m+o])}}})),r}function V(t,e,i,n){for(var s=z(t,e,i,n),r=[],o=0;o<t.length;o++)r[o]=o;return s.forEach((function(t){for(var e=t[0],i=t[1],n=r.slice(e,i+1),s=n.length;s--;)r[i-s]=n[s]})),r}return t.closingToOpeningBracket=m,t.getBidiCharType=d,t.getBidiCharTypeName=function(t){return n[d(t)]},t.getCanonicalBracket=C,t.getEmbeddingLevels=function(t,e){for(var i=new Uint32Array(t.length),n=0;n<t.length;n++)i[n]=d(t[n]);var s=new Map;function r(t,e){var n=i[t];i[t]=e,s.set(n,s.get(n)-1),n&A&&s.set(A,s.get(A)-1),s.set(e,(s.get(e)||0)+1),e&A&&s.set(A,(s.get(A)||0)+1)}for(var o=new Uint8Array(t.length),u=new Map,p=[],f=null,v=0;v<t.length;v++)f||p.push(f={start:v,end:t.length-1,level:"rtl"===e?1:"ltr"===e?0:Ne(v,!1)}),i[v]&x&&(f.end=v,f=null);for(var H=U|P|R|F|a|N|O|x,z=function(t){return t+(1&t?1:2)},V=function(t){return t+(1&t?2:1)},J=0;J<p.length;J++){var j=[{_level:(f=p[J]).level,_override:0,_isolate:0}],Y=void 0,K=0,q=0,X=0;s.clear();for(var W=f.start;W<=f.end;W++){var Z=i[W];if(Y=j[j.length-1],s.set(Z,(s.get(Z)||0)+1),Z&A&&s.set(A,(s.get(A)||0)+1),Z&H)if(Z&(U|P)){o[W]=Y._level;var $=(Z===U?V:z)(Y._level);$<=125&&!K&&!q?j.push({_level:$,_override:0,_isolate:0}):K||q++}else if(Z&(R|F)){o[W]=Y._level;var tt=(Z===R?V:z)(Y._level);tt<=125&&!K&&!q?j.push({_level:tt,_override:Z&R?E:B,_isolate:0}):K||q++}else if(Z&a){Z&L&&(Z=1===Ne(W+1,!0)?k:G),o[W]=Y._level,Y._override&&r(W,Y._override);var et=(Z===k?V:z)(Y._level);et<=125&&0===K&&0===q?(X++,j.push({_level:et,_override:0,_isolate:1,_isolInitIndex:W})):K++}else if(Z&N){if(K>0)K--;else if(X>0){for(q=0;!j[j.length-1]._isolate;)j.pop();var it=j[j.length-1]._isolInitIndex;null!=it&&(u.set(it,W),u.set(W,it)),j.pop(),X--}Y=j[j.length-1],o[W]=Y._level,Y._override&&r(W,Y._override)}else Z&O?(0===K&&(q>0?q--:!Y._isolate&&j.length>1&&(j.pop(),Y=j[j.length-1])),o[W]=Y._level):Z&x&&(o[W]=f.level);else o[W]=Y._level,Y._override&&Z!==Q&&r(W,Y._override)}for(var nt=[],st=null,rt=f.start;rt<=f.end;rt++){var ot=i[rt];if(!(ot&c)){var at=o[rt],ht=ot&a,At=ot===N;st&&at===st._level?(st._end=rt,st._endsWithIsolInit=ht):nt.push(st={_start:rt,_end:rt,_level:at,_startsWithPDI:At,_endsWithIsolInit:ht})}}for(var ct=[],lt=0;lt<nt.length;lt++){var ut=nt[lt];if(!ut._startsWithPDI||ut._startsWithPDI&&!u.has(ut._start)){for(var dt=[st=ut],pt=void 0;st&&st._endsWithIsolInit&&null!=(pt=u.get(st._end));)for(var ft=lt+1;ft<nt.length;ft++)if(nt[ft]._start===pt){dt.push(st=nt[ft]);break}for(var gt=[],mt=0;mt<dt.length;mt++)for(var Ct=dt[mt],vt=Ct._start;vt<=Ct._end;vt++)gt.push(vt);for(var Bt=o[gt[0]],Et=f.level,yt=gt[0]-1;yt>=0;yt--)if(!(i[yt]&c)){Et=o[yt];break}var It=gt[gt.length-1],_t=o[It],wt=f.level;if(!(i[It]&a))for(var bt=It+1;bt<=f.end;bt++)if(!(i[bt]&c)){wt=o[bt];break}ct.push({_seqIndices:gt,_sosType:Math.max(Et,Bt)%2?E:B,_eosType:Math.max(wt,_t)%2?E:B})}}for(var xt=0;xt<ct.length;xt++){var St=ct[xt],Mt=St._seqIndices,Qt=St._sosType,Dt=St._eosType,Tt=1&o[Mt[0]]?E:B;if(s.get(D))for(var Ft=0;Ft<Mt.length;Ft++){var Rt=Mt[Ft];if(i[Rt]&D){for(var Pt=Qt,Ut=Ft-1;Ut>=0;Ut--)if(!(i[Mt[Ut]]&c)){Pt=i[Mt[Ut]];break}r(Rt,Pt&(a|N)?M:Pt)}}if(s.get(y))for(var Ot=0;Ot<Mt.length;Ot++){var Gt=Mt[Ot];if(i[Gt]&y)for(var kt=Ot-1;kt>=-1;kt--){var Lt=-1===kt?Qt:i[Mt[kt]];if(Lt&h){Lt===T&&r(Gt,w);break}}}if(s.get(T))for(var Nt=0;Nt<Mt.length;Nt++){var Ht=Mt[Nt];i[Ht]&T&&r(Ht,E)}if(s.get(I)||s.get(b))for(var zt=1;zt<Mt.length-1;zt++){var Vt=Mt[zt];if(i[Vt]&(I|b)){for(var Jt=0,jt=0,Yt=zt-1;Yt>=0&&(Jt=i[Mt[Yt]])&c;Yt--);for(var Kt=zt+1;Kt<Mt.length&&(jt=i[Mt[Kt]])&c;Kt++);Jt===jt&&(i[Vt]===I?Jt===y:Jt&(y|w))&&r(Vt,Jt)}}if(s.get(y))for(var qt=0;qt<Mt.length;qt++){var Xt=Mt[qt];if(i[Xt]&y){for(var Wt=qt-1;Wt>=0&&i[Mt[Wt]]&(_|c);Wt--)r(Mt[Wt],y);for(qt++;qt<Mt.length&&i[Mt[qt]]&(_|c|y);qt++)i[Mt[qt]]!==y&&r(Mt[qt],y)}}if(s.get(_)||s.get(I)||s.get(b))for(var Zt=0;Zt<Mt.length;Zt++){var $t=Mt[Zt];if(i[$t]&(_|I|b)){r($t,M);for(var te=Zt-1;te>=0&&i[Mt[te]]&c;te--)r(Mt[te],M);for(var ee=Zt+1;ee<Mt.length&&i[Mt[ee]]&c;ee++)r(Mt[ee],M)}}if(s.get(y))for(var ie=0,ne=Qt;ie<Mt.length;ie++){var se=Mt[ie],re=i[se];re&y?ne===B&&r(se,B):re&h&&(ne=re)}if(s.get(A)){for(var oe=E|y|w,ae=oe|B,he=[],Ae=[],ce=0;ce<Mt.length;ce++)if(i[Mt[ce]]&A){var le=t[Mt[ce]],ue=void 0;if(null!==g(le)){if(!(Ae.length<63))break;Ae.push({char:le,seqIndex:ce})}else if(null!==(ue=m(le)))for(var de=Ae.length-1;de>=0;de--){var pe=Ae[de].char;if(pe===ue||pe===m(C(le))||g(C(pe))===le){he.push([Ae[de].seqIndex,ce]),Ae.length=de;break}}}he.sort((function(t,e){return t[0]-e[0]}));for(var fe=0;fe<he.length;fe++){for(var ge=he[fe],me=ge[0],Ce=ge[1],ve=!1,Be=0,Ee=me+1;Ee<Ce;Ee++){var ye=Mt[Ee];if(i[ye]&ae){ve=!0;var Ie=i[ye]&oe?E:B;if(Ie===Tt){Be=Ie;break}}}if(ve&&!Be){Be=Qt;for(var _e=me-1;_e>=0;_e--){var we=Mt[_e];if(i[we]&ae){var be=i[we]&oe?E:B;Be=be!==Tt?be:Tt;break}}}if(Be){if(i[Mt[me]]=i[Mt[Ce]]=Be,Be!==Tt)for(var xe=me+1;xe<Mt.length;xe++)if(!(i[Mt[xe]]&c)){d(t[Mt[xe]])&D&&(i[Mt[xe]]=Be);break}if(Be!==Tt)for(var Se=Ce+1;Se<Mt.length;Se++)if(!(i[Mt[Se]]&c)){d(t[Mt[Se]])&D&&(i[Mt[Se]]=Be);break}}}for(var Me=0;Me<Mt.length;Me++)if(i[Mt[Me]]&A){for(var Qe=Me,De=Me,Te=Qt,Fe=Me-1;Fe>=0;Fe--){if(!(i[Mt[Fe]]&c)){Te=i[Mt[Fe]]&oe?E:B;break}Qe=Fe}for(var Re=Dt,Pe=Me+1;Pe<Mt.length;Pe++){if(!(i[Mt[Pe]]&(A|c))){Re=i[Mt[Pe]]&oe?E:B;break}De=Pe}for(var Ue=Qe;Ue<=De;Ue++)i[Mt[Ue]]=Te===Re?Te:Tt;Me=De}}}for(var Oe=f.start;Oe<=f.end;Oe++){var Ge=o[Oe],ke=i[Oe];if(1&Ge?ke&(B|y|w)&&o[Oe]++:ke&E?o[Oe]++:ke&(w|y)&&(o[Oe]+=2),ke&c&&(o[Oe]=0===Oe?f.level:o[Oe-1]),Oe===f.end||d(t[Oe])&(S|x))for(var Le=Oe;Le>=0&&d(t[Le])&l;Le--)o[Le]=f.level}}return{levels:o,paragraphs:p};function Ne(e,n){for(var s=e;s<t.length;s++){var r=i[s];if(r&(E|T))return 1;if(r&(x|B)||n&&r===N)return 0;if(r&a){var o=He(s);s=-1===o?t.length:o}}return 0}function He(e){for(var n=1,s=e+1;s<t.length;s++){var r=i[s];if(r&x)break;if(r&N){if(0===--n)return s}else r&a&&n++}return-1}},t.getMirroredCharacter=H,t.getMirroredCharactersMap=function(t,e,i,n){var s=t.length;i=Math.max(0,null==i?0:+i),n=Math.min(s-1,null==n?s-1:+n);for(var r=new Map,o=i;o<=n;o++)if(1&e[o]){var a=H(t[o]);null!==a&&r.set(o,a)}return r},t.getReorderSegments=z,t.getReorderedIndices=V,t.getReorderedString=function(t,e,i,n){var s=V(t,e,i,n),r=[].concat(t);return s.forEach((function(i,n){r[n]=(1&e.levels[i]?H(t[i]):null)||t[i]})),r.join("")},t.openingToClosingBracket=g,Object.defineProperty(t,"__esModule",{value:!0}),t}({})}],init:(t,e,i)=>t(e,i())}),et=u({name:"Typesetter",dependencies:[tt],init:t=>function(e){return new Promise((i=>{t.typeset(e,i)}))},getTransferables(t){const e=[];for(let i in t)t[i]&&t[i].buffer&&e.push(t[i].buffer);return e}}),it=et.onMainThread,nt={},st="aTroikaGlyphIndex";class rt extends n.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new n.Sphere,this.boundingBox=new n.Box3}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,("number"!==typeof t||t<1)&&(t=1);let e=function(t){let e=nt[t];return e||(e=nt[t]=new n.PlaneGeometry(1,1,t,t).translate(.5,.5,0)),e}(t);["position","normal","uv"].forEach((t=>{this.attributes[t]=e.attributes[t].clone()})),this.setIndex(e.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,e,i,n,s){this.updateAttributeData("aTroikaGlyphBounds",t,4),this.updateAttributeData(st,e,1),this.updateAttributeData("aTroikaGlyphColor",s,3),this._blockBounds=i,this._chunkedBounds=n,this.instanceCount=e.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:e,boundingBox:i}=this;if(e){const{PI:n,floor:s,min:r,max:o,sin:a,cos:h}=Math,A=n/2,c=2*n,l=Math.abs(e),u=t[0]/l,d=t[2]/l,p=s((u+A)/c)!==s((d+A)/c)?-l:r(a(u)*l,a(d)*l),f=s((u-A)/c)!==s((d-A)/c)?l:o(a(u)*l,a(d)*l),g=s((u+n)/c)!==s((d+n)/c)?2*l:o(l-h(u)*l,l-h(d)*l);i.min.set(p,t[1],e<0?-g:0),i.max.set(f,t[3],e<0?0:g)}else i.min.set(t[0],t[1],0),i.max.set(t[2],t[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let e=this.getAttribute(st).count,i=this._chunkedBounds;if(i)for(let n=i.length;n--;){e=i[n].end;let s=i[n].rect;if(s[1]<t.w&&s[3]>t.y&&s[0]<t.z&&s[2]>t.x)break}this.instanceCount=e}updateAttributeData(t,e,i){const s=this.getAttribute(t);e?s&&s.array.length===e.length?(s.array.set(e),s.needsUpdate=!0):(this.setAttribute(t,new n.InstancedBufferAttribute(e,i)),delete this._maxInstanceCount,this.dispose()):s&&this.deleteAttribute(t)}}function ot(t){const e=_(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new n.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new n.Vector4(0,0,0,0)},uTroikaClipRect:{value:new n.Vector4(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new n.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new n.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new n.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:t,fragmentShader:e}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(e)&&(e=e.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(g,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:e}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const at=new n.MeshBasicMaterial({color:16777215,side:n.DoubleSide,transparent:!0}),ht=8421504,At=new n.Matrix4,ct=new n.Vector3,lt=new n.Vector3,ut=[],dt=new n.Vector3,pt="+x+y";function ft(t){return Array.isArray(t)?t[0]:t}let gt=()=>{const t=new n.Mesh(new n.PlaneGeometry(1,1),at);return gt=()=>t,t},mt=()=>{const t=new n.Mesh(new n.PlaneGeometry(1,1,32,1),at);return mt=()=>t,t};const Ct={type:"syncstart"},vt={type:"synccomplete"},Bt=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Et=Bt.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class yt extends n.Mesh{constructor(){super(new rt,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=ht,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=pt,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(Ct),K({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},(e=>{this._isSyncing=!1,this._textRenderInfo=e,this.geometry.updateGlyphs(e.glyphBounds,e.glyphAtlasIndices,e.blockBounds,e.chunkedBounds,e.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{i.forEach((t=>t&&t()))}))),this.dispatchEvent(vt),t&&t()}))))}onBeforeRender(t,e,i,n,s,r){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return ot(t)}get material(){let t=this._derivedMaterial;const e=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=at.clone());if(t&&t.isDerivedFrom(e)||(t=this._derivedMaterial=this.createDerivedMaterial(e),e.addEventListener("dispose",(function i(){e.removeEventListener("dispose",i),t.dispose()}))),this.hasOutline()){let e=t._outlineMtl;return e||(e=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),e.isTextOutlineMaterial=!0,e.depthWrite=!1,e.map=null,t.addEventListener("dispose",(function i(){t.removeEventListener("dispose",i),e.dispose()}))),[e,t]}return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return ft(this.material).getDepthMaterial()}set customDepthMaterial(t){}get customDistanceMaterial(){return ft(this.material).getDistanceMaterial()}set customDistanceMaterial(t){}_prepareForRender(t){const e=t.isTextOutlineMaterial,i=t.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:t,blockBounds:n}=s;i.uTroikaSDFTexture.value=t,i.uTroikaSDFTextureSize.value.set(t.image.width,t.image.height),i.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,i.uTroikaSDFExponent.value=s.sdfExponent,i.uTroikaTotalBounds.value.fromArray(n),i.uTroikaUseGlyphColors.value=!e&&!!s.glyphColors;let r,o,a,h=0,A=0,c=0,l=0,u=0;if(e){let{outlineWidth:t,outlineOffsetX:e,outlineOffsetY:i,outlineBlur:n,outlineOpacity:s}=this;h=this._parsePercent(t)||0,A=Math.max(0,this._parsePercent(n)||0),r=s,l=this._parsePercent(e)||0,u=this._parsePercent(i)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(a=this.strokeColor,i.uTroikaStrokeColor.value.set(null==a?ht:a),o=this.strokeOpacity,null==o&&(o=1)),r=this.fillOpacity;i.uTroikaEdgeOffset.value=h,i.uTroikaPositionOffset.value.set(l,u),i.uTroikaBlurRadius.value=A,i.uTroikaStrokeWidth.value=c,i.uTroikaStrokeOpacity.value=o,i.uTroikaFillOpacity.value=null==r?1:r,i.uTroikaCurveRadius.value=this.curveRadius||0;let d=this.clipRect;if(d&&Array.isArray(d)&&4===d.length)i.uTroikaClipRect.value.fromArray(d);else{const t=100*(this.fontSize||.1);i.uTroikaClipRect.value.set(n[0]-t,n[1]-t,n[2]+t,n[3]+t)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const r=e?this.outlineColor||0:this.color;if(null==r)delete t.color;else{const e=t.hasOwnProperty("color")?t.color:t.color=new n.Color;r===e._input&&"object"!==typeof r||e.set(e._input=r)}let o=this.orientation||pt;if(o!==t._orientation){let e=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let n=o!==pt&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(n){let[,t,i,s,r]=n;ct.set(0,0,0)[i]="-"===t?1:-1,lt.set(0,0,0)[r]="-"===s?-1:1,At.lookAt(dt,ct.cross(lt),lt),e.setFromMatrix4(At)}else e.identity();t._orientation=o}}_parsePercent(t){if("string"===typeof t){let e=t.match(/^(-?[\d.]+)%$/),i=e?parseFloat(e[1]):NaN;t=(isNaN(i)?0:i/100)*this.fontSize}return t}localPositionToTextCoords(t,e=new n.Vector2){e.copy(t);const i=this.curveRadius;return i&&(e.x=Math.atan2(t.x,Math.abs(i)-Math.abs(t.z))*Math.abs(i)),e}worldPositionToTextCoords(t,e=new n.Vector2){return ct.copy(t),this.localPositionToTextCoords(this.worldToLocal(ct),e)}raycast(t,e){const{textRenderInfo:i,curveRadius:n}=this;if(i){const s=i.blockBounds,r=n?mt():gt(),o=r.geometry,{position:a,uv:h}=o.attributes;for(let t=0;t<h.count;t++){let e=s[0]+h.getX(t)*(s[2]-s[0]);const i=s[1]+h.getY(t)*(s[3]-s[1]);let r=0;n&&(r=n-Math.cos(e/n)*n,e=Math.sin(e/n)*n),a.setXYZ(t,e,i,r)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,r.matrixWorld=this.matrixWorld,r.material.side=this.material.side,ut.length=0,r.raycast(t,ut);for(let t=0;t<ut.length;t++)ut[t].object=this,e.push(ut[t])}}copy(t){const e=this.geometry;return super.copy(t),this.geometry=e,Et.forEach((e=>{this[e]=t[e]})),this}clone(){return(new this.constructor).copy(this)}}Bt.forEach((t=>{const e="_private_"+t;Object.defineProperty(yt.prototype,t,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})})),new n.Box3,new n.Color,new WeakMap,new WeakMap},pVCM:(t,e,i)=>{"use strict";i.d(e,{A:()=>j});const n=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288});function s(t){return t.isPerspectiveCamera}function r(t){return t.isOrthographicCamera}const o=2*Math.PI,a=Math.PI/2,h=Math.PI/180;function A(t,e,i){return Math.max(e,Math.min(i,t))}function c(t,e=1e-5){return Math.abs(t)<e}function l(t,e,i=1e-5){return c(t-e,i)}function u(t,e){return Math.round(t/e)*e}function d(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function p(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function f(t,e,i,n,s=1/0,r){const o=2/(n=Math.max(1e-4,n)),a=o*r,h=1/(1+a+.48*a*a+.235*a*a*a);let c=t-e;const l=e,u=s*n;c=A(c,-u,u),e=t-c;const d=(i.value+o*c)*r;i.value=(i.value-o*d)*h;let p=e+(c+d)*h;return l-t>0===p>l&&(p=l,i.value=(p-l)/r),p}function g(t,e,i,n,s=1/0,r,o){const a=2/(n=Math.max(1e-4,n)),h=a*r,A=1/(1+h+.48*h*h+.235*h*h*h);let c=e.x,l=e.y,u=e.z,d=t.x-c,p=t.y-l,f=t.z-u;const g=c,m=l,C=u,v=s*n,B=d*d+p*p+f*f;if(B>v*v){const t=Math.sqrt(B);d=d/t*v,p=p/t*v,f=f/t*v}c=t.x-d,l=t.y-p,u=t.z-f;const E=(i.x+a*d)*r,y=(i.y+a*p)*r,I=(i.z+a*f)*r;i.x=(i.x-a*E)*A,i.y=(i.y-a*y)*A,i.z=(i.z-a*I)*A,o.x=c+(d+E)*A,o.y=l+(p+y)*A,o.z=u+(f+I)*A;const _=g-t.x,w=m-t.y,b=C-t.z;return _*(o.x-g)+w*(o.y-m)+b*(o.z-C)>0&&(o.x=g,o.y=m,o.z=C,i.x=(o.x-g)/r,i.y=(o.y-m)/r,i.z=(o.z-C)/r),o}function m(t,e){e.set(0,0),t.forEach((t=>{e.x+=t.clientX,e.y+=t.clientY})),e.x/=t.length,e.y/=t.length}function C(t,e){return!!r(t)}class v{constructor(){this._listeners={}}addEventListener(t,e){const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}removeAllEventListeners(t){t?Array.isArray(this._listeners[t])&&(this._listeners[t].length=0):this._listeners={}}dispatchEvent(t){const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t)}}}var B;const E=1/8,y=/Mac/.test(null===(B=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===B?void 0:B.platform);let I,_,w,b,x,S,M,Q,D,T,F,R,P,U,O,G,k,L,N,H,z,V,J;class j extends v{static install(t){I=t.THREE,_=Object.freeze(new I.Vector3(0,0,0)),w=Object.freeze(new I.Vector3(0,1,0)),b=Object.freeze(new I.Vector3(0,0,1)),x=new I.Vector2,S=new I.Vector3,M=new I.Vector3,Q=new I.Vector3,D=new I.Vector3,T=new I.Vector3,F=new I.Vector3,R=new I.Vector3,P=new I.Vector3,U=new I.Vector3,O=new I.Spherical,G=new I.Spherical,k=new I.Box3,L=new I.Box3,N=new I.Sphere,H=new I.Quaternion,z=new I.Quaternion,V=new I.Matrix4,J=new I.Raycaster}static get ACTION(){return n}set verticalDragToForward(t){}constructor(t,e){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=n.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=0,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new I.Vector3,this._focalOffsetVelocity=new I.Vector3,this._zoomVelocity={value:0},this._truckInternal=(t,e,i,n)=>{let o,a;if(s(this._camera)){const i=S.copy(this._camera.position).sub(this._target),n=this._camera.getEffectiveFOV()*h,s=i.length()*Math.tan(.5*n);o=this.truckSpeed*t*s/this._elementRect.height,a=this.truckSpeed*e*s/this._elementRect.height}else{if(!r(this._camera))return;{const i=this._camera;o=this.truckSpeed*t*(i.right-i.left)/i.zoom/this._elementRect.width,a=this.truckSpeed*e*(i.top-i.bottom)/i.zoom/this._elementRect.height}}n?(i?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(o,0,!0),this.forward(-a,!0)):i?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y+a,this._focalOffsetEnd.z,!0):this.truck(o,a,!0)},this._rotateInternal=(t,e)=>{const i=o*this.azimuthRotateSpeed*t/this._elementRect.height,n=o*this.polarRotateSpeed*e/this._elementRect.height;this.rotate(i,n,!0)},this._dollyInternal=(t,e,i)=>{const n=Math.pow(.95,-t*this.dollySpeed),s=this._sphericalEnd.radius,r=this._sphericalEnd.radius*n,o=A(r,this.minDistance,this.maxDistance),a=o-r;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(r,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(a,!0),this._dollyToNoClamp(o,!0)):this._dollyToNoClamp(o,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?r:o)-s,this._dollyControlCoord.set(e,i)),this._lastDollyDirection=Math.sign(-t)},this._zoomInternal=(t,e,i)=>{const n=Math.pow(.95,t*this.dollySpeed),s=this._zoom,r=this._zoom*n;this.zoomTo(r,!0),this.dollyToCursor&&(this._changedZoom+=r-s,this._dollyControlCoord.set(e,i))},this._camera=t,this._yAxisUpSpace=(new I.Quaternion).setFromUnitVectors(this._camera.up,w),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=n.NONE,this._target=new I.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new I.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new I.Spherical).setFromVector3(S.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new I.Vector3,new I.Vector3,new I.Vector3,new I.Vector3],this._updateNearPlaneCorners(),this._boundary=new I.Box3(new I.Vector3(-1/0,-1/0,-1/0),new I.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new I.Vector2,this.mouseButtons={left:n.ROTATE,middle:n.DOLLY,right:n.TRUCK,wheel:s(this._camera)?n.DOLLY:r(this._camera)?n.ZOOM:n.NONE},this.touches={one:n.TOUCH_ROTATE,two:s(this._camera)?n.TOUCH_DOLLY_TRUCK:r(this._camera)?n.TOUCH_ZOOM_TRUCK:n.NONE,three:n.TOUCH_TRUCK};const i=new I.Vector2,a=new I.Vector2,c=new I.Vector2,l=t=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const e=this._domElement.getBoundingClientRect(),i=t.clientX/e.width,n=t.clientY/e.height;if(i<this._interactiveArea.left||i>this._interactiveArea.right||n<this._interactiveArea.top||n>this._interactiveArea.bottom)return}const e="mouse"!==t.pointerType?null:1===(1&t.buttons)?1:4===(4&t.buttons)?4:2===(2&t.buttons)?2:null;if(null!==e){const t=this._findPointerByMouseButton(e);t&&this._disposePointer(t)}if(1===(1&t.buttons)&&this._lockedPointer)return;const i={pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0,mouseButton:e};this._activePointers.push(i),this._domElement.ownerDocument.removeEventListener("pointermove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.ownerDocument.addEventListener("pointermove",u,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",d),this._isDragging=!0,C(t)},u=t=>{t.cancelable&&t.preventDefault();const e=t.pointerId,i=this._lockedPointer||this._findPointerById(e);if(i){if(i.clientX=t.clientX,i.clientY=t.clientY,i.deltaX=t.movementX,i.deltaY=t.movementY,this._state=0,"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&1===(1&t.buttons))&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&4===(4&t.buttons)&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&2===(2&t.buttons)&&(this._state=this._state|this.mouseButtons.right);v()}},d=t=>{const e=this._findPointerById(t.pointerId);if(!e||e!==this._lockedPointer){if(e&&this._disposePointer(e),"touch"===t.pointerType)switch(this._activePointers.length){case 0:this._state=n.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=n.NONE;B()}};let p=-1;const f=t=>{if(!this._domElement)return;if(!this._enabled||this.mouseButtons.wheel===n.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const e=this._domElement.getBoundingClientRect(),i=t.clientX/e.width,n=t.clientY/e.height;if(i<this._interactiveArea.left||i>this._interactiveArea.right||n<this._interactiveArea.top||n>this._interactiveArea.bottom)return}if(t.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===n.ROTATE||this.mouseButtons.wheel===n.TRUCK){const t=performance.now();p-t<1e3&&this._getClientRect(this._elementRect),p=t}const e=y?-1:-3,i=1===t.deltaMode||t.ctrlKey?t.deltaY/e:t.deltaY/(10*e),s=this.dollyToCursor?(t.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,r=this.dollyToCursor?(t.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case n.ROTATE:this._rotateInternal(t.deltaX,t.deltaY),this._isUserControllingRotate=!0;break;case n.TRUCK:this._truckInternal(t.deltaX,t.deltaY,!1,!1),this._isUserControllingTruck=!0;break;case n.SCREEN_PAN:this._truckInternal(t.deltaX,t.deltaY,!1,!0),this._isUserControllingTruck=!0;break;case n.OFFSET:this._truckInternal(t.deltaX,t.deltaY,!0,!1),this._isUserControllingOffset=!0;break;case n.DOLLY:this._dollyInternal(-i,s,r),this._isUserControllingDolly=!0;break;case n.ZOOM:this._zoomInternal(-i,s,r),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},g=t=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===j.ACTION.NONE){const e=t instanceof PointerEvent?t.pointerId:0,i=this._findPointerById(e);return i&&this._disposePointer(i),this._domElement.ownerDocument.removeEventListener("pointermove",u,{passive:!1}),void this._domElement.ownerDocument.removeEventListener("pointerup",d)}t.preventDefault()}},C=t=>{if(this._enabled){if(m(this._activePointers,x),this._getClientRect(this._elementRect),i.copy(x),a.copy(x),this._activePointers.length>=2){const t=x.x-this._activePointers[1].clientX,e=x.y-this._activePointers[1].clientY,i=Math.sqrt(t*t+e*e);c.set(0,i);const n=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),s=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);a.set(n,s)}if(this._state=0,t)if("pointerType"in t&&"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._lockedPointer||1!==(1&t.buttons)||(this._state=this._state|this.mouseButtons.left),4===(4&t.buttons)&&(this._state=this._state|this.mouseButtons.middle),2===(2&t.buttons)&&(this._state=this._state|this.mouseButtons.right);else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);(this._state&n.ROTATE)!==n.ROTATE&&(this._state&n.TOUCH_ROTATE)!==n.TOUCH_ROTATE&&(this._state&n.TOUCH_DOLLY_ROTATE)!==n.TOUCH_DOLLY_ROTATE&&(this._state&n.TOUCH_ZOOM_ROTATE)!==n.TOUCH_ZOOM_ROTATE||(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),(this._state&n.TRUCK)!==n.TRUCK&&(this._state&n.SCREEN_PAN)!==n.SCREEN_PAN&&(this._state&n.TOUCH_TRUCK)!==n.TOUCH_TRUCK&&(this._state&n.TOUCH_SCREEN_PAN)!==n.TOUCH_SCREEN_PAN&&(this._state&n.TOUCH_DOLLY_TRUCK)!==n.TOUCH_DOLLY_TRUCK&&(this._state&n.TOUCH_DOLLY_SCREEN_PAN)!==n.TOUCH_DOLLY_SCREEN_PAN&&(this._state&n.TOUCH_ZOOM_TRUCK)!==n.TOUCH_ZOOM_TRUCK&&(this._state&n.TOUCH_ZOOM_SCREEN_PAN)!==n.TOUCH_DOLLY_SCREEN_PAN||(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),(this._state&n.DOLLY)!==n.DOLLY&&(this._state&n.TOUCH_DOLLY)!==n.TOUCH_DOLLY&&(this._state&n.TOUCH_DOLLY_TRUCK)!==n.TOUCH_DOLLY_TRUCK&&(this._state&n.TOUCH_DOLLY_SCREEN_PAN)!==n.TOUCH_DOLLY_SCREEN_PAN&&(this._state&n.TOUCH_DOLLY_OFFSET)!==n.TOUCH_DOLLY_OFFSET&&(this._state&n.TOUCH_DOLLY_ROTATE)!==n.TOUCH_DOLLY_ROTATE||(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),(this._state&n.ZOOM)!==n.ZOOM&&(this._state&n.TOUCH_ZOOM)!==n.TOUCH_ZOOM&&(this._state&n.TOUCH_ZOOM_TRUCK)!==n.TOUCH_ZOOM_TRUCK&&(this._state&n.TOUCH_ZOOM_SCREEN_PAN)!==n.TOUCH_ZOOM_SCREEN_PAN&&(this._state&n.TOUCH_ZOOM_OFFSET)!==n.TOUCH_ZOOM_OFFSET&&(this._state&n.TOUCH_ZOOM_ROTATE)!==n.TOUCH_ZOOM_ROTATE||(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),(this._state&n.OFFSET)!==n.OFFSET&&(this._state&n.TOUCH_OFFSET)!==n.TOUCH_OFFSET&&(this._state&n.TOUCH_DOLLY_OFFSET)!==n.TOUCH_DOLLY_OFFSET&&(this._state&n.TOUCH_ZOOM_OFFSET)!==n.TOUCH_ZOOM_OFFSET||(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})}},v=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,m(this._activePointers,x);const t=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,e=t?-t.deltaX:a.x-x.x,s=t?-t.deltaY:a.y-x.y;if(a.copy(x),(this._state&n.ROTATE)!==n.ROTATE&&(this._state&n.TOUCH_ROTATE)!==n.TOUCH_ROTATE&&(this._state&n.TOUCH_DOLLY_ROTATE)!==n.TOUCH_DOLLY_ROTATE&&(this._state&n.TOUCH_ZOOM_ROTATE)!==n.TOUCH_ZOOM_ROTATE||(this._rotateInternal(e,s),this._isUserControllingRotate=!0),(this._state&n.DOLLY)===n.DOLLY||(this._state&n.ZOOM)===n.ZOOM){const t=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,e=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,r=this.dollyDragInverted?-1:1;(this._state&n.DOLLY)===n.DOLLY?(this._dollyInternal(r*s*E,t,e),this._isUserControllingDolly=!0):(this._zoomInternal(r*s*E,t,e),this._isUserControllingZoom=!0)}if((this._state&n.TOUCH_DOLLY)===n.TOUCH_DOLLY||(this._state&n.TOUCH_ZOOM)===n.TOUCH_ZOOM||(this._state&n.TOUCH_DOLLY_TRUCK)===n.TOUCH_DOLLY_TRUCK||(this._state&n.TOUCH_ZOOM_TRUCK)===n.TOUCH_ZOOM_TRUCK||(this._state&n.TOUCH_DOLLY_SCREEN_PAN)===n.TOUCH_DOLLY_SCREEN_PAN||(this._state&n.TOUCH_ZOOM_SCREEN_PAN)===n.TOUCH_ZOOM_SCREEN_PAN||(this._state&n.TOUCH_DOLLY_OFFSET)===n.TOUCH_DOLLY_OFFSET||(this._state&n.TOUCH_ZOOM_OFFSET)===n.TOUCH_ZOOM_OFFSET||(this._state&n.TOUCH_DOLLY_ROTATE)===n.TOUCH_DOLLY_ROTATE||(this._state&n.TOUCH_ZOOM_ROTATE)===n.TOUCH_ZOOM_ROTATE){const t=x.x-this._activePointers[1].clientX,e=x.y-this._activePointers[1].clientY,i=Math.sqrt(t*t+e*e),s=c.y-i;c.set(0,i);const r=this.dollyToCursor?(a.x-this._elementRect.x)/this._elementRect.width*2-1:0,o=this.dollyToCursor?(a.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&n.TOUCH_DOLLY)===n.TOUCH_DOLLY||(this._state&n.TOUCH_DOLLY_ROTATE)===n.TOUCH_DOLLY_ROTATE||(this._state&n.TOUCH_DOLLY_TRUCK)===n.TOUCH_DOLLY_TRUCK||(this._state&n.TOUCH_DOLLY_SCREEN_PAN)===n.TOUCH_DOLLY_SCREEN_PAN||(this._state&n.TOUCH_DOLLY_OFFSET)===n.TOUCH_DOLLY_OFFSET?(this._dollyInternal(s*E,r,o),this._isUserControllingDolly=!0):(this._zoomInternal(s*E,r,o),this._isUserControllingZoom=!0)}(this._state&n.TRUCK)!==n.TRUCK&&(this._state&n.TOUCH_TRUCK)!==n.TOUCH_TRUCK&&(this._state&n.TOUCH_DOLLY_TRUCK)!==n.TOUCH_DOLLY_TRUCK&&(this._state&n.TOUCH_ZOOM_TRUCK)!==n.TOUCH_ZOOM_TRUCK||(this._truckInternal(e,s,!1,!1),this._isUserControllingTruck=!0),(this._state&n.SCREEN_PAN)!==n.SCREEN_PAN&&(this._state&n.TOUCH_SCREEN_PAN)!==n.TOUCH_SCREEN_PAN&&(this._state&n.TOUCH_DOLLY_SCREEN_PAN)!==n.TOUCH_DOLLY_SCREEN_PAN&&(this._state&n.TOUCH_ZOOM_SCREEN_PAN)!==n.TOUCH_ZOOM_SCREEN_PAN||(this._truckInternal(e,s,!1,!0),this._isUserControllingTruck=!0),(this._state&n.OFFSET)!==n.OFFSET&&(this._state&n.TOUCH_OFFSET)!==n.TOUCH_OFFSET&&(this._state&n.TOUCH_DOLLY_OFFSET)!==n.TOUCH_DOLLY_OFFSET&&(this._state&n.TOUCH_ZOOM_OFFSET)!==n.TOUCH_ZOOM_OFFSET||(this._truckInternal(e,s,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},B=()=>{m(this._activePointers,x),a.copy(x),this._dragNeedsUpdate=!1,(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",d),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",_),this._domElement.ownerDocument.addEventListener("pointerlockerror",b),this._domElement.ownerDocument.addEventListener("pointermove",u,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",d),C())},this.unlockPointer=()=>{var t,e,i;null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),null===(t=this._domElement)||void 0===t||t.ownerDocument.exitPointerLock(),null===(e=this._domElement)||void 0===e||e.ownerDocument.removeEventListener("pointerlockchange",_),null===(i=this._domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerlockerror",b),this.cancel()};const _=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},b=()=>{this.unlockPointer()};this._addAllEventListeners=t=>{this._domElement=t,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",l),this._domElement.addEventListener("pointercancel",d),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",l),this._domElement.removeEventListener("pointercancel",d),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",d),this._domElement.ownerDocument.removeEventListener("pointerlockchange",_),this._domElement.ownerDocument.removeEventListener("pointerlockerror",b))},this.cancel=()=>{this._state!==n.NONE&&(this._state=n.NONE,this._activePointers.length=0,B())},e&&this.connect(e),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=A(t.width,0,1),this._interactiveArea.height=A(t.height,0,1),this._interactiveArea.x=A(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=A(t.y,0,1-this._interactiveArea.height)}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}rotate(t,e,i=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,i)}rotateAzimuthTo(t,e=!1){return this.rotateTo(t,this._sphericalEnd.phi,e)}rotatePolarTo(t,e=!1){return this.rotateTo(this._sphericalEnd.theta,t,e)}rotateTo(t,e,i=!1){this._isUserControllingRotate=!1;const n=A(t,this.minAzimuthAngle,this.maxAzimuthAngle),s=A(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=n,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const r=!i||l(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&l(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(r)}dolly(t,e=!1){return this.dollyTo(this._sphericalEnd.radius-t,e)}dollyTo(t,e=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=0,this._changedDolly=0,this._dollyToNoClamp(A(t,this.minDistance,this.maxDistance),e)}_dollyToNoClamp(t,e=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const e=this._collisionTest(),n=l(e,this._spherical.radius);if(!(i>t)&&n)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,e)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);const n=!e||l(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(n)}dollyInFixed(t,e=!1){this._targetEnd.add(this._getCameraDirection(D).multiplyScalar(t)),e||this._target.copy(this._targetEnd);const i=!e||l(this._target.x,this._targetEnd.x,this.restThreshold)&&l(this._target.y,this._targetEnd.y,this.restThreshold)&&l(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(t,e=!1){return this.zoomTo(this._zoomEnd+t,e)}zoomTo(t,e=!1){this._isUserControllingZoom=!1,this._zoomEnd=A(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);const i=!e||l(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(t,e,i=!1){return this.truck(t,e,i)}truck(t,e,i=!1){this._camera.updateMatrix(),T.setFromMatrixColumn(this._camera.matrix,0),F.setFromMatrixColumn(this._camera.matrix,1),T.multiplyScalar(t),F.multiplyScalar(-e);const n=S.copy(T).add(F),s=M.copy(this._targetEnd).add(n);return this.moveTo(s.x,s.y,s.z,i)}forward(t,e=!1){S.setFromMatrixColumn(this._camera.matrix,0),S.crossVectors(this._camera.up,S),S.multiplyScalar(t);const i=M.copy(this._targetEnd).add(S);return this.moveTo(i.x,i.y,i.z,e)}elevate(t,e=!1){return S.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+S.x,this._targetEnd.y+S.y,this._targetEnd.z+S.z,e)}moveTo(t,e,i,n=!1){this._isUserControllingTruck=!1;const s=S.set(t,e,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,n||this._target.copy(this._targetEnd);const r=!n||l(this._target.x,this._targetEnd.x,this.restThreshold)&&l(this._target.y,this._targetEnd.y,this.restThreshold)&&l(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}lookInDirectionOf(t,e,i,n=!1){const s=S.set(t,e,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(s.x,s.y,s.z,n)}fitToBox(t,e,{cover:i=!1,paddingLeft:n=0,paddingRight:o=0,paddingBottom:h=0,paddingTop:A=0}={}){const c=[],d=t.isBox3?k.copy(t):k.setFromObject(t);d.isEmpty()&&Promise.resolve();const p=u(this._sphericalEnd.theta,a),f=u(this._sphericalEnd.phi,a);c.push(this.rotateTo(p,f,e));const g=S.setFromSpherical(this._sphericalEnd).normalize(),m=H.setFromUnitVectors(g,b),C=l(Math.abs(g.y),1);C&&m.multiply(z.setFromAxisAngle(w,p)),m.multiply(this._yAxisUpSpaceInverse);const v=L.makeEmpty();M.copy(d.min).applyQuaternion(m),v.expandByPoint(M),M.copy(d.min).setX(d.max.x).applyQuaternion(m),v.expandByPoint(M),M.copy(d.min).setY(d.max.y).applyQuaternion(m),v.expandByPoint(M),M.copy(d.max).setZ(d.min.z).applyQuaternion(m),v.expandByPoint(M),M.copy(d.min).setZ(d.max.z).applyQuaternion(m),v.expandByPoint(M),M.copy(d.max).setY(d.min.y).applyQuaternion(m),v.expandByPoint(M),M.copy(d.max).setX(d.min.x).applyQuaternion(m),v.expandByPoint(M),M.copy(d.max).applyQuaternion(m),v.expandByPoint(M),v.min.x-=n,v.min.y-=h,v.max.x+=o,v.max.y+=A,m.setFromUnitVectors(b,g),C&&m.premultiply(z.invert()),m.premultiply(this._yAxisUpSpace);const B=v.getSize(S),E=v.getCenter(M).applyQuaternion(m);if(s(this._camera)){const t=this.getDistanceToFitBox(B.x,B.y,B.z,i);c.push(this.moveTo(E.x,E.y,E.z,e)),c.push(this.dollyTo(t,e)),c.push(this.setFocalOffset(0,0,0,e))}else if(r(this._camera)){const t=this._camera,n=t.right-t.left,s=t.top-t.bottom,r=i?Math.max(n/B.x,s/B.y):Math.min(n/B.x,s/B.y);c.push(this.moveTo(E.x,E.y,E.z,e)),c.push(this.zoomTo(r,e)),c.push(this.setFocalOffset(0,0,0,e))}return Promise.all(c)}fitToSphere(t,e){const i=[],n="isObject3D"in t?j.createBoundingSphere(t,N):N.copy(t);if(i.push(this.moveTo(n.center.x,n.center.y,n.center.z,e)),s(this._camera)){const t=this.getDistanceToFitSphere(n.radius);i.push(this.dollyTo(t,e))}else if(r(this._camera)){const t=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,r=2*n.radius,o=Math.min(t/r,s/r);i.push(this.zoomTo(o,e))}return i.push(this.setFocalOffset(0,0,0,e)),Promise.all(i)}setLookAt(t,e,i,n,s,r,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=0,this._changedDolly=0;const a=M.set(n,s,r),h=S.set(t,e,i);this._targetEnd.copy(a),this._sphericalEnd.setFromVector3(h.sub(a).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const A=!o||l(this._target.x,this._targetEnd.x,this.restThreshold)&&l(this._target.y,this._targetEnd.y,this.restThreshold)&&l(this._target.z,this._targetEnd.z,this.restThreshold)&&l(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&l(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&l(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(A)}lerpLookAt(t,e,i,n,s,r,o,a,h,A,c,u,d,p=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=0,this._changedDolly=0;const f=S.set(n,s,r),g=M.set(t,e,i);O.setFromVector3(g.sub(f).applyQuaternion(this._yAxisUpSpace));const m=Q.set(A,c,u),C=M.set(o,a,h);G.setFromVector3(C.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(f.lerp(m,d));const v=G.theta-O.theta,B=G.phi-O.phi,E=G.radius-O.radius;this._sphericalEnd.set(O.radius+E*d,O.phi+B*d,O.theta+v*d),this.normalizeRotations(),this._needsUpdate=!0,p||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const y=!p||l(this._target.x,this._targetEnd.x,this.restThreshold)&&l(this._target.y,this._targetEnd.y,this.restThreshold)&&l(this._target.z,this._targetEnd.z,this.restThreshold)&&l(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&l(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&l(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(y)}setPosition(t,e,i,n=!1){return this.setLookAt(t,e,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,n)}setTarget(t,e,i,n=!1){const s=this.getPosition(S),r=this.setLookAt(s.x,s.y,s.z,t,e,i,n);return this._sphericalEnd.phi=A(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),r}setFocalOffset(t,e,i,n=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,e,i),this._needsUpdate=!0,n||this._focalOffset.copy(this._focalOffsetEnd);const s=!n||l(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&l(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&l(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(t,e,i){this._camera.updateMatrixWorld(),T.setFromMatrixColumn(this._camera.matrixWorldInverse,0),F.setFromMatrixColumn(this._camera.matrixWorldInverse,1),R.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const n=S.set(t,e,i),s=n.distanceTo(this._camera.position),r=n.sub(this._camera.position);T.multiplyScalar(r.x),F.multiplyScalar(r.y),R.multiplyScalar(r.z),S.copy(T).add(F).add(R),S.z=S.z+s,this.dollyTo(s,!1),this.setFocalOffset(-S.x,S.y,-S.z,!1),this.moveTo(t,e,i,!1)}setBoundary(t){if(!t)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,e,i,n){null!==t?(this._viewport=this._viewport||new I.Vector4,"number"===typeof t?this._viewport.set(t,e,i,n):this._viewport.copy(t)):this._viewport=null}getDistanceToFitBox(t,e,i,n=!1){if(C(this._camera))return this._spherical.radius;const s=t/e,r=this._camera.getEffectiveFOV()*h,o=this._camera.aspect;return.5*((n?s>o:s<o)?e:t/o)/Math.tan(.5*r)+.5*i}getDistanceToFitSphere(t){if(C(this._camera))return this._spherical.radius;const e=this._camera.getEffectiveFOV()*h,i=2*Math.atan(Math.tan(.5*e)*this._camera.aspect),n=1<this._camera.aspect?e:i;return t/Math.sin(.5*n)}getTarget(t,e=!0){return(t&&t.isVector3?t:new I.Vector3).copy(e?this._targetEnd:this._target)}getPosition(t,e=!0){return(t&&t.isVector3?t:new I.Vector3).setFromSpherical(e?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(e?this._targetEnd:this._target)}getSpherical(t,e=!0){return(t||new I.Spherical).copy(e?this._sphericalEnd:this._spherical)}getFocalOffset(t,e=!0){return(t&&t.isVector3?t:new I.Vector3).copy(e?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%o,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=o),this._spherical.theta+=o*Math.round((this._sphericalEnd.theta-this._spherical.theta)/o)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(t=!1){if(!l(this._camera.up.x,this._cameraUp0.x)||!l(this._camera.up.y,this._cameraUp0.y)||!l(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const t=this.getPosition(S);this.updateCameraUp(),this.setPosition(t.x,t.y,t.z)}const e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(e)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,w),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=S.subVectors(this._target,this._camera.position).normalize(),e=M.crossVectors(t,this._camera.up);this._camera.up.crossVectors(e,t).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(S);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(t){const e=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,n=this._sphericalEnd.radius-this._spherical.radius,o=P.subVectors(this._targetEnd,this._target),a=U.subVectors(this._focalOffsetEnd,this._focalOffset),A=this._zoomEnd-this._zoom;if(c(e))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const e=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=f(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,e,1/0,t),this._needsUpdate=!0}if(c(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const e=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=f(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,e,1/0,t),this._needsUpdate=!0}if(c(n))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const e=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=f(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,e,this.maxSpeed,t),this._needsUpdate=!0}if(c(o.x)&&c(o.y)&&c(o.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const e=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;g(this._target,this._targetEnd,this._targetVelocity,e,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(c(a.x)&&c(a.y)&&c(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const e=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;g(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,e,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(c(A))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const e=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=f(this._zoom,this._zoomEnd,this._zoomVelocity,e,1/0,t)}if(this.dollyToCursor)if(s(this._camera)&&0!==this._changedDolly){const t=this._spherical.radius-this._lastDistance,e=this._camera,i=this._getCameraDirection(D),n=S.copy(i).cross(e.up).normalize();0===n.lengthSq()&&(n.x=1);const s=M.crossVectors(n,i),r=this._sphericalEnd.radius*Math.tan(e.getEffectiveFOV()*h*.5),o=(this._sphericalEnd.radius-t-this._sphericalEnd.radius)/this._sphericalEnd.radius,a=Q.copy(this._targetEnd).add(n.multiplyScalar(this._dollyControlCoord.x*r*e.aspect)).add(s.multiplyScalar(this._dollyControlCoord.y*r)),A=S.copy(this._targetEnd).lerp(a,o),l=1===this._lastDollyDirection&&this._spherical.radius<=this.minDistance,u=-1===this._lastDollyDirection&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(l||u)){this._sphericalEnd.radius-=t,this._spherical.radius-=t;const e=M.copy(i).multiplyScalar(-t);A.add(e)}this._boundary.clampPoint(A,A);const d=M.subVectors(A,this._targetEnd);this._targetEnd.copy(A),this._target.add(d),this._changedDolly-=t,c(this._changedDolly)&&(this._changedDolly=0)}else if(r(this._camera)&&0!==this._changedZoom){const t=this._zoom-this._lastZoom,e=this._camera,i=S.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(e.near+e.far)/(e.near-e.far)).unproject(e),n=M.set(0,0,-1).applyQuaternion(e.quaternion),s=Q.copy(i).add(n.multiplyScalar(-i.dot(e.up))),r=-(this._zoom-t-this._zoom)/this._zoom,o=this._getCameraDirection(D),a=this._targetEnd.dot(o),h=S.copy(this._targetEnd).lerp(s,r),A=h.dot(o),l=o.multiplyScalar(A-a);h.sub(l),this._boundary.clampPoint(h,h);const u=M.subVectors(h,this._targetEnd);this._targetEnd.copy(h),this._target.add(u),this._changedZoom-=t,c(this._changedZoom)&&(this._changedZoom=0)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!c(this._focalOffset.x)||!c(this._focalOffset.y)||!c(this._focalOffset.z))&&(T.setFromMatrixColumn(this._camera.matrix,0),F.setFromMatrixColumn(this._camera.matrix,1),R.setFromMatrixColumn(this._camera.matrix,2),T.multiplyScalar(this._focalOffset.x),F.multiplyScalar(-this._focalOffset.y),R.multiplyScalar(this._focalOffset.z),S.copy(T).add(F).add(R),this._camera.position.add(S),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),S.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),c(e,this.restThreshold)&&c(i,this.restThreshold)&&c(n,this.restThreshold)&&c(o.x,this.restThreshold)&&c(o.y,this.restThreshold)&&c(o.z,this.restThreshold)&&c(a.x,this.restThreshold)&&c(a.y,this.restThreshold)&&c(a.z,this.restThreshold)&&c(A,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:d(this.maxDistance),minZoom:this.minZoom,maxZoom:d(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:d(this.maxPolarAngle),minAzimuthAngle:d(this.minAzimuthAngle),maxAzimuthAngle:d(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:S.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,e=!1){const i=JSON.parse(t);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=p(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=p(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=p(i.maxPolarAngle),this.minAzimuthAngle=p(i.minAzimuthAngle),this.maxAzimuthAngle=p(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],e),O.setFromVector3(S.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(O.theta,O.phi,e),this.dollyTo(O.radius,e),this.zoomTo(i.zoom,e),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],e),this._needsUpdate=!0}connect(t){this._domElement||(t.setAttribute("data-camera-controls-version","2.10.1"),this._addAllEventListeners(t),this._getClientRect(this._elementRect))}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find((e=>e.pointerId===t))}_findPointerByMouseButton(t){return this._activePointers.find((e=>e.mouseButton===t))}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,e,i){const n=e.lengthSq();if(0===n)return t;const s=M.copy(e).add(t),r=this._boundary.clampPoint(s,Q).sub(s),o=r.lengthSq();if(0===o)return t.add(e);if(o===n)return t;if(0===i)return t.add(e).add(r);{const n=1+i*o/e.dot(r);return t.add(M.copy(e).multiplyScalar(n)).add(r.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(s(this._camera)){const t=this._camera,e=t.near,i=t.getEffectiveFOV()*h,n=Math.tan(.5*i)*e,s=n*t.aspect;this._nearPlaneCorners[0].set(-s,-n,0),this._nearPlaneCorners[1].set(s,-n,0),this._nearPlaneCorners[2].set(s,n,0),this._nearPlaneCorners[3].set(-s,n,0)}else if(r(this._camera)){const t=this._camera,e=1/t.zoom,i=t.left*e,n=t.right*e,s=t.top*e,r=t.bottom*e;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(n,s,0),this._nearPlaneCorners[2].set(n,r,0),this._nearPlaneCorners[3].set(i,r,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1))return t;if(C(this._camera))return t;const e=this._getTargetDirection(D);V.lookAt(_,e,this._camera.up);for(let i=0;i<4;i++){const n=M.copy(this._nearPlaneCorners[i]);n.applyMatrix4(V);const s=Q.addVectors(this._target,n);J.set(s,e),J.far=this._spherical.radius+1;const r=J.intersectObjects(this.colliderMeshes);0!==r.length&&r[0].distance<t&&(t=r[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=e.width,t.height=e.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((t=>{const e=()=>{this.removeEventListener("rest",e),t()};this.addEventListener("rest",e)})))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return 0}set dampingFactor(t){}get draggingDampingFactor(){return 0}set draggingDampingFactor(t){}static createBoundingSphere(t,e=new I.Sphere){const i=e,n=i.center;k.makeEmpty(),t.traverseVisible((t=>{t.isMesh&&k.expandByObject(t)})),k.getCenter(n);let s=0;return t.traverseVisible((t=>{if(!t.isMesh)return;const e=t;if(!e.geometry)return;const i=e.geometry.clone();i.applyMatrix4(e.matrixWorld);const r=i.attributes.position;for(let o=0,a=r.count;o<a;o++)S.fromBufferAttribute(r,o),s=Math.max(s,n.distanceToSquared(S))})),i.radius=Math.sqrt(s),i}}},qMPC:(t,e,i)=>{"use strict";i.d(e,{h:()=>r});var n=Object.defineProperty,s=(t,e,i)=>(((t,e,i)=>{e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!==typeof e?e+"":e,i),i);class r{constructor(t=Math){s(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),s(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),s(this,"p",[]),s(this,"perm",[]),s(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),s(this,"dot",((t,e,i)=>t[0]*e+t[1]*i)),s(this,"dot3",((t,e,i,n)=>t[0]*e+t[1]*i+t[2]*n)),s(this,"dot4",((t,e,i,n,s)=>t[0]*e+t[1]*i+t[2]*n+t[3]*s)),s(this,"noise",((t,e)=>{let i,n,s;const r=(t+e)*(.5*(Math.sqrt(3)-1)),o=Math.floor(t+r),a=Math.floor(e+r),h=(3-Math.sqrt(3))/6,A=(o+a)*h,c=t-(o-A),l=e-(a-A);let u=0,d=1;c>l&&(u=1,d=0);const p=c-u+h,f=l-d+h,g=c-1+2*h,m=l-1+2*h,C=255&o,v=255&a,B=this.perm[C+this.perm[v]]%12,E=this.perm[C+u+this.perm[v+d]]%12,y=this.perm[C+1+this.perm[v+1]]%12;let I=.5-c*c-l*l;I<0?i=0:(I*=I,i=I*I*this.dot(this.grad3[B],c,l));let _=.5-p*p-f*f;_<0?n=0:(_*=_,n=_*_*this.dot(this.grad3[E],p,f));let w=.5-g*g-m*m;return w<0?s=0:(w*=w,s=w*w*this.dot(this.grad3[y],g,m)),70*(i+n+s)})),s(this,"noise3d",((t,e,i)=>{let n,s,r,o;const a=(t+e+i)*(1/3),h=Math.floor(t+a),A=Math.floor(e+a),c=Math.floor(i+a),l=1/6,u=(h+A+c)*l,d=t-(h-u),p=e-(A-u),f=i-(c-u);let g,m,C,v,B,E;d>=p?p>=f?(g=1,m=0,C=0,v=1,B=1,E=0):d>=f?(g=1,m=0,C=0,v=1,B=0,E=1):(g=0,m=0,C=1,v=1,B=0,E=1):p<f?(g=0,m=0,C=1,v=0,B=1,E=1):d<f?(g=0,m=1,C=0,v=0,B=1,E=1):(g=0,m=1,C=0,v=1,B=1,E=0);const y=d-g+l,I=p-m+l,_=f-C+l,w=d-v+2*l,b=p-B+2*l,x=f-E+2*l,S=d-1+.5,M=p-1+.5,Q=f-1+.5,D=255&h,T=255&A,F=255&c,R=this.perm[D+this.perm[T+this.perm[F]]]%12,P=this.perm[D+g+this.perm[T+m+this.perm[F+C]]]%12,U=this.perm[D+v+this.perm[T+B+this.perm[F+E]]]%12,O=this.perm[D+1+this.perm[T+1+this.perm[F+1]]]%12;let G=.6-d*d-p*p-f*f;G<0?n=0:(G*=G,n=G*G*this.dot3(this.grad3[R],d,p,f));let k=.6-y*y-I*I-_*_;k<0?s=0:(k*=k,s=k*k*this.dot3(this.grad3[P],y,I,_));let L=.6-w*w-b*b-x*x;L<0?r=0:(L*=L,r=L*L*this.dot3(this.grad3[U],w,b,x));let N=.6-S*S-M*M-Q*Q;return N<0?o=0:(N*=N,o=N*N*this.dot3(this.grad3[O],S,M,Q)),32*(n+s+r+o)})),s(this,"noise4d",((t,e,i,n)=>{const s=this.grad4,r=this.simplex,o=this.perm,a=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;let A,c,l,u,d;const p=(t+e+i+n)*a,f=Math.floor(t+p),g=Math.floor(e+p),m=Math.floor(i+p),C=Math.floor(n+p),v=(f+g+m+C)*h,B=t-(f-v),E=e-(g-v),y=i-(m-v),I=n-(C-v),_=(B>E?32:0)+(B>y?16:0)+(E>y?8:0)+(B>I?4:0)+(E>I?2:0)+(y>I?1:0);let w,b,x,S,M,Q,D,T,F,R,P,U;w=r[_][0]>=3?1:0,b=r[_][1]>=3?1:0,x=r[_][2]>=3?1:0,S=r[_][3]>=3?1:0,M=r[_][0]>=2?1:0,Q=r[_][1]>=2?1:0,D=r[_][2]>=2?1:0,T=r[_][3]>=2?1:0,F=r[_][0]>=1?1:0,R=r[_][1]>=1?1:0,P=r[_][2]>=1?1:0,U=r[_][3]>=1?1:0;const O=B-w+h,G=E-b+h,k=y-x+h,L=I-S+h,N=B-M+2*h,H=E-Q+2*h,z=y-D+2*h,V=I-T+2*h,J=B-F+3*h,j=E-R+3*h,Y=y-P+3*h,K=I-U+3*h,q=B-1+4*h,X=E-1+4*h,W=y-1+4*h,Z=I-1+4*h,$=255&f,tt=255&g,et=255&m,it=255&C,nt=o[$+o[tt+o[et+o[it]]]]%32,st=o[$+w+o[tt+b+o[et+x+o[it+S]]]]%32,rt=o[$+M+o[tt+Q+o[et+D+o[it+T]]]]%32,ot=o[$+F+o[tt+R+o[et+P+o[it+U]]]]%32,at=o[$+1+o[tt+1+o[et+1+o[it+1]]]]%32;let ht=.6-B*B-E*E-y*y-I*I;ht<0?A=0:(ht*=ht,A=ht*ht*this.dot4(s[nt],B,E,y,I));let At=.6-O*O-G*G-k*k-L*L;At<0?c=0:(At*=At,c=At*At*this.dot4(s[st],O,G,k,L));let ct=.6-N*N-H*H-z*z-V*V;ct<0?l=0:(ct*=ct,l=ct*ct*this.dot4(s[rt],N,H,z,V));let lt=.6-J*J-j*j-Y*Y-K*K;lt<0?u=0:(lt*=lt,u=lt*lt*this.dot4(s[ot],J,j,Y,K));let ut=.6-q*q-X*X-W*W-Z*Z;return ut<0?d=0:(ut*=ut,d=ut*ut*this.dot4(s[at],q,X,W,Z)),27*(A+c+l+u+d)}));for(let e=0;e<256;e++)this.p[e]=Math.floor(256*t.random());for(let e=0;e<512;e++)this.perm[e]=this.p[255&e]}}},tImg:(t,e,i)=>{"use strict";var n=i("q1tI"),s="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},r=n.useState,o=n.useEffect,a=n.useLayoutEffect,h=n.useDebugValue;function A(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!s(t,i)}catch(n){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var i=e(),n=r({inst:{value:i,getSnapshot:e}}),s=n[0].inst,c=n[1];return a((function(){s.value=i,s.getSnapshot=e,A(s)&&c({inst:s})}),[t,i,e]),o((function(){return A(s)&&c({inst:s}),t((function(){A(s)&&c({inst:s})}))}),[t]),h(i),i};e.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},"uiA+":(t,e,i)=>{"use strict";i.d(e,{H:()=>D});var n=i("jBc9"),s=Uint8Array,r=Uint16Array,o=Uint32Array,a=new s([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),h=new s([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),A=new s([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(t,e){for(var i=new r(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];var s=new o(i[30]);for(n=1;n<30;++n)for(var a=i[n];a<i[n+1];++a)s[a]=a-i[n]<<5|n;return[i,s]},l=c(a,2),u=l[0],d=l[1];u[28]=258,d[258]=28;for(var p=c(h,0),f=p[0],g=(p[1],new r(32768)),m=0;m<32768;++m){var C=(43690&m)>>>1|(21845&m)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,g[m]=((65280&C)>>>8|(255&C)<<8)>>>1}var v=function(t,e,i){for(var n=t.length,s=0,o=new r(e);s<n;++s)++o[t[s]-1];var a,h=new r(e);for(s=0;s<e;++s)h[s]=h[s-1]+o[s-1]<<1;if(i){a=new r(1<<e);var A=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],l=e-t[s],u=h[t[s]-1]++<<l,d=u|(1<<l)-1;u<=d;++u)a[g[u]>>>A]=c}else for(a=new r(n),s=0;s<n;++s)t[s]&&(a[s]=g[h[t[s]-1]++]>>>15-t[s]);return a},B=new s(288);for(m=0;m<144;++m)B[m]=8;for(m=144;m<256;++m)B[m]=9;for(m=256;m<280;++m)B[m]=7;for(m=280;m<288;++m)B[m]=8;var E=new s(32);for(m=0;m<32;++m)E[m]=5;var y=v(B,9,1),I=v(E,5,1),_=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},w=function(t,e,i){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&i},b=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},x=new s(0);function S(t,e){return function(t,e,i){var n=t.length;if(!n||i&&!i.l&&n<5)return e||new s(0);var c=!e||i,l=!i||i.i;i||(i={}),e||(e=new s(3*n));var d,p=function(t){var i=e.length;if(t>i){var n=new s(Math.max(2*i,t));n.set(e),e=n}},g=i.f||0,m=i.p||0,C=i.b||0,B=i.l,E=i.d,x=i.m,S=i.n,M=8*n;do{if(!B){i.f=g=w(t,m,1);var Q=w(t,m+1,3);if(m+=3,!Q){var D=t[(d=m,(H=(d/8|0)+(7&d&&1)+4)-4)]|t[H-3]<<8,T=H+D;if(T>n){if(l)throw"unexpected EOF";break}c&&p(C+D),e.set(t.subarray(H,T),C),i.b=C+=D,i.p=m=8*T;continue}if(1==Q)B=y,E=I,x=9,S=5;else{if(2!=Q)throw"invalid block type";var F=w(t,m,31)+257,R=w(t,m+10,15)+4,P=F+w(t,m+5,31)+1;m+=14;for(var U=new s(P),O=new s(19),G=0;G<R;++G)O[A[G]]=w(t,m+3*G,7);m+=3*R;var k=_(O),L=(1<<k)-1,N=v(O,k,1);for(G=0;G<P;){var H,z=N[w(t,m,L)];if(m+=15&z,(H=z>>>4)<16)U[G++]=H;else{var V=0,J=0;for(16==H?(J=3+w(t,m,3),m+=2,V=U[G-1]):17==H?(J=3+w(t,m,7),m+=3):18==H&&(J=11+w(t,m,127),m+=7);J--;)U[G++]=V}}var j=U.subarray(0,F),Y=U.subarray(F);x=_(j),S=_(Y),B=v(j,x,1),E=v(Y,S,1)}if(m>M){if(l)throw"unexpected EOF";break}}c&&p(C+131072);for(var K=(1<<x)-1,q=(1<<S)-1,X=m;;X=m){var W=(V=B[b(t,m)&K])>>>4;if((m+=15&V)>M){if(l)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(W<256)e[C++]=W;else{if(256==W){X=m,B=null;break}var Z=W-254;if(W>264){var $=a[G=W-257];Z=w(t,m,(1<<$)-1)+u[G],m+=$}var tt=E[b(t,m)&q],et=tt>>>4;if(!tt)throw"invalid distance";if(m+=15&tt,Y=f[et],et>3&&($=h[et],Y+=b(t,m)&(1<<$)-1,m+=$),m>M){if(l)throw"unexpected EOF";break}c&&p(C+131072);for(var it=C+Z;C<it;C+=4)e[C]=e[C-Y],e[C+1]=e[C+1-Y],e[C+2]=e[C+2-Y],e[C+3]=e[C+3-Y];C=it}}i.l=B,i.p=X,i.b=C,B&&(g=1,i.m=x,i.d=E,i.n=S)}while(!g);return C==e.length?e:function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var n=new(t instanceof r?r:t instanceof o?o:s)(i-e);return n.set(t.subarray(e,i)),n}(e,0,C)}((function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"}(t),t.subarray(2,-4)),e)}var M="undefined"!=typeof TextDecoder&&new TextDecoder;try{M.decode(x,{stream:!0})}catch(T){}const Q=i("Ua9r").r>=152;class D extends n.DataTextureLoader{constructor(t){super(t),this.type=n.HalfFloatType}parse(t){const e=65536,i=14,s=65537,r=Math.pow(2.7182818,2.2),o={l:0,c:0,lc:0};function a(t,e,i,n,s){for(;i<t;)e=e<<8|L(n,s),i+=8;i-=t,o.l=e>>i&(1<<t)-1,o.c=e,o.lc=i}const h=new Array(59);function A(t){return 63&t}function c(t){return t>>6}const l={c:0,lc:0};function u(t,e,i,n){t=t<<8|L(i,n),e+=8,l.c=t,l.lc=e}const d={c:0,lc:0};function p(t,e,i,n,s,r,o,a,h,A){if(t==e){n<8&&(u(i,n,s,o),i=l.c,n=l.lc);var c=i>>(n-=8);if(c=new Uint8Array([c])[0],h.value+c>A)return!1;for(var p=a[h.value-1];c-- >0;)a[h.value++]=p}else{if(!(h.value<A))return!1;a[h.value++]=t}d.c=i,d.lc=n}function f(t){return 65535&t}function g(t){var e=f(t);return e>32767?e-65536:e}const m={a:0,b:0};function C(t,e){var i=g(t),n=g(e),s=i+(1&n)+(n>>1),r=s,o=s-n;m.a=r,m.b=o}function v(t,e){var i=f(t),n=f(e),s=i-(n>>1)&65535,r=n+s-32768&65535;m.a=r,m.b=s}function B(t,e,i,n,s,r,o){for(var a,h=o<16384,A=i>s?s:i,c=1;c<=A;)c<<=1;for(a=c>>=1,c>>=1;c>=1;){for(var l,u,d,p,f=0,g=f+r*(s-a),B=r*c,E=r*a,y=n*c,I=n*a;f<=g;f+=E){for(var _=f,w=f+n*(i-a);_<=w;_+=I){var b=_+y,x=(S=_+B)+y;h?(C(t[_+e],t[S+e]),l=m.a,d=m.b,C(t[b+e],t[x+e]),u=m.a,p=m.b,C(l,u),t[_+e]=m.a,t[b+e]=m.b,C(d,p),t[S+e]=m.a,t[x+e]=m.b):(v(t[_+e],t[S+e]),l=m.a,d=m.b,v(t[b+e],t[x+e]),u=m.a,p=m.b,v(l,u),t[_+e]=m.a,t[b+e]=m.b,v(d,p),t[S+e]=m.a,t[x+e]=m.b)}if(i&c){var S=_+B;h?C(t[_+e],t[S+e]):v(t[_+e],t[S+e]),l=m.a,t[S+e]=m.b,t[_+e]=l}}if(s&c)for(_=f,w=f+n*(i-a);_<=w;_+=I)b=_+y,h?C(t[_+e],t[b+e]):v(t[_+e],t[b+e]),l=m.a,t[b+e]=m.b,t[_+e]=l;a=c,c>>=1}return f}function E(t,e,n,r,f,g){var m=n.value,C=k(e,n),v=k(e,n);n.value+=4;var B=k(e,n);if(n.value+=4,C<0||C>=s||v<0||v>=s)throw"Something wrong with HUF_ENCSIZE";var E=new Array(s),y=new Array(16384);if(function(t){for(var e=0;e<16384;e++)t[e]={},t[e].len=0,t[e].lit=0,t[e].p=null}(y),function(t,e,i,n,r,A,c){for(var l=i,u=0,d=0;r<=A;r++){if(l.value-i.value>n)return!1;a(6,u,d,t,l);var p=o.l;if(u=o.c,d=o.lc,c[r]=p,63==p){if(l.value-i.value>n)throw"Something wrong with hufUnpackEncTable";a(8,u,d,t,l);var f=o.l+6;if(u=o.c,d=o.lc,r+f>A+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)c[r++]=0;r--}else if(p>=59){if(r+(f=p-59+2)>A+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)c[r++]=0;r--}}!function(t){for(var e=0;e<=58;++e)h[e]=0;for(e=0;e<s;++e)h[t[e]]+=1;var i=0;for(e=58;e>0;--e){var n=i+h[e]>>1;h[e]=i,i=n}for(e=0;e<s;++e){var r=t[e];r>0&&(t[e]=r|h[r]++<<6)}}(c)}(t,0,n,r-(n.value-m),C,v,E),B>8*(r-(n.value-m)))throw"Something wrong with hufUncompress";!function(t,e,n,s){for(;e<=n;e++){var r=c(t[e]),o=A(t[e]);if(r>>o)throw"Invalid table entry";if(o>i){if((u=s[r>>o-i]).len)throw"Invalid table entry";if(u.lit++,u.p){var a=u.p;u.p=new Array(u.lit);for(var h=0;h<u.lit-1;++h)u.p[h]=a[h]}else u.p=new Array(1);u.p[u.lit-1]=e}else if(o){var l=0;for(h=1<<i-o;h>0;h--){var u;if((u=s[(r<<i-o)+l]).len||u.p)throw"Invalid table entry";u.len=o,u.lit=e,l++}}}}(E,C,v,y),function(t,e,n,s,r,o,a,h,f,g){for(var m=0,C=0,v=h,B=Math.trunc(r.value+(o+7)/8);r.value<B;)for(u(m,C,n,r),m=l.c,C=l.lc;C>=i;)if((_=e[m>>C-i&16383]).len)C-=_.len,p(_.lit,a,m,C,n,0,r,f,g,v),m=d.c,C=d.lc;else{if(!_.p)throw"hufDecode issues";var E;for(E=0;E<_.lit;E++){for(var y=A(t[_.p[E]]);C<y&&r.value<B;)u(m,C,n,r),m=l.c,C=l.lc;if(C>=y&&c(t[_.p[E]])==(m>>C-y&(1<<y)-1)){C-=y,p(_.p[E],a,m,C,n,0,r,f,g,v),m=d.c,C=d.lc;break}}if(E==_.lit)throw"hufDecode issues"}var I=8-o&7;for(m>>=I,C-=I;C>0;){var _;if(!(_=e[m<<i-C&16383]).len)throw"hufDecode issues";C-=_.len,p(_.lit,a,m,C,n,0,r,f,g,v),m=d.c,C=d.lc}}(E,y,t,0,n,B,v,g,f,{value:0})}function y(t){for(var e=1;e<t.length;e++){var i=t[e-1]+t[e]-128;t[e]=i}}function I(t,e){for(var i=0,n=Math.floor((t.length+1)/2),s=0,r=t.length-1;!(s>r)&&(e[s++]=t[i++],!(s>r));)e[s++]=t[n++]}function _(t){for(var e=t.byteLength,i=new Array,n=0,s=new DataView(t);e>0;){var r=s.getInt8(n++);if(r<0){e-=1+(a=-r);for(var o=0;o<a;o++)i.push(s.getUint8(n++))}else{var a=r;e-=2;var h=s.getUint8(n++);for(o=0;o<a+1;o++)i.push(h)}}return i}function w(t,e,i){for(var n,s=1;s<64;)65280==(n=e[t.value])?s=64:n>>8==255?s+=255&n:(i[s]=n,s++),t.value++}function b(t){const e=.5*Math.cos(.7853975),i=.5*Math.cos(3.14159/16),n=.5*Math.cos(3.14159/8),s=.5*Math.cos(3*3.14159/16),r=.5*Math.cos(.981746875),o=.5*Math.cos(3*3.14159/8),a=.5*Math.cos(1.374445625);for(var h=new Array(4),A=new Array(4),c=new Array(4),l=new Array(4),u=0;u<8;++u){var d=8*u;h[0]=n*t[d+2],h[1]=o*t[d+2],h[2]=n*t[d+6],h[3]=o*t[d+6],A[0]=i*t[d+1]+s*t[d+3]+r*t[d+5]+a*t[d+7],A[1]=s*t[d+1]-a*t[d+3]-i*t[d+5]-r*t[d+7],A[2]=r*t[d+1]-i*t[d+3]+a*t[d+5]+s*t[d+7],A[3]=a*t[d+1]-r*t[d+3]+s*t[d+5]-i*t[d+7],c[0]=e*(t[d+0]+t[d+4]),c[3]=e*(t[d+0]-t[d+4]),c[1]=h[0]+h[3],c[2]=h[1]-h[2],l[0]=c[0]+c[1],l[1]=c[3]+c[2],l[2]=c[3]-c[2],l[3]=c[0]-c[1],t[d+0]=l[0]+A[0],t[d+1]=l[1]+A[1],t[d+2]=l[2]+A[2],t[d+3]=l[3]+A[3],t[d+4]=l[3]-A[3],t[d+5]=l[2]-A[2],t[d+6]=l[1]-A[1],t[d+7]=l[0]-A[0]}for(var p=0;p<8;++p)h[0]=n*t[16+p],h[1]=o*t[16+p],h[2]=n*t[48+p],h[3]=o*t[48+p],A[0]=i*t[8+p]+s*t[24+p]+r*t[40+p]+a*t[56+p],A[1]=s*t[8+p]-a*t[24+p]-i*t[40+p]-r*t[56+p],A[2]=r*t[8+p]-i*t[24+p]+a*t[40+p]+s*t[56+p],A[3]=a*t[8+p]-r*t[24+p]+s*t[40+p]-i*t[56+p],c[0]=e*(t[p]+t[32+p]),c[3]=e*(t[p]-t[32+p]),c[1]=h[0]+h[3],c[2]=h[1]-h[2],l[0]=c[0]+c[1],l[1]=c[3]+c[2],l[2]=c[3]-c[2],l[3]=c[0]-c[1],t[0+p]=l[0]+A[0],t[8+p]=l[1]+A[1],t[16+p]=l[2]+A[2],t[24+p]=l[3]+A[3],t[32+p]=l[3]-A[3],t[40+p]=l[2]-A[2],t[48+p]=l[1]-A[1],t[56+p]=l[0]-A[0]}function x(t){for(var e=0;e<64;++e){var i=t[0][e],n=t[1][e],s=t[2][e];t[0][e]=i+1.5747*s,t[1][e]=i-.1873*n-.4682*s,t[2][e]=i+1.8556*n}}function M(t,e,i){for(var s=0;s<64;++s)e[i+s]=n.DataUtils.toHalfFloat((o=t[s])<=1?Math.sign(o)*Math.pow(Math.abs(o),2.2):Math.sign(o)*Math.pow(r,Math.abs(o)-1));var o}function D(t){return new DataView(t.array.buffer,t.offset.value,t.size)}function T(t){var e=t.viewer.buffer.slice(t.offset.value,t.offset.value+t.size),i=new Uint8Array(_(e)),n=new Uint8Array(i.length);return y(i),I(i,n),new DataView(n.buffer)}function F(t){var e=S(t.array.slice(t.offset.value,t.offset.value+t.size)),i=new Uint8Array(e.length);return y(e),I(e,i),new DataView(i.buffer)}function R(t){for(var i=t.viewer,n={value:t.offset.value},s=new Uint16Array(t.width*t.scanlineBlockSize*(t.channels*t.type)),r=new Uint8Array(8192),o=0,a=new Array(t.channels),h=0;h<t.channels;h++)a[h]={},a[h].start=o,a[h].end=a[h].start,a[h].nx=t.width,a[h].ny=t.lines,a[h].size=t.type,o+=a[h].nx*a[h].ny*a[h].size;var A=j(i,n),c=j(i,n);if(c>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(A<=c)for(h=0;h<c-A+1;h++)r[h+A]=N(i,n);var l=new Uint16Array(e),u=function(t,i){for(var n=0,s=0;s<e;++s)(0==s||t[s>>3]&1<<(7&s))&&(i[n++]=s);for(var r=n-1;n<e;)i[n++]=0;return r}(r,l),d=k(i,n);for(E(t.array,i,n,d,s,o),h=0;h<t.channels;++h)for(var p=a[h],f=0;f<a[h].size;++f)B(s,p.start+f,p.nx,p.size,p.ny,p.nx*p.size,u);!function(t,e,i){for(var n=0;n<i;++n)e[n]=t[e[n]]}(l,s,o);for(var g=0,m=new Uint8Array(s.buffer.byteLength),C=0;C<t.lines;C++)for(var v=0;v<t.channels;v++){var y=(p=a[v]).nx*p.size,I=new Uint8Array(s.buffer,2*p.end,2*y);m.set(I,g),g+=2*y,p.end+=y}return new DataView(m.buffer)}function P(t){var e=S(t.array.slice(t.offset.value,t.offset.value+t.size));const i=t.lines*t.channels*t.width,n=1==t.type?new Uint16Array(i):new Uint32Array(i);let s=0,r=0;const o=new Array(4);for(let a=0;a<t.lines;a++)for(let i=0;i<t.channels;i++){let i=0;switch(t.type){case 1:o[0]=s,o[1]=o[0]+t.width,s=o[1]+t.width;for(let s=0;s<t.width;++s)i+=e[o[0]++]<<8|e[o[1]++],n[r]=i,r++;break;case 2:o[0]=s,o[1]=o[0]+t.width,o[2]=o[1]+t.width,s=o[2]+t.width;for(let s=0;s<t.width;++s)i+=e[o[0]++]<<24|e[o[1]++]<<16|e[o[2]++]<<8,n[r]=i,r++}}return new DataView(n.buffer)}function U(t){var e=t.viewer,i={value:t.offset.value},n=new Uint8Array(t.width*t.lines*(t.channels*t.type*2)),s={version:H(e,i),unknownUncompressedSize:H(e,i),unknownCompressedSize:H(e,i),acCompressedSize:H(e,i),dcCompressedSize:H(e,i),rleCompressedSize:H(e,i),rleUncompressedSize:H(e,i),rleRawSize:H(e,i),totalAcUncompressedCount:H(e,i),totalDcUncompressedCount:H(e,i),acCompression:H(e,i)};if(s.version<2)throw"EXRLoader.parse: "+Z.compression+" version "+s.version+" is unsupported";for(var r=new Array,o=j(e,i)-2;o>0;){var a=O(e.buffer,i),h=N(e,i),A=h>>2&3,c=new Int8Array([(h>>4)-1])[0],l=N(e,i);r.push({name:a,index:c,type:l,compression:A}),o-=a.length+3}for(var u=Z.channels,d=new Array(t.channels),p=0;p<t.channels;++p){var f=d[p]={},g=u[p];f.name=g.name,f.compression=0,f.decoded=!1,f.type=g.pixelType,f.pLinear=g.pLinear,f.width=t.width,f.height=t.lines}for(var m={idx:new Array(3)},C=0;C<t.channels;++C)for(f=d[C],p=0;p<r.length;++p){var v=r[p];f.name==v.name&&(f.compression=v.compression,v.index>=0&&(m.idx[v.index]=C),f.offset=C)}if(s.acCompressedSize>0)switch(s.acCompression){case 0:var B=new Uint16Array(s.totalAcUncompressedCount);E(t.array,e,i,s.acCompressedSize,B,s.totalAcUncompressedCount);break;case 1:var y=S(t.array.slice(i.value,i.value+s.totalAcUncompressedCount));B=new Uint16Array(y.buffer),i.value+=s.totalAcUncompressedCount}if(s.dcCompressedSize>0){var I={array:t.array,offset:i,size:s.dcCompressedSize},Q=new Uint16Array(F(I).buffer);i.value+=s.dcCompressedSize}if(s.rleRawSize>0){var D=_((y=S(t.array.slice(i.value,i.value+s.rleCompressedSize))).buffer);i.value+=s.rleCompressedSize}var T=0,R=new Array(d.length);for(p=0;p<R.length;++p)R[p]=new Array;for(var P=0;P<t.lines;++P)for(var U=0;U<d.length;++U)R[U].push(T),T+=d[U].width*t.type*2;for(function(t,e,i,n,s,r){var o,a,h=new DataView(r.buffer),A=i[t.idx[0]].width,c=i[t.idx[0]].height,l=Math.floor(A/8),u=Math.ceil(A/8),d=Math.ceil(c/8),p=A-8*(u-1),f=c-8*(d-1),g={value:0},m=new Array(3),C=new Array(3),v=new Array(3),B=new Array(3),E=new Array(3);for(let w=0;w<3;++w)E[w]=e[t.idx[w]],m[w]=w<1?0:m[w-1]+u*d,C[w]=new Float32Array(64),v[w]=new Uint16Array(64),B[w]=new Uint16Array(64*u);for(let F=0;F<d;++F){var y=8;F==d-1&&(y=f);var I=8;for(let t=0;t<u;++t){t==u-1&&(I=p);for(let t=0;t<3;++t)v[t].fill(0),v[t][0]=s[m[t]++],w(g,n,v[t]),o=v[t],(a=C[t])[0]=J(o[0]),a[1]=J(o[1]),a[2]=J(o[5]),a[3]=J(o[6]),a[4]=J(o[14]),a[5]=J(o[15]),a[6]=J(o[27]),a[7]=J(o[28]),a[8]=J(o[2]),a[9]=J(o[4]),a[10]=J(o[7]),a[11]=J(o[13]),a[12]=J(o[16]),a[13]=J(o[26]),a[14]=J(o[29]),a[15]=J(o[42]),a[16]=J(o[3]),a[17]=J(o[8]),a[18]=J(o[12]),a[19]=J(o[17]),a[20]=J(o[25]),a[21]=J(o[30]),a[22]=J(o[41]),a[23]=J(o[43]),a[24]=J(o[9]),a[25]=J(o[11]),a[26]=J(o[18]),a[27]=J(o[24]),a[28]=J(o[31]),a[29]=J(o[40]),a[30]=J(o[44]),a[31]=J(o[53]),a[32]=J(o[10]),a[33]=J(o[19]),a[34]=J(o[23]),a[35]=J(o[32]),a[36]=J(o[39]),a[37]=J(o[45]),a[38]=J(o[52]),a[39]=J(o[54]),a[40]=J(o[20]),a[41]=J(o[22]),a[42]=J(o[33]),a[43]=J(o[38]),a[44]=J(o[46]),a[45]=J(o[51]),a[46]=J(o[55]),a[47]=J(o[60]),a[48]=J(o[21]),a[49]=J(o[34]),a[50]=J(o[37]),a[51]=J(o[47]),a[52]=J(o[50]),a[53]=J(o[56]),a[54]=J(o[59]),a[55]=J(o[61]),a[56]=J(o[35]),a[57]=J(o[36]),a[58]=J(o[48]),a[59]=J(o[49]),a[60]=J(o[57]),a[61]=J(o[58]),a[62]=J(o[62]),a[63]=J(o[63]),b(C[t]);x(C);for(let e=0;e<3;++e)M(C[e],B[e],64*t)}let e=0;for(let n=0;n<3;++n){const s=i[t.idx[n]].type;for(let t=8*F;t<8*F+y;++t){e=E[n][t];for(let i=0;i<l;++i){const r=64*i+8*(7&t);h.setUint16(e+0*s,B[n][r+0],!0),h.setUint16(e+2*s,B[n][r+1],!0),h.setUint16(e+4*s,B[n][r+2],!0),h.setUint16(e+6*s,B[n][r+3],!0),h.setUint16(e+8*s,B[n][r+4],!0),h.setUint16(e+10*s,B[n][r+5],!0),h.setUint16(e+12*s,B[n][r+6],!0),h.setUint16(e+14*s,B[n][r+7],!0),e+=16*s}}if(l!=u)for(let t=8*F;t<8*F+y;++t){const e=E[n][t]+8*l*2*s,i=64*l+8*(7&t);for(let t=0;t<I;++t)h.setUint16(e+2*t*s,B[n][i+t],!0)}}}for(var _=new Uint16Array(A),S=(h=new DataView(r.buffer),0);S<3;++S){i[t.idx[S]].decoded=!0;var Q=i[t.idx[S]].type;if(2==i[S].type)for(var D=0;D<c;++D){const t=E[S][D];for(var T=0;T<A;++T)_[T]=h.getUint16(t+2*T*Q,!0);for(T=0;T<A;++T)h.setFloat32(t+2*T*Q,J(_[T]),!0)}}}(m,R,d,B,Q,n),p=0;p<d.length;++p)if(!(f=d[p]).decoded){if(2!==f.compression)throw"EXRLoader.parse: unsupported channel compression";var G=0,k=0;for(P=0;P<t.lines;++P){for(var L=R[p][G],z=0;z<f.width;++z){for(var V=0;V<2*f.type;++V)n[L++]=D[k+V*f.width*f.height];k++}G++}}return new DataView(n.buffer)}function O(t,e){for(var i=new Uint8Array(t),n=0;0!=i[e.value+n];)n+=1;var s=(new TextDecoder).decode(i.slice(e.value,e.value+n));return e.value=e.value+n+1,s}function G(t,e){var i=t.getInt32(e.value,!0);return e.value=e.value+4,i}function k(t,e){var i=t.getUint32(e.value,!0);return e.value=e.value+4,i}function L(t,e){var i=t[e.value];return e.value=e.value+1,i}function N(t,e){var i=t.getUint8(e.value);return e.value=e.value+1,i}const H=function(t,e){let i;return i="getBigInt64"in DataView.prototype?Number(t.getBigInt64(e.value,!0)):t.getUint32(e.value+4,!0)+Number(t.getUint32(e.value,!0)<<32),e.value+=8,i};function z(t,e){var i=t.getFloat32(e.value,!0);return e.value+=4,i}function V(t,e){return n.DataUtils.toHalfFloat(z(t,e))}function J(t){var e=(31744&t)>>10,i=1023&t;return(t>>15?-1:1)*(e?31===e?i?NaN:1/0:Math.pow(2,e-15)*(1+i/1024):i/1024*6103515625e-14)}function j(t,e){var i=t.getUint16(e.value,!0);return e.value+=2,i}function Y(t,e){return J(j(t,e))}function K(t,e,i,n,s){return"string"===n||"stringvector"===n||"iccProfile"===n?function(t,e,i){var n=(new TextDecoder).decode(new Uint8Array(t).slice(e.value,e.value+i));return e.value=e.value+i,n}(e,i,s):"chlist"===n?function(t,e,i,n){for(var s=i.value,r=[];i.value<s+n-1;){var o=O(e,i),a=G(t,i),h=N(t,i);i.value+=3;var A=G(t,i),c=G(t,i);r.push({name:o,pixelType:a,pLinear:h,xSampling:A,ySampling:c})}return i.value+=1,r}(t,e,i,s):"chromaticities"===n?function(t,e){return{redX:z(t,e),redY:z(t,e),greenX:z(t,e),greenY:z(t,e),blueX:z(t,e),blueY:z(t,e),whiteX:z(t,e),whiteY:z(t,e)}}(t,i):"compression"===n?function(t,e){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][N(t,e)]}(t,i):"box2i"===n?function(t,e){return{xMin:k(t,e),yMin:k(t,e),xMax:k(t,e),yMax:k(t,e)}}(t,i):"lineOrder"===n?function(t,e){return["INCREASING_Y"][N(t,e)]}(t,i):"float"===n?z(t,i):"v2f"===n?function(t,e){return[z(t,e),z(t,e)]}(t,i):"v3f"===n?function(t,e){return[z(t,e),z(t,e),z(t,e)]}(t,i):"int"===n?G(t,i):"rational"===n?function(t,e){return[G(t,e),k(t,e)]}(t,i):"timecode"===n?function(t,e){return[k(t,e),k(t,e)]}(t,i):"preview"===n?(i.value+=s,"skipped"):void(i.value+=s)}const q=new DataView(t),X=new Uint8Array(t),W={value:0},Z=function(t,e,i){const n={};if(20000630!=t.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";n.version=t.getUint8(4);const s=t.getUint8(5);n.spec={singleTile:!!(2&s),longName:!!(4&s),deepFormat:!!(8&s),multiPart:!!(16&s)},i.value=8;for(var r=!0;r;){var o=O(e,i);if(0==o)r=!1;else{var a=K(t,e,i,O(e,i),k(t,i));void 0===a||(n[o]=a)}}if(0!=(-5&s))throw"THREE.EXRLoader: provided file is currently unsupported.";return n}(q,t,W),$=function(t,e,i,s,r){const o={size:0,viewer:e,array:i,offset:s,width:t.dataWindow.xMax-t.dataWindow.xMin+1,height:t.dataWindow.yMax-t.dataWindow.yMin+1,channels:t.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:t.channels[0].pixelType,uncompress:null,getter:null,format:null,[Q?"colorSpace":"encoding"]:null};switch(t.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=D;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=T;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=F;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=F;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=R;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=P;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=U;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=U;break;default:throw"EXRLoader.parse: "+t.compression+" is unsupported"}if(o.scanlineBlockSize=o.lines,1==o.type)switch(r){case n.FloatType:o.getter=Y,o.inputSize=2;break;case n.HalfFloatType:o.getter=j,o.inputSize=2}else{if(2!=o.type)throw"EXRLoader.parse: unsupported pixelType "+o.type+" for "+t.compression+".";switch(r){case n.FloatType:o.getter=z,o.inputSize=4;break;case n.HalfFloatType:o.getter=V,o.inputSize=4}}o.blockCount=(t.dataWindow.yMax+1)/o.scanlineBlockSize;for(var a=0;a<o.blockCount;a++)H(e,s);o.outputChannels=3==o.channels?4:o.channels;const h=o.width*o.height*o.outputChannels;switch(r){case n.FloatType:o.byteArray=new Float32Array(h),o.channels<o.outputChannels&&o.byteArray.fill(1,0,h);break;case n.HalfFloatType:o.byteArray=new Uint16Array(h),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,h)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?o.format=n.RGBAFormat:o.format=n.RedFormat,Q?o.colorSpace="srgb-linear":o.encoding=3e3,o}(Z,q,X,W,this.type),tt={value:0},et={R:0,G:1,B:2,A:3,Y:0};for(let n=0;n<$.height/$.scanlineBlockSize;n++){const t=k(q,W);$.size=k(q,W),$.lines=t+$.scanlineBlockSize>$.height?$.height-t:$.scanlineBlockSize;const e=$.size<$.lines*$.bytesPerLine?$.uncompress($):D($);W.value+=$.size;for(let i=0;i<$.scanlineBlockSize;i++){const t=i+n*$.scanlineBlockSize;if(t>=$.height)break;for(let n=0;n<$.channels;n++){const s=et[Z.channels[n].name];for(let r=0;r<$.width;r++){tt.value=(i*($.channels*$.width)+n*$.width+r)*$.inputSize;const o=($.height-1-t)*($.width*$.outputChannels)+r*$.outputChannels+s;$.byteArray[o]=$.getter(e,tt)}}}}return{header:Z,width:$.width,height:$.height,data:$.byteArray,format:$.format,[Q?"colorSpace":"encoding"]:$[Q?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,e,i,s){return super.load(t,(function(t,i){Q?t.colorSpace=i.colorSpace:t.encoding=i.encoding,t.minFilter=n.LinearFilter,t.magFilter=n.LinearFilter,t.generateMipmaps=!1,t.flipY=!1,e&&e(t,i)}),i,s)}}},uzUo:(t,e,i)=>{"use strict";i.d(e,{r:()=>n});const n={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "}},xIrr:(t,e,i)=>{"use strict";i.d(e,{_c:()=>r,ec:()=>s,pb:()=>o});var n=i("jBc9");function s(t,e=1e-4){e=Math.max(e,Number.EPSILON);const i={},s=t.getIndex(),r=t.getAttribute("position"),o=s?s.count:r.count;let a=0;const h=Object.keys(t.attributes),A={},c={},l=[],u=["getX","getY","getZ","getW"];for(let n=0,g=h.length;n<g;n++){const e=h[n];A[e]=[];const i=t.morphAttributes[e];i&&(c[e]=new Array(i.length).fill(0).map((()=>[])))}const d=Math.log10(1/e),p=Math.pow(10,d);for(let n=0;n<o;n++){const e=s?s.getX(n):n;let r="";for(let i=0,n=h.length;i<n;i++){const n=h[i],s=t.getAttribute(n),o=s.itemSize;for(let t=0;t<o;t++)r+=~~(s[u[t]](e)*p)+","}if(r in i)l.push(i[r]);else{for(let i=0,n=h.length;i<n;i++){const n=h[i],s=t.getAttribute(n),r=t.morphAttributes[n],o=s.itemSize,a=A[n],l=c[n];for(let t=0;t<o;t++){const i=u[t];if(a.push(s[i](e)),r)for(let t=0,n=r.length;t<n;t++)l[t].push(r[t][i](e))}}i[r]=a,l.push(a),a++}}const f=t.clone();for(let g=0,m=h.length;g<m;g++){const e=h[g],i=t.getAttribute(e),s=new i.array.constructor(A[e]),r=new n.BufferAttribute(s,i.itemSize,i.normalized);if(f.setAttribute(e,r),e in c)for(let o=0;o<c[e].length;o++){const i=t.morphAttributes[e][o],s=new i.array.constructor(c[e][o]),r=new n.BufferAttribute(s,i.itemSize,i.normalized);f.morphAttributes[e][o]=r}}return f.setIndex(l),f}function r(t,e){if(e===n.TrianglesDrawMode)return t;if(e===n.TriangleFanDrawMode||e===n.TriangleStripDrawMode){let i=t.getIndex();if(null===i){const e=[],n=t.getAttribute("position");if(void 0===n)return t;for(let t=0;t<n.count;t++)e.push(t);t.setIndex(e),i=t.getIndex()}const s=i.count-2,r=[];if(i)if(e===n.TriangleFanDrawMode)for(let t=1;t<=s;t++)r.push(i.getX(0)),r.push(i.getX(t)),r.push(i.getX(t+1));else for(let t=0;t<s;t++)t%2===0?(r.push(i.getX(t)),r.push(i.getX(t+1)),r.push(i.getX(t+2))):(r.push(i.getX(t+2)),r.push(i.getX(t+1)),r.push(i.getX(t)));r.length;const o=t.clone();return o.setIndex(r),o.clearGroups(),o}return t}function o(t,e=Math.PI/3){const i=Math.cos(e),s=100*(1+1e-10),r=[new n.Vector3,new n.Vector3,new n.Vector3],o=new n.Vector3,a=new n.Vector3,h=new n.Vector3,A=new n.Vector3;function c(t){return`${~~(t.x*s)},${~~(t.y*s)},${~~(t.z*s)}`}const l=t.index?t.toNonIndexed():t,u=l.attributes.position,d={};for(let g=0,m=u.count/3;g<m;g++){const t=3*g,e=r[0].fromBufferAttribute(u,t+0),i=r[1].fromBufferAttribute(u,t+1),s=r[2].fromBufferAttribute(u,t+2);o.subVectors(s,i),a.subVectors(e,i);const h=(new n.Vector3).crossVectors(o,a).normalize();for(let n=0;n<3;n++){const t=c(r[n]);t in d||(d[t]=[]),d[t].push(h)}}const p=new Float32Array(3*u.count),f=new n.BufferAttribute(p,3,!1);for(let n=0,g=u.count/3;n<g;n++){const t=3*n,e=r[0].fromBufferAttribute(u,t+0),s=r[1].fromBufferAttribute(u,t+1),l=r[2].fromBufferAttribute(u,t+2);o.subVectors(l,s),a.subVectors(e,s),h.crossVectors(o,a).normalize();for(let n=0;n<3;n++){const e=d[c(r[n])];A.set(0,0,0);for(let t=0,n=e.length;t<n;t++){const n=e[t];h.dot(n)>i&&A.add(n)}A.normalize(),f.setXYZ(t+n,A.x,A.y,A.z)}}return l.setAttribute("normal",f),l}},zG99:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i("q1tI"),s=i("17x9"),r=i.n(s);function o(t){return a(t.children,t.components)}function a(t,e,i){if(i=i||[],!e[0])return t(i);function s(n){return a(t,e.slice(1),i.concat([n]))}return"function"===typeof e[0]?e[0]({results:i,render:s}):(0,n.cloneElement)(e[0],{children:s})}o.propTypes={children:r().func.isRequired,components:r().arrayOf(r().oneOfType([r().element,r().func])).isRequired}}}]);
//# sourceMappingURL=node_modules_use-gesture_react_dist_use-gesture-react_esm_js-node_modules_camera-controls_dis-786869.e9a665bee80f652a9973.chunk.js.map